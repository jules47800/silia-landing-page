"use strict";(self.webpackChunk_N_E=self.webpackChunk_N_E||[]).push([[7930],{3933:function(t,e,n){n.d(e,{r:function(){return A}});var r=n(7294),i=n(1147),o=n(4192),s=n(3781),a=n(9946),l=n(4157),c=n(3784),u=n(6045),d=n(4103),p=n(5985),h=n(2351),f=n(9516),m=n(1363),g=n(6723);let y=(0,r.createContext)(null);function v(){let t=(0,r.useContext)(y);if(null===t){let t=new Error("You used a <Label /> component, but it is not inside a relevant parent.");throw Error.captureStackTrace&&Error.captureStackTrace(t,v),t}return t}function b(){let[t,e]=(0,r.useState)([]);return[t.length>0?t.join(" "):void 0,(0,r.useMemo)((()=>function(t){let n=(0,s.z)((t=>(e((e=>[...e,t])),()=>e((e=>{let n=e.slice(),r=n.indexOf(t);return-1!==r&&n.splice(r,1),n}))))),i=(0,r.useMemo)((()=>({register:n,slot:t.slot,name:t.name,props:t.props})),[n,t.slot,t.name,t.props]);return r.createElement(y.Provider,{value:i},t.children)}),[e])]}let w=(0,h.yV)((function(t,e){let n=(0,a.M)(),{id:r=`headlessui-label-${n}`,passive:i=!1,...o}=t,s=v(),l=(0,c.T)(e);(0,g.e)((()=>s.register(r)),[r,s.register]);let u={ref:l,...s.props,id:r};return i&&("onClick"in u&&(delete u.htmlFor,delete u.onClick),"onClick"in o&&delete o.onClick),(0,h.sY)({ourProps:u,theirProps:o,slot:s.slot||{},defaultTag:"label",name:s.name||"Label"})})),x=Object.assign(w,{}),k=(0,r.createContext)(null);k.displayName="GroupContext";let S=r.Fragment;let M=(0,h.yV)((function(t,e){var n;let f=(0,a.M)(),{id:g=`headlessui-switch-${f}`,checked:y,defaultChecked:v=!1,onChange:b,disabled:w=!1,name:x,value:S,form:M,...C}=t,A=(0,r.useContext)(k),T=(0,r.useRef)(null),O=(0,c.T)(T,e,null===A?null:A.setSwitch),[E,I]=(0,i.q)(y,b,v),N=(0,s.z)((()=>null==I?void 0:I(!E))),R=(0,s.z)((t=>{if((0,d.P)(t.currentTarget))return t.preventDefault();t.preventDefault(),N()})),D=(0,s.z)((t=>{t.key===m.R.Space?(t.preventDefault(),N()):t.key===m.R.Enter&&(0,p.g)(t.currentTarget)})),L=(0,s.z)((t=>t.preventDefault())),F=(0,r.useMemo)((()=>({checked:E})),[E]),H={id:g,ref:O,role:"switch",type:(0,l.f)(t,T),tabIndex:-1===t.tabIndex?0:null!=(n=t.tabIndex)?n:0,"aria-checked":E,"aria-labelledby":null==A?void 0:A.labelledby,"aria-describedby":null==A?void 0:A.describedby,disabled:w,onClick:R,onKeyUp:D,onKeyPress:L},_=(0,o.G)();return(0,r.useEffect)((()=>{var t;let e=null==(t=T.current)?void 0:t.closest("form");e&&void 0!==v&&_.addEventListener(e,"reset",(()=>{I(v)}))}),[T,I]),r.createElement(r.Fragment,null,null!=x&&E&&r.createElement(u._,{features:u.A.Hidden,...(0,h.oA)({as:"input",type:"checkbox",hidden:!0,readOnly:!0,disabled:w,form:M,checked:E,name:x,value:S})}),(0,h.sY)({ourProps:H,theirProps:C,slot:F,defaultTag:"button",name:"Switch"}))})),C=function(t){var e;let[n,i]=(0,r.useState)(null),[o,s]=b(),[a,l]=(0,f.f)(),c=(0,r.useMemo)((()=>({switch:n,setSwitch:i,labelledby:o,describedby:a})),[n,i,o,a]),u=t;return r.createElement(l,{name:"Switch.Description"},r.createElement(s,{name:"Switch.Label",props:{htmlFor:null==(e=c.switch)?void 0:e.id,onClick(t){n&&("LABEL"===t.currentTarget.tagName&&t.preventDefault(),n.click(),n.focus({preventScroll:!0}))}}},r.createElement(k.Provider,{value:c},(0,h.sY)({ourProps:{},theirProps:u,defaultTag:S,name:"Switch.Group"}))))},A=Object.assign(M,{Group:C,Label:x,Description:f.d})},1147:function(t,e,n){n.d(e,{q:function(){return o}});var r=n(7294),i=n(3781);function o(t,e,n){let[o,s]=(0,r.useState)(n),a=void 0!==t,l=(0,r.useRef)(a),c=(0,r.useRef)(!1),u=(0,r.useRef)(!1);return!a||l.current||c.current?!a&&l.current&&!u.current&&(u.current=!0,l.current=a,console.error("A component is changing from controlled to uncontrolled. This may be caused by the value changing from a defined value to undefined, which should not happen.")):(c.current=!0,l.current=a,console.error("A component is changing from uncontrolled to controlled. This may be caused by the value changing from undefined to a defined value, which should not happen.")),[a?t:o,(0,i.z)((t=>(a||s(t),null==e?void 0:e(t))))]}},4157:function(t,e,n){n.d(e,{f:function(){return s}});var r=n(7294),i=n(6723);function o(t){var e;if(t.type)return t.type;let n=null!=(e=t.as)?e:"button";return"string"==typeof n&&"button"===n.toLowerCase()?"button":void 0}function s(t,e){let[n,s]=(0,r.useState)((()=>o(t)));return(0,i.e)((()=>{s(o(t))}),[t.type,t.as]),(0,i.e)((()=>{n||e.current&&e.current instanceof HTMLButtonElement&&!e.current.hasAttribute("type")&&s("button")}),[n,e]),n}},5985:function(t,e,n){function r(t={},e=null,n=[]){for(let[r,s]of Object.entries(t))o(n,i(e,r),s);return n}function i(t,e){return t?t+"["+e+"]":e}function o(t,e,n){if(Array.isArray(n))for(let[r,s]of n.entries())o(t,i(e,r.toString()),s);else n instanceof Date?t.push([e,n.toISOString()]):"boolean"==typeof n?t.push([e,n?"1":"0"]):"string"==typeof n?t.push([e,n]):"number"==typeof n?t.push([e,`${n}`]):null==n?t.push([e,""]):r(n,e,t)}function s(t){var e,n;let r=null!=(e=null==t?void 0:t.form)?e:t.closest("form");if(r){for(let e of r.elements)if(e!==t&&("INPUT"===e.tagName&&"submit"===e.type||"BUTTON"===e.tagName&&"submit"===e.type||"INPUT"===e.nodeName&&"image"===e.type))return void e.click();null==(n=r.requestSubmit)||n.call(r)}}n.d(e,{g:function(){return s},t:function(){return r}})},5001:function(t,e,n){var r=n(7294);const i=r.forwardRef((function(t,e){return r.createElement("svg",Object.assign({xmlns:"http://www.w3.org/2000/svg",viewBox:"0 0 20 20",fill:"currentColor","aria-hidden":"true",ref:e},t),r.createElement("path",{fillRule:"evenodd",d:"M18 10a8 8 0 11-16 0 8 8 0 0116 0zm-7 4a1 1 0 11-2 0 1 1 0 012 0zm-1-9a1 1 0 00-1 1v4a1 1 0 102 0V6a1 1 0 00-1-1z",clipRule:"evenodd"}))}));e.Z=i},9534:function(t,e,n){function r(t,e){if(null==t)return{};var n,r,i=function(t,e){if(null==t)return{};var n,r,i={},o=Object.keys(t);for(r=0;r<o.length;r++)n=o[r],e.indexOf(n)>=0||(i[n]=t[n]);return i}(t,e);if(Object.getOwnPropertySymbols){var o=Object.getOwnPropertySymbols(t);for(r=0;r<o.length;r++)n=o[r],e.indexOf(n)>=0||Object.prototype.propertyIsEnumerable.call(t,n)&&(i[n]=t[n])}return i}n.d(e,{Z:function(){return r}})},561:function(t,e,n){n.d(e,{DY:function(){return a},ZP:function(){return a}});var r=n(5865);const i=r.NB.create({name:"listItem",addOptions:()=>({HTMLAttributes:{},bulletListTypeName:"bulletList",orderedListTypeName:"orderedList"}),content:"paragraph block*",defining:!0,parseHTML:()=>[{tag:"li"}],renderHTML({HTMLAttributes:t}){return["li",(0,r.P1)(this.options.HTMLAttributes,t),0]},addKeyboardShortcuts(){return{Enter:()=>this.editor.commands.splitListItem(this.name),Tab:()=>this.editor.commands.sinkListItem(this.name),"Shift-Tab":()=>this.editor.commands.liftListItem(this.name)}}}),o=r.vc.create({name:"textStyle",priority:101,addOptions:()=>({HTMLAttributes:{}}),parseHTML:()=>[{tag:"span",getAttrs:t=>!!t.hasAttribute("style")&&{}}],renderHTML({HTMLAttributes:t}){return["span",(0,r.P1)(this.options.HTMLAttributes,t),0]},addCommands(){return{removeEmptyTextStyle:()=>({state:t,commands:e})=>{const n=(0,r.Jo)(t,this.type);return!!Object.entries(n).some((([,t])=>!!t))||e.unsetMark(this.name)}}}}),s=/^\s*([-+*])\s$/,a=r.NB.create({name:"bulletList",addOptions:()=>({itemTypeName:"listItem",HTMLAttributes:{},keepMarks:!1,keepAttributes:!1}),group:"block list",content(){return`${this.options.itemTypeName}+`},parseHTML:()=>[{tag:"ul"}],renderHTML({HTMLAttributes:t}){return["ul",(0,r.P1)(this.options.HTMLAttributes,t),0]},addCommands(){return{toggleBulletList:()=>({commands:t,chain:e})=>this.options.keepAttributes?e().toggleList(this.name,this.options.itemTypeName,this.options.keepMarks).updateAttributes(i.name,this.editor.getAttributes(o.name)).run():t.toggleList(this.name,this.options.itemTypeName,this.options.keepMarks)}},addKeyboardShortcuts(){return{"Mod-Shift-8":()=>this.editor.commands.toggleBulletList()}},addInputRules(){let t=(0,r.S0)({find:s,type:this.type});return(this.options.keepMarks||this.options.keepAttributes)&&(t=(0,r.S0)({find:s,type:this.type,keepMarks:this.options.keepMarks,keepAttributes:this.options.keepAttributes,getAttributes:()=>this.editor.getAttributes(o.name),editor:this.editor})),[t]}})},7490:function(t,e,n){n.d(e,{X:function(){return i},Z:function(){return i}});var r=n(5865);const i=r.NB.create({name:"heading",addOptions:()=>({levels:[1,2,3,4,5,6],HTMLAttributes:{}}),content:"inline*",group:"block",defining:!0,addAttributes:()=>({level:{default:1,rendered:!1}}),parseHTML(){return this.options.levels.map((t=>({tag:`h${t}`,attrs:{level:t}})))},renderHTML({node:t,HTMLAttributes:e}){return[`h${this.options.levels.includes(t.attrs.level)?t.attrs.level:this.options.levels[0]}`,(0,r.P1)(this.options.HTMLAttributes,e),0]},addCommands(){return{setHeading:t=>({commands:e})=>!!this.options.levels.includes(t.level)&&e.setNode(this.name,t),toggleHeading:t=>({commands:e})=>!!this.options.levels.includes(t.level)&&e.toggleNode(this.name,"paragraph",t)}},addKeyboardShortcuts(){return this.options.levels.reduce(((t,e)=>({...t,[`Mod-Alt-${e}`]:()=>this.editor.commands.toggleHeading({level:e})})),{})},addInputRules(){return this.options.levels.map((t=>(0,r.zK)({find:new RegExp(`^(#{1,${t}})\\s$`),type:this.type,getAttributes:{level:t}})))}})},1575:function(t,e,n){n.d(e,{GS:function(){return a},ZP:function(){return a}});var r=n(5865);const i=r.NB.create({name:"listItem",addOptions:()=>({HTMLAttributes:{},bulletListTypeName:"bulletList",orderedListTypeName:"orderedList"}),content:"paragraph block*",defining:!0,parseHTML:()=>[{tag:"li"}],renderHTML({HTMLAttributes:t}){return["li",(0,r.P1)(this.options.HTMLAttributes,t),0]},addKeyboardShortcuts(){return{Enter:()=>this.editor.commands.splitListItem(this.name),Tab:()=>this.editor.commands.sinkListItem(this.name),"Shift-Tab":()=>this.editor.commands.liftListItem(this.name)}}}),o=r.vc.create({name:"textStyle",priority:101,addOptions:()=>({HTMLAttributes:{}}),parseHTML:()=>[{tag:"span",getAttrs:t=>!!t.hasAttribute("style")&&{}}],renderHTML({HTMLAttributes:t}){return["span",(0,r.P1)(this.options.HTMLAttributes,t),0]},addCommands(){return{removeEmptyTextStyle:()=>({state:t,commands:e})=>{const n=(0,r.Jo)(t,this.type);return!!Object.entries(n).some((([,t])=>!!t))||e.unsetMark(this.name)}}}}),s=/^(\d+)\.\s$/,a=r.NB.create({name:"orderedList",addOptions:()=>({itemTypeName:"listItem",HTMLAttributes:{},keepMarks:!1,keepAttributes:!1}),group:"block list",content(){return`${this.options.itemTypeName}+`},addAttributes:()=>({start:{default:1,parseHTML:t=>t.hasAttribute("start")?parseInt(t.getAttribute("start")||"",10):1},type:{default:void 0,parseHTML:t=>t.getAttribute("type")}}),parseHTML:()=>[{tag:"ol"}],renderHTML({HTMLAttributes:t}){const{start:e,...n}=t;return 1===e?["ol",(0,r.P1)(this.options.HTMLAttributes,n),0]:["ol",(0,r.P1)(this.options.HTMLAttributes,t),0]},addCommands(){return{toggleOrderedList:()=>({commands:t,chain:e})=>this.options.keepAttributes?e().toggleList(this.name,this.options.itemTypeName,this.options.keepMarks).updateAttributes(i.name,this.editor.getAttributes(o.name)).run():t.toggleList(this.name,this.options.itemTypeName,this.options.keepMarks)}},addKeyboardShortcuts(){return{"Mod-Shift-7":()=>this.editor.commands.toggleOrderedList()}},addInputRules(){let t=(0,r.S0)({find:s,type:this.type,getAttributes:t=>({start:+t[1]}),joinPredicate:(t,e)=>e.childCount+e.attrs.start===+t[1]});return(this.options.keepMarks||this.options.keepAttributes)&&(t=(0,r.S0)({find:s,type:this.type,keepMarks:this.options.keepMarks,keepAttributes:this.options.keepAttributes,getAttributes:t=>({start:+t[1],...this.editor.getAttributes(o.name)}),joinPredicate:(t,e)=>e.childCount+e.attrs.start===+t[1],editor:this.editor})),[t]}})},7662:function(t,e,n){n.d(e,{NM:function(){return Be},kg:function(){return Ce},jE:function(){return Fe}});var r=n(5865),i=n(2376);function o(t){if(null==t)return window;if("[object Window]"!==t.toString()){var e=t.ownerDocument;return e&&e.defaultView||window}return t}function s(t){return t instanceof o(t).Element||t instanceof Element}function a(t){return t instanceof o(t).HTMLElement||t instanceof HTMLElement}function l(t){return"undefined"!==typeof ShadowRoot&&(t instanceof o(t).ShadowRoot||t instanceof ShadowRoot)}var c=Math.max,u=Math.min,d=Math.round;function p(){var t=navigator.userAgentData;return null!=t&&t.brands&&Array.isArray(t.brands)?t.brands.map((function(t){return t.brand+"/"+t.version})).join(" "):navigator.userAgent}function h(){return!/^((?!chrome|android).)*safari/i.test(p())}function f(t,e,n){void 0===e&&(e=!1),void 0===n&&(n=!1);var r=t.getBoundingClientRect(),i=1,l=1;e&&a(t)&&(i=t.offsetWidth>0&&d(r.width)/t.offsetWidth||1,l=t.offsetHeight>0&&d(r.height)/t.offsetHeight||1);var c=(s(t)?o(t):window).visualViewport,u=!h()&&n,p=(r.left+(u&&c?c.offsetLeft:0))/i,f=(r.top+(u&&c?c.offsetTop:0))/l,m=r.width/i,g=r.height/l;return{width:m,height:g,top:f,right:p+m,bottom:f+g,left:p,x:p,y:f}}function m(t){var e=o(t);return{scrollLeft:e.pageXOffset,scrollTop:e.pageYOffset}}function g(t){return t?(t.nodeName||"").toLowerCase():null}function y(t){return((s(t)?t.ownerDocument:t.document)||window.document).documentElement}function v(t){return f(y(t)).left+m(t).scrollLeft}function b(t){return o(t).getComputedStyle(t)}function w(t){var e=b(t),n=e.overflow,r=e.overflowX,i=e.overflowY;return/auto|scroll|overlay|hidden/.test(n+i+r)}function x(t,e,n){void 0===n&&(n=!1);var r=a(e),i=a(e)&&function(t){var e=t.getBoundingClientRect(),n=d(e.width)/t.offsetWidth||1,r=d(e.height)/t.offsetHeight||1;return 1!==n||1!==r}(e),s=y(e),l=f(t,i,n),c={scrollLeft:0,scrollTop:0},u={x:0,y:0};return(r||!r&&!n)&&(("body"!==g(e)||w(s))&&(c=function(t){return t!==o(t)&&a(t)?{scrollLeft:(e=t).scrollLeft,scrollTop:e.scrollTop}:m(t);var e}(e)),a(e)?((u=f(e,!0)).x+=e.clientLeft,u.y+=e.clientTop):s&&(u.x=v(s))),{x:l.left+c.scrollLeft-u.x,y:l.top+c.scrollTop-u.y,width:l.width,height:l.height}}function k(t){var e=f(t),n=t.offsetWidth,r=t.offsetHeight;return Math.abs(e.width-n)<=1&&(n=e.width),Math.abs(e.height-r)<=1&&(r=e.height),{x:t.offsetLeft,y:t.offsetTop,width:n,height:r}}function S(t){return"html"===g(t)?t:t.assignedSlot||t.parentNode||(l(t)?t.host:null)||y(t)}function M(t){return["html","body","#document"].indexOf(g(t))>=0?t.ownerDocument.body:a(t)&&w(t)?t:M(S(t))}function C(t,e){var n;void 0===e&&(e=[]);var r=M(t),i=r===(null==(n=t.ownerDocument)?void 0:n.body),s=o(r),a=i?[s].concat(s.visualViewport||[],w(r)?r:[]):r,l=e.concat(a);return i?l:l.concat(C(S(a)))}function A(t){return["table","td","th"].indexOf(g(t))>=0}function T(t){return a(t)&&"fixed"!==b(t).position?t.offsetParent:null}function O(t){for(var e=o(t),n=T(t);n&&A(n)&&"static"===b(n).position;)n=T(n);return n&&("html"===g(n)||"body"===g(n)&&"static"===b(n).position)?e:n||function(t){var e=/firefox/i.test(p());if(/Trident/i.test(p())&&a(t)&&"fixed"===b(t).position)return null;var n=S(t);for(l(n)&&(n=n.host);a(n)&&["html","body"].indexOf(g(n))<0;){var r=b(n);if("none"!==r.transform||"none"!==r.perspective||"paint"===r.contain||-1!==["transform","perspective"].indexOf(r.willChange)||e&&"filter"===r.willChange||e&&r.filter&&"none"!==r.filter)return n;n=n.parentNode}return null}(t)||e}var E="top",I="bottom",N="right",R="left",D="auto",L=[E,I,N,R],F="start",H="end",_="viewport",B="popper",V=L.reduce((function(t,e){return t.concat([e+"-"+F,e+"-"+H])}),[]),z=[].concat(L,[D]).reduce((function(t,e){return t.concat([e,e+"-"+F,e+"-"+H])}),[]),$=["beforeRead","read","afterRead","beforeMain","main","afterMain","beforeWrite","write","afterWrite"];function j(t){var e=new Map,n=new Set,r=[];function i(t){n.add(t.name),[].concat(t.requires||[],t.requiresIfExists||[]).forEach((function(t){if(!n.has(t)){var r=e.get(t);r&&i(r)}})),r.push(t)}return t.forEach((function(t){e.set(t.name,t)})),t.forEach((function(t){n.has(t.name)||i(t)})),r}function P(t){var e;return function(){return e||(e=new Promise((function(n){Promise.resolve().then((function(){e=void 0,n(t())}))}))),e}}var J={placement:"bottom",modifiers:[],strategy:"absolute"};function q(){for(var t=arguments.length,e=new Array(t),n=0;n<t;n++)e[n]=arguments[n];return!e.some((function(t){return!(t&&"function"===typeof t.getBoundingClientRect)}))}function W(t){void 0===t&&(t={});var e=t,n=e.defaultModifiers,r=void 0===n?[]:n,i=e.defaultOptions,o=void 0===i?J:i;return function(t,e,n){void 0===n&&(n=o);var i={placement:"bottom",orderedModifiers:[],options:Object.assign({},J,o),modifiersData:{},elements:{reference:t,popper:e},attributes:{},styles:{}},a=[],l=!1,c={state:i,setOptions:function(n){var l="function"===typeof n?n(i.options):n;u(),i.options=Object.assign({},o,i.options,l),i.scrollParents={reference:s(t)?C(t):t.contextElement?C(t.contextElement):[],popper:C(e)};var d=function(t){var e=j(t);return $.reduce((function(t,n){return t.concat(e.filter((function(t){return t.phase===n})))}),[])}(function(t){var e=t.reduce((function(t,e){var n=t[e.name];return t[e.name]=n?Object.assign({},n,e,{options:Object.assign({},n.options,e.options),data:Object.assign({},n.data,e.data)}):e,t}),{});return Object.keys(e).map((function(t){return e[t]}))}([].concat(r,i.options.modifiers)));return i.orderedModifiers=d.filter((function(t){return t.enabled})),i.orderedModifiers.forEach((function(t){var e=t.name,n=t.options,r=void 0===n?{}:n,o=t.effect;if("function"===typeof o){var s=o({state:i,name:e,instance:c,options:r}),l=function(){};a.push(s||l)}})),c.update()},forceUpdate:function(){if(!l){var t=i.elements,e=t.reference,n=t.popper;if(q(e,n)){i.rects={reference:x(e,O(n),"fixed"===i.options.strategy),popper:k(n)},i.reset=!1,i.placement=i.options.placement,i.orderedModifiers.forEach((function(t){return i.modifiersData[t.name]=Object.assign({},t.data)}));for(var r=0;r<i.orderedModifiers.length;r++)if(!0!==i.reset){var o=i.orderedModifiers[r],s=o.fn,a=o.options,u=void 0===a?{}:a,d=o.name;"function"===typeof s&&(i=s({state:i,options:u,name:d,instance:c})||i)}else i.reset=!1,r=-1}}},update:P((function(){return new Promise((function(t){c.forceUpdate(),t(i)}))})),destroy:function(){u(),l=!0}};if(!q(t,e))return c;function u(){a.forEach((function(t){return t()})),a=[]}return c.setOptions(n).then((function(t){!l&&n.onFirstUpdate&&n.onFirstUpdate(t)})),c}}var Y={passive:!0};function U(t){return t.split("-")[0]}function K(t){return t.split("-")[1]}function G(t){return["top","bottom"].indexOf(t)>=0?"x":"y"}function X(t){var e,n=t.reference,r=t.element,i=t.placement,o=i?U(i):null,s=i?K(i):null,a=n.x+n.width/2-r.width/2,l=n.y+n.height/2-r.height/2;switch(o){case E:e={x:a,y:n.y-r.height};break;case I:e={x:a,y:n.y+n.height};break;case N:e={x:n.x+n.width,y:l};break;case R:e={x:n.x-r.width,y:l};break;default:e={x:n.x,y:n.y}}var c=o?G(o):null;if(null!=c){var u="y"===c?"height":"width";switch(s){case F:e[c]=e[c]-(n[u]/2-r[u]/2);break;case H:e[c]=e[c]+(n[u]/2-r[u]/2)}}return e}var Z={top:"auto",right:"auto",bottom:"auto",left:"auto"};function Q(t){var e,n=t.popper,r=t.popperRect,i=t.placement,s=t.variation,a=t.offsets,l=t.position,c=t.gpuAcceleration,u=t.adaptive,p=t.roundOffsets,h=t.isFixed,f=a.x,m=void 0===f?0:f,g=a.y,v=void 0===g?0:g,w="function"===typeof p?p({x:m,y:v}):{x:m,y:v};m=w.x,v=w.y;var x=a.hasOwnProperty("x"),k=a.hasOwnProperty("y"),S=R,M=E,C=window;if(u){var A=O(n),T="clientHeight",D="clientWidth";if(A===o(n)&&"static"!==b(A=y(n)).position&&"absolute"===l&&(T="scrollHeight",D="scrollWidth"),i===E||(i===R||i===N)&&s===H)M=I,v-=(h&&A===C&&C.visualViewport?C.visualViewport.height:A[T])-r.height,v*=c?1:-1;if(i===R||(i===E||i===I)&&s===H)S=N,m-=(h&&A===C&&C.visualViewport?C.visualViewport.width:A[D])-r.width,m*=c?1:-1}var L,F=Object.assign({position:l},u&&Z),_=!0===p?function(t,e){var n=t.x,r=t.y,i=e.devicePixelRatio||1;return{x:d(n*i)/i||0,y:d(r*i)/i||0}}({x:m,y:v},o(n)):{x:m,y:v};return m=_.x,v=_.y,c?Object.assign({},F,((L={})[M]=k?"0":"",L[S]=x?"0":"",L.transform=(C.devicePixelRatio||1)<=1?"translate("+m+"px, "+v+"px)":"translate3d("+m+"px, "+v+"px, 0)",L)):Object.assign({},F,((e={})[M]=k?v+"px":"",e[S]=x?m+"px":"",e.transform="",e))}var tt={name:"applyStyles",enabled:!0,phase:"write",fn:function(t){var e=t.state;Object.keys(e.elements).forEach((function(t){var n=e.styles[t]||{},r=e.attributes[t]||{},i=e.elements[t];a(i)&&g(i)&&(Object.assign(i.style,n),Object.keys(r).forEach((function(t){var e=r[t];!1===e?i.removeAttribute(t):i.setAttribute(t,!0===e?"":e)})))}))},effect:function(t){var e=t.state,n={popper:{position:e.options.strategy,left:"0",top:"0",margin:"0"},arrow:{position:"absolute"},reference:{}};return Object.assign(e.elements.popper.style,n.popper),e.styles=n,e.elements.arrow&&Object.assign(e.elements.arrow.style,n.arrow),function(){Object.keys(e.elements).forEach((function(t){var r=e.elements[t],i=e.attributes[t]||{},o=Object.keys(e.styles.hasOwnProperty(t)?e.styles[t]:n[t]).reduce((function(t,e){return t[e]="",t}),{});a(r)&&g(r)&&(Object.assign(r.style,o),Object.keys(i).forEach((function(t){r.removeAttribute(t)})))}))}},requires:["computeStyles"]};var et={name:"offset",enabled:!0,phase:"main",requires:["popperOffsets"],fn:function(t){var e=t.state,n=t.options,r=t.name,i=n.offset,o=void 0===i?[0,0]:i,s=z.reduce((function(t,n){return t[n]=function(t,e,n){var r=U(t),i=[R,E].indexOf(r)>=0?-1:1,o="function"===typeof n?n(Object.assign({},e,{placement:t})):n,s=o[0],a=o[1];return s=s||0,a=(a||0)*i,[R,N].indexOf(r)>=0?{x:a,y:s}:{x:s,y:a}}(n,e.rects,o),t}),{}),a=s[e.placement],l=a.x,c=a.y;null!=e.modifiersData.popperOffsets&&(e.modifiersData.popperOffsets.x+=l,e.modifiersData.popperOffsets.y+=c),e.modifiersData[r]=s}},nt={left:"right",right:"left",bottom:"top",top:"bottom"};function rt(t){return t.replace(/left|right|bottom|top/g,(function(t){return nt[t]}))}var it={start:"end",end:"start"};function ot(t){return t.replace(/start|end/g,(function(t){return it[t]}))}function st(t,e){var n=e.getRootNode&&e.getRootNode();if(t.contains(e))return!0;if(n&&l(n)){var r=e;do{if(r&&t.isSameNode(r))return!0;r=r.parentNode||r.host}while(r)}return!1}function at(t){return Object.assign({},t,{left:t.x,top:t.y,right:t.x+t.width,bottom:t.y+t.height})}function lt(t,e,n){return e===_?at(function(t,e){var n=o(t),r=y(t),i=n.visualViewport,s=r.clientWidth,a=r.clientHeight,l=0,c=0;if(i){s=i.width,a=i.height;var u=h();(u||!u&&"fixed"===e)&&(l=i.offsetLeft,c=i.offsetTop)}return{width:s,height:a,x:l+v(t),y:c}}(t,n)):s(e)?function(t,e){var n=f(t,!1,"fixed"===e);return n.top=n.top+t.clientTop,n.left=n.left+t.clientLeft,n.bottom=n.top+t.clientHeight,n.right=n.left+t.clientWidth,n.width=t.clientWidth,n.height=t.clientHeight,n.x=n.left,n.y=n.top,n}(e,n):at(function(t){var e,n=y(t),r=m(t),i=null==(e=t.ownerDocument)?void 0:e.body,o=c(n.scrollWidth,n.clientWidth,i?i.scrollWidth:0,i?i.clientWidth:0),s=c(n.scrollHeight,n.clientHeight,i?i.scrollHeight:0,i?i.clientHeight:0),a=-r.scrollLeft+v(t),l=-r.scrollTop;return"rtl"===b(i||n).direction&&(a+=c(n.clientWidth,i?i.clientWidth:0)-o),{width:o,height:s,x:a,y:l}}(y(t)))}function ct(t,e,n,r){var i="clippingParents"===e?function(t){var e=C(S(t)),n=["absolute","fixed"].indexOf(b(t).position)>=0&&a(t)?O(t):t;return s(n)?e.filter((function(t){return s(t)&&st(t,n)&&"body"!==g(t)})):[]}(t):[].concat(e),o=[].concat(i,[n]),l=o[0],d=o.reduce((function(e,n){var i=lt(t,n,r);return e.top=c(i.top,e.top),e.right=u(i.right,e.right),e.bottom=u(i.bottom,e.bottom),e.left=c(i.left,e.left),e}),lt(t,l,r));return d.width=d.right-d.left,d.height=d.bottom-d.top,d.x=d.left,d.y=d.top,d}function ut(t){return Object.assign({},{top:0,right:0,bottom:0,left:0},t)}function dt(t,e){return e.reduce((function(e,n){return e[n]=t,e}),{})}function pt(t,e){void 0===e&&(e={});var n=e,r=n.placement,i=void 0===r?t.placement:r,o=n.strategy,a=void 0===o?t.strategy:o,l=n.boundary,c=void 0===l?"clippingParents":l,u=n.rootBoundary,d=void 0===u?_:u,p=n.elementContext,h=void 0===p?B:p,m=n.altBoundary,g=void 0!==m&&m,v=n.padding,b=void 0===v?0:v,w=ut("number"!==typeof b?b:dt(b,L)),x=h===B?"reference":B,k=t.rects.popper,S=t.elements[g?x:h],M=ct(s(S)?S:S.contextElement||y(t.elements.popper),c,d,a),C=f(t.elements.reference),A=X({reference:C,element:k,strategy:"absolute",placement:i}),T=at(Object.assign({},k,A)),O=h===B?T:C,R={top:M.top-O.top+w.top,bottom:O.bottom-M.bottom+w.bottom,left:M.left-O.left+w.left,right:O.right-M.right+w.right},D=t.modifiersData.offset;if(h===B&&D){var F=D[i];Object.keys(R).forEach((function(t){var e=[N,I].indexOf(t)>=0?1:-1,n=[E,I].indexOf(t)>=0?"y":"x";R[t]+=F[n]*e}))}return R}function ht(t,e,n){return c(t,u(e,n))}var ft={name:"preventOverflow",enabled:!0,phase:"main",fn:function(t){var e=t.state,n=t.options,r=t.name,i=n.mainAxis,o=void 0===i||i,s=n.altAxis,a=void 0!==s&&s,l=n.boundary,d=n.rootBoundary,p=n.altBoundary,h=n.padding,f=n.tether,m=void 0===f||f,g=n.tetherOffset,y=void 0===g?0:g,v=pt(e,{boundary:l,rootBoundary:d,padding:h,altBoundary:p}),b=U(e.placement),w=K(e.placement),x=!w,S=G(b),M="x"===S?"y":"x",C=e.modifiersData.popperOffsets,A=e.rects.reference,T=e.rects.popper,D="function"===typeof y?y(Object.assign({},e.rects,{placement:e.placement})):y,L="number"===typeof D?{mainAxis:D,altAxis:D}:Object.assign({mainAxis:0,altAxis:0},D),H=e.modifiersData.offset?e.modifiersData.offset[e.placement]:null,_={x:0,y:0};if(C){if(o){var B,V="y"===S?E:R,z="y"===S?I:N,$="y"===S?"height":"width",j=C[S],P=j+v[V],J=j-v[z],q=m?-T[$]/2:0,W=w===F?A[$]:T[$],Y=w===F?-T[$]:-A[$],X=e.elements.arrow,Z=m&&X?k(X):{width:0,height:0},Q=e.modifiersData["arrow#persistent"]?e.modifiersData["arrow#persistent"].padding:{top:0,right:0,bottom:0,left:0},tt=Q[V],et=Q[z],nt=ht(0,A[$],Z[$]),rt=x?A[$]/2-q-nt-tt-L.mainAxis:W-nt-tt-L.mainAxis,it=x?-A[$]/2+q+nt+et+L.mainAxis:Y+nt+et+L.mainAxis,ot=e.elements.arrow&&O(e.elements.arrow),st=ot?"y"===S?ot.clientTop||0:ot.clientLeft||0:0,at=null!=(B=null==H?void 0:H[S])?B:0,lt=j+it-at,ct=ht(m?u(P,j+rt-at-st):P,j,m?c(J,lt):J);C[S]=ct,_[S]=ct-j}if(a){var ut,dt="x"===S?E:R,ft="x"===S?I:N,mt=C[M],gt="y"===M?"height":"width",yt=mt+v[dt],vt=mt-v[ft],bt=-1!==[E,R].indexOf(b),wt=null!=(ut=null==H?void 0:H[M])?ut:0,xt=bt?yt:mt-A[gt]-T[gt]-wt+L.altAxis,kt=bt?mt+A[gt]+T[gt]-wt-L.altAxis:vt,St=m&&bt?function(t,e,n){var r=ht(t,e,n);return r>n?n:r}(xt,mt,kt):ht(m?xt:yt,mt,m?kt:vt);C[M]=St,_[M]=St-mt}e.modifiersData[r]=_}},requiresIfExists:["offset"]};var mt={name:"arrow",enabled:!0,phase:"main",fn:function(t){var e,n=t.state,r=t.name,i=t.options,o=n.elements.arrow,s=n.modifiersData.popperOffsets,a=U(n.placement),l=G(a),c=[R,N].indexOf(a)>=0?"height":"width";if(o&&s){var u=function(t,e){return ut("number"!==typeof(t="function"===typeof t?t(Object.assign({},e.rects,{placement:e.placement})):t)?t:dt(t,L))}(i.padding,n),d=k(o),p="y"===l?E:R,h="y"===l?I:N,f=n.rects.reference[c]+n.rects.reference[l]-s[l]-n.rects.popper[c],m=s[l]-n.rects.reference[l],g=O(o),y=g?"y"===l?g.clientHeight||0:g.clientWidth||0:0,v=f/2-m/2,b=u[p],w=y-d[c]-u[h],x=y/2-d[c]/2+v,S=ht(b,x,w),M=l;n.modifiersData[r]=((e={})[M]=S,e.centerOffset=S-x,e)}},effect:function(t){var e=t.state,n=t.options.element,r=void 0===n?"[data-popper-arrow]":n;null!=r&&("string"!==typeof r||(r=e.elements.popper.querySelector(r)))&&st(e.elements.popper,r)&&(e.elements.arrow=r)},requires:["popperOffsets"],requiresIfExists:["preventOverflow"]};function gt(t,e,n){return void 0===n&&(n={x:0,y:0}),{top:t.top-e.height-n.y,right:t.right-e.width+n.x,bottom:t.bottom-e.height+n.y,left:t.left-e.width-n.x}}function yt(t){return[E,N,I,R].some((function(e){return t[e]>=0}))}var vt=W({defaultModifiers:[{name:"eventListeners",enabled:!0,phase:"write",fn:function(){},effect:function(t){var e=t.state,n=t.instance,r=t.options,i=r.scroll,s=void 0===i||i,a=r.resize,l=void 0===a||a,c=o(e.elements.popper),u=[].concat(e.scrollParents.reference,e.scrollParents.popper);return s&&u.forEach((function(t){t.addEventListener("scroll",n.update,Y)})),l&&c.addEventListener("resize",n.update,Y),function(){s&&u.forEach((function(t){t.removeEventListener("scroll",n.update,Y)})),l&&c.removeEventListener("resize",n.update,Y)}},data:{}},{name:"popperOffsets",enabled:!0,phase:"read",fn:function(t){var e=t.state,n=t.name;e.modifiersData[n]=X({reference:e.rects.reference,element:e.rects.popper,strategy:"absolute",placement:e.placement})},data:{}},{name:"computeStyles",enabled:!0,phase:"beforeWrite",fn:function(t){var e=t.state,n=t.options,r=n.gpuAcceleration,i=void 0===r||r,o=n.adaptive,s=void 0===o||o,a=n.roundOffsets,l=void 0===a||a,c={placement:U(e.placement),variation:K(e.placement),popper:e.elements.popper,popperRect:e.rects.popper,gpuAcceleration:i,isFixed:"fixed"===e.options.strategy};null!=e.modifiersData.popperOffsets&&(e.styles.popper=Object.assign({},e.styles.popper,Q(Object.assign({},c,{offsets:e.modifiersData.popperOffsets,position:e.options.strategy,adaptive:s,roundOffsets:l})))),null!=e.modifiersData.arrow&&(e.styles.arrow=Object.assign({},e.styles.arrow,Q(Object.assign({},c,{offsets:e.modifiersData.arrow,position:"absolute",adaptive:!1,roundOffsets:l})))),e.attributes.popper=Object.assign({},e.attributes.popper,{"data-popper-placement":e.placement})},data:{}},tt,et,{name:"flip",enabled:!0,phase:"main",fn:function(t){var e=t.state,n=t.options,r=t.name;if(!e.modifiersData[r]._skip){for(var i=n.mainAxis,o=void 0===i||i,s=n.altAxis,a=void 0===s||s,l=n.fallbackPlacements,c=n.padding,u=n.boundary,d=n.rootBoundary,p=n.altBoundary,h=n.flipVariations,f=void 0===h||h,m=n.allowedAutoPlacements,g=e.options.placement,y=U(g),v=l||(y===g||!f?[rt(g)]:function(t){if(U(t)===D)return[];var e=rt(t);return[ot(t),e,ot(e)]}(g)),b=[g].concat(v).reduce((function(t,n){return t.concat(U(n)===D?function(t,e){void 0===e&&(e={});var n=e,r=n.placement,i=n.boundary,o=n.rootBoundary,s=n.padding,a=n.flipVariations,l=n.allowedAutoPlacements,c=void 0===l?z:l,u=K(r),d=u?a?V:V.filter((function(t){return K(t)===u})):L,p=d.filter((function(t){return c.indexOf(t)>=0}));0===p.length&&(p=d);var h=p.reduce((function(e,n){return e[n]=pt(t,{placement:n,boundary:i,rootBoundary:o,padding:s})[U(n)],e}),{});return Object.keys(h).sort((function(t,e){return h[t]-h[e]}))}(e,{placement:n,boundary:u,rootBoundary:d,padding:c,flipVariations:f,allowedAutoPlacements:m}):n)}),[]),w=e.rects.reference,x=e.rects.popper,k=new Map,S=!0,M=b[0],C=0;C<b.length;C++){var A=b[C],T=U(A),O=K(A)===F,H=[E,I].indexOf(T)>=0,_=H?"width":"height",B=pt(e,{placement:A,boundary:u,rootBoundary:d,altBoundary:p,padding:c}),$=H?O?N:R:O?I:E;w[_]>x[_]&&($=rt($));var j=rt($),P=[];if(o&&P.push(B[T]<=0),a&&P.push(B[$]<=0,B[j]<=0),P.every((function(t){return t}))){M=A,S=!1;break}k.set(A,P)}if(S)for(var J=function(t){var e=b.find((function(e){var n=k.get(e);if(n)return n.slice(0,t).every((function(t){return t}))}));if(e)return M=e,"break"},q=f?3:1;q>0;q--){if("break"===J(q))break}e.placement!==M&&(e.modifiersData[r]._skip=!0,e.placement=M,e.reset=!0)}},requiresIfExists:["offset"],data:{_skip:!1}},ft,mt,{name:"hide",enabled:!0,phase:"main",requiresIfExists:["preventOverflow"],fn:function(t){var e=t.state,n=t.name,r=e.rects.reference,i=e.rects.popper,o=e.modifiersData.preventOverflow,s=pt(e,{elementContext:"reference"}),a=pt(e,{altBoundary:!0}),l=gt(s,r),c=gt(a,i,o),u=yt(l),d=yt(c);e.modifiersData[n]={referenceClippingOffsets:l,popperEscapeOffsets:c,isReferenceHidden:u,hasPopperEscaped:d},e.attributes.popper=Object.assign({},e.attributes.popper,{"data-popper-reference-hidden":u,"data-popper-escaped":d})}}]}),bt="tippy-content",wt="tippy-backdrop",xt="tippy-arrow",kt="tippy-svg-arrow",St={passive:!0,capture:!0},Mt=function(){return document.body};function Ct(t,e,n){if(Array.isArray(t)){var r=t[e];return null==r?Array.isArray(n)?n[e]:n:r}return t}function At(t,e){var n={}.toString.call(t);return 0===n.indexOf("[object")&&n.indexOf(e+"]")>-1}function Tt(t,e){return"function"===typeof t?t.apply(void 0,e):t}function Ot(t,e){return 0===e?t:function(r){clearTimeout(n),n=setTimeout((function(){t(r)}),e)};var n}function Et(t){return[].concat(t)}function It(t,e){-1===t.indexOf(e)&&t.push(e)}function Nt(t){return t.split("-")[0]}function Rt(t){return[].slice.call(t)}function Dt(t){return Object.keys(t).reduce((function(e,n){return void 0!==t[n]&&(e[n]=t[n]),e}),{})}function Lt(){return document.createElement("div")}function Ft(t){return["Element","Fragment"].some((function(e){return At(t,e)}))}function Ht(t){return At(t,"MouseEvent")}function _t(t){return!(!t||!t._tippy||t._tippy.reference!==t)}function Bt(t){return Ft(t)?[t]:function(t){return At(t,"NodeList")}(t)?Rt(t):Array.isArray(t)?t:Rt(document.querySelectorAll(t))}function Vt(t,e){t.forEach((function(t){t&&(t.style.transitionDuration=e+"ms")}))}function zt(t,e){t.forEach((function(t){t&&t.setAttribute("data-state",e)}))}function $t(t){var e,n=Et(t)[0];return null!=n&&null!=(e=n.ownerDocument)&&e.body?n.ownerDocument:document}function jt(t,e,n){var r=e+"EventListener";["transitionend","webkitTransitionEnd"].forEach((function(e){t[r](e,n)}))}function Pt(t,e){for(var n=e;n;){var r;if(t.contains(n))return!0;n=null==n.getRootNode||null==(r=n.getRootNode())?void 0:r.host}return!1}var Jt={isTouch:!1},qt=0;function Wt(){Jt.isTouch||(Jt.isTouch=!0,window.performance&&document.addEventListener("mousemove",Yt))}function Yt(){var t=performance.now();t-qt<20&&(Jt.isTouch=!1,document.removeEventListener("mousemove",Yt)),qt=t}function Ut(){var t=document.activeElement;if(_t(t)){var e=t._tippy;t.blur&&!e.state.isVisible&&t.blur()}}var Kt=!!("undefined"!==typeof window&&"undefined"!==typeof document)&&!!window.msCrypto;var Gt={animateFill:!1,followCursor:!1,inlinePositioning:!1,sticky:!1},Xt=Object.assign({appendTo:Mt,aria:{content:"auto",expanded:"auto"},delay:0,duration:[300,250],getReferenceClientRect:null,hideOnClick:!0,ignoreAttributes:!1,interactive:!1,interactiveBorder:2,interactiveDebounce:0,moveTransition:"",offset:[0,10],onAfterUpdate:function(){},onBeforeUpdate:function(){},onCreate:function(){},onDestroy:function(){},onHidden:function(){},onHide:function(){},onMount:function(){},onShow:function(){},onShown:function(){},onTrigger:function(){},onUntrigger:function(){},onClickOutside:function(){},placement:"top",plugins:[],popperOptions:{},render:null,showOnCreate:!1,touch:!0,trigger:"mouseenter focus",triggerTarget:null},Gt,{allowHTML:!1,animation:"fade",arrow:!0,content:"",inertia:!1,maxWidth:350,role:"tooltip",theme:"",zIndex:9999}),Zt=Object.keys(Xt);function Qt(t){var e=(t.plugins||[]).reduce((function(e,n){var r,i=n.name,o=n.defaultValue;i&&(e[i]=void 0!==t[i]?t[i]:null!=(r=Xt[i])?r:o);return e}),{});return Object.assign({},t,e)}function te(t,e){var n=Object.assign({},e,{content:Tt(e.content,[t])},e.ignoreAttributes?{}:function(t,e){return(e?Object.keys(Qt(Object.assign({},Xt,{plugins:e}))):Zt).reduce((function(e,n){var r=(t.getAttribute("data-tippy-"+n)||"").trim();if(!r)return e;if("content"===n)e[n]=r;else try{e[n]=JSON.parse(r)}catch(i){e[n]=r}return e}),{})}(t,e.plugins));return n.aria=Object.assign({},Xt.aria,n.aria),n.aria={expanded:"auto"===n.aria.expanded?e.interactive:n.aria.expanded,content:"auto"===n.aria.content?e.interactive?null:"describedby":n.aria.content},n}function ee(t,e){t.innerHTML=e}function ne(t){var e=Lt();return!0===t?e.className=xt:(e.className=kt,Ft(t)?e.appendChild(t):ee(e,t)),e}function re(t,e){Ft(e.content)?(ee(t,""),t.appendChild(e.content)):"function"!==typeof e.content&&(e.allowHTML?ee(t,e.content):t.textContent=e.content)}function ie(t){var e=t.firstElementChild,n=Rt(e.children);return{box:e,content:n.find((function(t){return t.classList.contains(bt)})),arrow:n.find((function(t){return t.classList.contains(xt)||t.classList.contains(kt)})),backdrop:n.find((function(t){return t.classList.contains(wt)}))}}function oe(t){var e=Lt(),n=Lt();n.className="tippy-box",n.setAttribute("data-state","hidden"),n.setAttribute("tabindex","-1");var r=Lt();function i(n,r){var i=ie(e),o=i.box,s=i.content,a=i.arrow;r.theme?o.setAttribute("data-theme",r.theme):o.removeAttribute("data-theme"),"string"===typeof r.animation?o.setAttribute("data-animation",r.animation):o.removeAttribute("data-animation"),r.inertia?o.setAttribute("data-inertia",""):o.removeAttribute("data-inertia"),o.style.maxWidth="number"===typeof r.maxWidth?r.maxWidth+"px":r.maxWidth,r.role?o.setAttribute("role",r.role):o.removeAttribute("role"),n.content===r.content&&n.allowHTML===r.allowHTML||re(s,t.props),r.arrow?a?n.arrow!==r.arrow&&(o.removeChild(a),o.appendChild(ne(r.arrow))):o.appendChild(ne(r.arrow)):a&&o.removeChild(a)}return r.className=bt,r.setAttribute("data-state","hidden"),re(r,t.props),e.appendChild(n),n.appendChild(r),i(t.props,t.props),{popper:e,onUpdate:i}}oe.$$tippy=!0;var se=1,ae=[],le=[];function ce(t,e){var n,r,i,o,s,a,l,c,u=te(t,Object.assign({},Xt,Qt(Dt(e)))),d=!1,p=!1,h=!1,f=!1,m=[],g=Ot(Y,u.interactiveDebounce),y=se++,v=(c=u.plugins).filter((function(t,e){return c.indexOf(t)===e})),b={id:y,reference:t,popper:Lt(),popperInstance:null,props:u,state:{isEnabled:!0,isVisible:!1,isDestroyed:!1,isMounted:!1,isShown:!1},plugins:v,clearDelayTimeouts:function(){clearTimeout(n),clearTimeout(r),cancelAnimationFrame(i)},setProps:function(e){0;if(b.state.isDestroyed)return;D("onBeforeUpdate",[b,e]),q();var n=b.props,r=te(t,Object.assign({},n,Dt(e),{ignoreAttributes:!0}));b.props=r,J(),n.interactiveDebounce!==r.interactiveDebounce&&(H(),g=Ot(Y,r.interactiveDebounce));n.triggerTarget&&!r.triggerTarget?Et(n.triggerTarget).forEach((function(t){t.removeAttribute("aria-expanded")})):r.triggerTarget&&t.removeAttribute("aria-expanded");F(),R(),k&&k(n,r);b.popperInstance&&(X(),Q().forEach((function(t){requestAnimationFrame(t._tippy.popperInstance.forceUpdate)})));D("onAfterUpdate",[b,e])},setContent:function(t){b.setProps({content:t})},show:function(){0;var t=b.state.isVisible,e=b.state.isDestroyed,n=!b.state.isEnabled,r=Jt.isTouch&&!b.props.touch,i=Ct(b.props.duration,0,Xt.duration);if(t||e||n||r)return;if(O().hasAttribute("disabled"))return;if(D("onShow",[b],!1),!1===b.props.onShow(b))return;b.state.isVisible=!0,T()&&(x.style.visibility="visible");R(),z(),b.state.isMounted||(x.style.transition="none");if(T()){var o=I(),s=o.box,l=o.content;Vt([s,l],0)}a=function(){var t;if(b.state.isVisible&&!f){if(f=!0,x.offsetHeight,x.style.transition=b.props.moveTransition,T()&&b.props.animation){var e=I(),n=e.box,r=e.content;Vt([n,r],i),zt([n,r],"visible")}L(),F(),It(le,b),null==(t=b.popperInstance)||t.forceUpdate(),D("onMount",[b]),b.props.animation&&T()&&function(t,e){j(t,e)}(i,(function(){b.state.isShown=!0,D("onShown",[b])}))}},function(){var t,e=b.props.appendTo,n=O();t=b.props.interactive&&e===Mt||"parent"===e?n.parentNode:Tt(e,[n]);t.contains(x)||t.appendChild(x);b.state.isMounted=!0,X(),!1}()},hide:function(){0;var t=!b.state.isVisible,e=b.state.isDestroyed,n=!b.state.isEnabled,r=Ct(b.props.duration,1,Xt.duration);if(t||e||n)return;if(D("onHide",[b],!1),!1===b.props.onHide(b))return;b.state.isVisible=!1,b.state.isShown=!1,f=!1,d=!1,T()&&(x.style.visibility="hidden");if(H(),$(),R(!0),T()){var i=I(),o=i.box,s=i.content;b.props.animation&&(Vt([o,s],r),zt([o,s],"hidden"))}L(),F(),b.props.animation?T()&&function(t,e){j(t,(function(){!b.state.isVisible&&x.parentNode&&x.parentNode.contains(x)&&e()}))}(r,b.unmount):b.unmount()},hideWithInteractivity:function(t){0;E().addEventListener("mousemove",g),It(ae,g),g(t)},enable:function(){b.state.isEnabled=!0},disable:function(){b.hide(),b.state.isEnabled=!1},unmount:function(){0;b.state.isVisible&&b.hide();if(!b.state.isMounted)return;Z(),Q().forEach((function(t){t._tippy.unmount()})),x.parentNode&&x.parentNode.removeChild(x);le=le.filter((function(t){return t!==b})),b.state.isMounted=!1,D("onHidden",[b])},destroy:function(){0;if(b.state.isDestroyed)return;b.clearDelayTimeouts(),b.unmount(),q(),delete t._tippy,b.state.isDestroyed=!0,D("onDestroy",[b])}};if(!u.render)return b;var w=u.render(b),x=w.popper,k=w.onUpdate;x.setAttribute("data-tippy-root",""),x.id="tippy-"+b.id,b.popper=x,t._tippy=b,x._tippy=b;var S=v.map((function(t){return t.fn(b)})),M=t.hasAttribute("aria-expanded");return J(),F(),R(),D("onCreate",[b]),u.showOnCreate&&tt(),x.addEventListener("mouseenter",(function(){b.props.interactive&&b.state.isVisible&&b.clearDelayTimeouts()})),x.addEventListener("mouseleave",(function(){b.props.interactive&&b.props.trigger.indexOf("mouseenter")>=0&&E().addEventListener("mousemove",g)})),b;function C(){var t=b.props.touch;return Array.isArray(t)?t:[t,0]}function A(){return"hold"===C()[0]}function T(){var t;return!(null==(t=b.props.render)||!t.$$tippy)}function O(){return l||t}function E(){var t=O().parentNode;return t?$t(t):document}function I(){return ie(x)}function N(t){return b.state.isMounted&&!b.state.isVisible||Jt.isTouch||o&&"focus"===o.type?0:Ct(b.props.delay,t?0:1,Xt.delay)}function R(t){void 0===t&&(t=!1),x.style.pointerEvents=b.props.interactive&&!t?"":"none",x.style.zIndex=""+b.props.zIndex}function D(t,e,n){var r;(void 0===n&&(n=!0),S.forEach((function(n){n[t]&&n[t].apply(n,e)})),n)&&(r=b.props)[t].apply(r,e)}function L(){var e=b.props.aria;if(e.content){var n="aria-"+e.content,r=x.id;Et(b.props.triggerTarget||t).forEach((function(t){var e=t.getAttribute(n);if(b.state.isVisible)t.setAttribute(n,e?e+" "+r:r);else{var i=e&&e.replace(r,"").trim();i?t.setAttribute(n,i):t.removeAttribute(n)}}))}}function F(){!M&&b.props.aria.expanded&&Et(b.props.triggerTarget||t).forEach((function(t){b.props.interactive?t.setAttribute("aria-expanded",b.state.isVisible&&t===O()?"true":"false"):t.removeAttribute("aria-expanded")}))}function H(){E().removeEventListener("mousemove",g),ae=ae.filter((function(t){return t!==g}))}function _(e){if(!Jt.isTouch||!h&&"mousedown"!==e.type){var n=e.composedPath&&e.composedPath()[0]||e.target;if(!b.props.interactive||!Pt(x,n)){if(Et(b.props.triggerTarget||t).some((function(t){return Pt(t,n)}))){if(Jt.isTouch)return;if(b.state.isVisible&&b.props.trigger.indexOf("click")>=0)return}else D("onClickOutside",[b,e]);!0===b.props.hideOnClick&&(b.clearDelayTimeouts(),b.hide(),p=!0,setTimeout((function(){p=!1})),b.state.isMounted||$())}}}function B(){h=!0}function V(){h=!1}function z(){var t=E();t.addEventListener("mousedown",_,!0),t.addEventListener("touchend",_,St),t.addEventListener("touchstart",V,St),t.addEventListener("touchmove",B,St)}function $(){var t=E();t.removeEventListener("mousedown",_,!0),t.removeEventListener("touchend",_,St),t.removeEventListener("touchstart",V,St),t.removeEventListener("touchmove",B,St)}function j(t,e){var n=I().box;function r(t){t.target===n&&(jt(n,"remove",r),e())}if(0===t)return e();jt(n,"remove",s),jt(n,"add",r),s=r}function P(e,n,r){void 0===r&&(r=!1),Et(b.props.triggerTarget||t).forEach((function(t){t.addEventListener(e,n,r),m.push({node:t,eventType:e,handler:n,options:r})}))}function J(){var t;A()&&(P("touchstart",W,{passive:!0}),P("touchend",U,{passive:!0})),(t=b.props.trigger,t.split(/\s+/).filter(Boolean)).forEach((function(t){if("manual"!==t)switch(P(t,W),t){case"mouseenter":P("mouseleave",U);break;case"focus":P(Kt?"focusout":"blur",K);break;case"focusin":P("focusout",K)}}))}function q(){m.forEach((function(t){var e=t.node,n=t.eventType,r=t.handler,i=t.options;e.removeEventListener(n,r,i)})),m=[]}function W(t){var e,n=!1;if(b.state.isEnabled&&!G(t)&&!p){var r="focus"===(null==(e=o)?void 0:e.type);o=t,l=t.currentTarget,F(),!b.state.isVisible&&Ht(t)&&ae.forEach((function(e){return e(t)})),"click"===t.type&&(b.props.trigger.indexOf("mouseenter")<0||d)&&!1!==b.props.hideOnClick&&b.state.isVisible?n=!0:tt(t),"click"===t.type&&(d=!n),n&&!r&&et(t)}}function Y(t){var e=t.target,n=O().contains(e)||x.contains(e);if("mousemove"!==t.type||!n){var r=Q().concat(x).map((function(t){var e,n=null==(e=t._tippy.popperInstance)?void 0:e.state;return n?{popperRect:t.getBoundingClientRect(),popperState:n,props:u}:null})).filter(Boolean);(function(t,e){var n=e.clientX,r=e.clientY;return t.every((function(t){var e=t.popperRect,i=t.popperState,o=t.props.interactiveBorder,s=Nt(i.placement),a=i.modifiersData.offset;if(!a)return!0;var l="bottom"===s?a.top.y:0,c="top"===s?a.bottom.y:0,u="right"===s?a.left.x:0,d="left"===s?a.right.x:0,p=e.top-r+l>o,h=r-e.bottom-c>o,f=e.left-n+u>o,m=n-e.right-d>o;return p||h||f||m}))})(r,t)&&(H(),et(t))}}function U(t){G(t)||b.props.trigger.indexOf("click")>=0&&d||(b.props.interactive?b.hideWithInteractivity(t):et(t))}function K(t){b.props.trigger.indexOf("focusin")<0&&t.target!==O()||b.props.interactive&&t.relatedTarget&&x.contains(t.relatedTarget)||et(t)}function G(t){return!!Jt.isTouch&&A()!==t.type.indexOf("touch")>=0}function X(){Z();var e=b.props,n=e.popperOptions,r=e.placement,i=e.offset,o=e.getReferenceClientRect,s=e.moveTransition,l=T()?ie(x).arrow:null,c=o?{getBoundingClientRect:o,contextElement:o.contextElement||O()}:t,u={name:"$$tippy",enabled:!0,phase:"beforeWrite",requires:["computeStyles"],fn:function(t){var e=t.state;if(T()){var n=I().box;["placement","reference-hidden","escaped"].forEach((function(t){"placement"===t?n.setAttribute("data-placement",e.placement):e.attributes.popper["data-popper-"+t]?n.setAttribute("data-"+t,""):n.removeAttribute("data-"+t)})),e.attributes.popper={}}}},d=[{name:"offset",options:{offset:i}},{name:"preventOverflow",options:{padding:{top:2,bottom:2,left:5,right:5}}},{name:"flip",options:{padding:5}},{name:"computeStyles",options:{adaptive:!s}},u];T()&&l&&d.push({name:"arrow",options:{element:l,padding:3}}),d.push.apply(d,(null==n?void 0:n.modifiers)||[]),b.popperInstance=vt(c,x,Object.assign({},n,{placement:r,onFirstUpdate:a,modifiers:d}))}function Z(){b.popperInstance&&(b.popperInstance.destroy(),b.popperInstance=null)}function Q(){return Rt(x.querySelectorAll("[data-tippy-root]"))}function tt(t){b.clearDelayTimeouts(),t&&D("onTrigger",[b,t]),z();var e=N(!0),r=C(),i=r[0],o=r[1];Jt.isTouch&&"hold"===i&&o&&(e=o),e?n=setTimeout((function(){b.show()}),e):b.show()}function et(t){if(b.clearDelayTimeouts(),D("onUntrigger",[b,t]),b.state.isVisible){if(!(b.props.trigger.indexOf("mouseenter")>=0&&b.props.trigger.indexOf("click")>=0&&["mouseleave","mousemove"].indexOf(t.type)>=0&&d)){var e=N(!1);e?r=setTimeout((function(){b.state.isVisible&&b.hide()}),e):i=requestAnimationFrame((function(){b.hide()}))}}else $()}}function ue(t,e){void 0===e&&(e={});var n=Xt.plugins.concat(e.plugins||[]);document.addEventListener("touchstart",Wt,St),window.addEventListener("blur",Ut);var r=Object.assign({},e,{plugins:n}),i=Bt(t).reduce((function(t,e){var n=e&&ce(e,r);return n&&t.push(n),t}),[]);return Ft(t)?i[0]:i}ue.defaultProps=Xt,ue.setDefaultProps=function(t){Object.keys(t).forEach((function(e){Xt[e]=t[e]}))},ue.currentInput=Jt;Object.assign({},tt,{effect:function(t){var e=t.state,n={popper:{position:e.options.strategy,left:"0",top:"0",margin:"0"},arrow:{position:"absolute"},reference:{}};Object.assign(e.elements.popper.style,n.popper),e.styles=n,e.elements.arrow&&Object.assign(e.elements.arrow.style,n.arrow)}});ue.setDefaultProps({render:oe});var de=ue;class pe{constructor({editor:t,element:e,view:n,tippyOptions:i={},updateDelay:o=250,shouldShow:s}){this.preventHide=!1,this.shouldShow=({view:t,state:e,from:n,to:i})=>{const{doc:o,selection:s}=e,{empty:a}=s,l=!o.textBetween(n,i).length&&(0,r.xh)(e.selection),c=this.element.contains(document.activeElement);return!(!t.hasFocus()&&!c||a||l||!this.editor.isEditable)},this.mousedownHandler=()=>{this.preventHide=!0},this.dragstartHandler=()=>{this.hide()},this.focusHandler=()=>{setTimeout((()=>this.update(this.editor.view)))},this.blurHandler=({event:t})=>{var e;this.preventHide?this.preventHide=!1:(null===t||void 0===t?void 0:t.relatedTarget)&&(null===(e=this.element.parentNode)||void 0===e?void 0:e.contains(t.relatedTarget))||this.hide()},this.tippyBlurHandler=t=>{this.blurHandler({event:t})},this.handleDebouncedUpdate=(t,e)=>{const n=!(null===e||void 0===e?void 0:e.selection.eq(t.state.selection)),r=!(null===e||void 0===e?void 0:e.doc.eq(t.state.doc));(n||r)&&(this.updateDebounceTimer&&clearTimeout(this.updateDebounceTimer),this.updateDebounceTimer=window.setTimeout((()=>{this.updateHandler(t,n,r,e)}),this.updateDelay))},this.updateHandler=(t,e,n,i)=>{var o,s,a;const{state:l,composing:c}=t,{selection:u}=l;if(c||!e&&!n)return;this.createTooltip();const{ranges:d}=u,p=Math.min(...d.map((t=>t.$from.pos))),h=Math.max(...d.map((t=>t.$to.pos)));(null===(o=this.shouldShow)||void 0===o?void 0:o.call(this,{editor:this.editor,view:t,state:l,oldState:i,from:p,to:h}))?(null===(s=this.tippy)||void 0===s||s.setProps({getReferenceClientRect:(null===(a=this.tippyOptions)||void 0===a?void 0:a.getReferenceClientRect)||(()=>{if((0,r.EG)(l.selection)){let e=t.nodeDOM(p);const n=e.dataset.nodeViewWrapper?e:e.querySelector("[data-node-view-wrapper]");if(n&&(e=n.firstChild),e)return e.getBoundingClientRect()}return(0,r.pr)(t,p,h)})}),this.show()):this.hide()},this.editor=t,this.element=e,this.view=n,this.updateDelay=o,s&&(this.shouldShow=s),this.element.addEventListener("mousedown",this.mousedownHandler,{capture:!0}),this.view.dom.addEventListener("dragstart",this.dragstartHandler),this.editor.on("focus",this.focusHandler),this.editor.on("blur",this.blurHandler),this.tippyOptions=i,this.element.remove(),this.element.style.visibility="visible"}createTooltip(){const{element:t}=this.editor.options,e=!!t.parentElement;!this.tippy&&e&&(this.tippy=de(t,{duration:0,getReferenceClientRect:null,content:this.element,interactive:!0,trigger:"manual",placement:"top",hideOnClick:"toggle",...this.tippyOptions}),this.tippy.popper.firstChild&&this.tippy.popper.firstChild.addEventListener("blur",this.tippyBlurHandler))}update(t,e){const{state:n}=t,r=n.selection.from!==n.selection.to;if(this.updateDelay>0&&r)return void this.handleDebouncedUpdate(t,e);const i=!(null===e||void 0===e?void 0:e.selection.eq(t.state.selection)),o=!(null===e||void 0===e?void 0:e.doc.eq(t.state.doc));this.updateHandler(t,i,o,e)}show(){var t;null===(t=this.tippy)||void 0===t||t.show()}hide(){var t;null===(t=this.tippy)||void 0===t||t.hide()}destroy(){var t,e;(null===(t=this.tippy)||void 0===t?void 0:t.popper.firstChild)&&this.tippy.popper.firstChild.removeEventListener("blur",this.tippyBlurHandler),null===(e=this.tippy)||void 0===e||e.destroy(),this.element.removeEventListener("mousedown",this.mousedownHandler,{capture:!0}),this.view.dom.removeEventListener("dragstart",this.dragstartHandler),this.editor.off("focus",this.focusHandler),this.editor.off("blur",this.blurHandler)}}const he=t=>new i.Sy({key:"string"===typeof t.pluginKey?new i.H$(t.pluginKey):t.pluginKey,view:e=>new pe({view:e,...t})});r.hj.create({name:"bubbleMenu",addOptions:()=>({element:null,tippyOptions:{},pluginKey:"bubbleMenu",updateDelay:void 0,shouldShow:null}),addProseMirrorPlugins(){return this.options.element?[he({pluginKey:this.options.pluginKey,editor:this.editor,element:this.options.element,tippyOptions:this.options.tippyOptions,updateDelay:this.options.updateDelay,shouldShow:this.options.shouldShow})]:[]}});var fe=n(7294),me=n(3935);function ge(t){return t&&t.__esModule&&Object.prototype.hasOwnProperty.call(t,"default")?t.default:t}var ye,ve={exports:{}},be={};ve.exports=function(){if(ye)return be;ye=1;var t=fe,e="function"===typeof Object.is?Object.is:function(t,e){return t===e&&(0!==t||1/t===1/e)||t!==t&&e!==e},n=t.useState,r=t.useEffect,i=t.useLayoutEffect,o=t.useDebugValue;function s(t){var n=t.getSnapshot;t=t.value;try{var r=n();return!e(t,r)}catch(i){return!0}}var a="undefined"===typeof window||"undefined"===typeof window.document||"undefined"===typeof window.document.createElement?function(t,e){return e()}:function(t,e){var a=e(),l=n({inst:{value:a,getSnapshot:e}}),c=l[0].inst,u=l[1];return i((function(){c.value=a,c.getSnapshot=e,s(c)&&u({inst:c})}),[t,a,e]),r((function(){return s(c)&&u({inst:c}),t((function(){s(c)&&u({inst:c})}))}),[t]),o(a),a};return be.useSyncExternalStore=void 0!==t.useSyncExternalStore?t.useSyncExternalStore:a,be}();var we=ve.exports;const xe=(...t)=>e=>{t.forEach((t=>{"function"===typeof t?t(e):t&&(t.current=e)}))},ke=({contentComponent:t})=>{const e=we.useSyncExternalStore(t.subscribe,t.getSnapshot,t.getServerSnapshot);return fe.createElement(fe.Fragment,null,Object.values(e))};class Se extends fe.Component{constructor(t){var e;super(t),this.editorContentRef=fe.createRef(),this.initialized=!1,this.state={hasContentComponentInitialized:Boolean(null===(e=t.editor)||void 0===e?void 0:e.contentComponent)}}componentDidMount(){this.init()}componentDidUpdate(){this.init()}init(){const t=this.props.editor;if(t&&!t.isDestroyed&&t.options.element){if(t.contentComponent)return;const e=this.editorContentRef.current;e.append(...t.options.element.childNodes),t.setOptions({element:e}),t.contentComponent=function(){const t=new Set;let e={};return{subscribe:e=>(t.add(e),()=>{t.delete(e)}),getSnapshot:()=>e,getServerSnapshot:()=>e,setRenderer(n,r){e={...e,[n]:me.createPortal(r.reactElement,r.element,n)},t.forEach((t=>t()))},removeRenderer(n){const r={...e};delete r[n],e=r,t.forEach((t=>t()))}}}(),this.state.hasContentComponentInitialized||(this.unsubscribeToContentComponent=t.contentComponent.subscribe((()=>{this.setState((t=>t.hasContentComponentInitialized?t:{hasContentComponentInitialized:!0})),this.unsubscribeToContentComponent&&this.unsubscribeToContentComponent()}))),t.createNodeViews(),this.initialized=!0}}componentWillUnmount(){const t=this.props.editor;if(!t)return;if(this.initialized=!1,t.isDestroyed||t.view.setProps({nodeViews:{}}),this.unsubscribeToContentComponent&&this.unsubscribeToContentComponent(),t.contentComponent=null,!t.options.element.firstChild)return;const e=document.createElement("div");e.append(...t.options.element.childNodes),t.setOptions({element:e})}render(){const{editor:t,innerRef:e,...n}=this.props;return fe.createElement(fe.Fragment,null,fe.createElement("div",{ref:xe(e,this.editorContentRef),...n}),(null===t||void 0===t?void 0:t.contentComponent)&&fe.createElement(ke,{contentComponent:t.contentComponent}))}}const Me=(0,fe.forwardRef)(((t,e)=>{const n=fe.useMemo((()=>Math.floor(4294967295*Math.random()).toString()),[t.editor]);return fe.createElement(Se,{key:n,innerRef:e,...t})})),Ce=fe.memo(Me);var Ae,Te=ge((function t(e,n){if(e===n)return!0;if(e&&n&&"object"==typeof e&&"object"==typeof n){if(e.constructor!==n.constructor)return!1;var r,i,o;if(Array.isArray(e)){if((r=e.length)!=n.length)return!1;for(i=r;0!==i--;)if(!t(e[i],n[i]))return!1;return!0}if(e instanceof Map&&n instanceof Map){if(e.size!==n.size)return!1;for(i of e.entries())if(!n.has(i[0]))return!1;for(i of e.entries())if(!t(i[1],n.get(i[0])))return!1;return!0}if(e instanceof Set&&n instanceof Set){if(e.size!==n.size)return!1;for(i of e.entries())if(!n.has(i[0]))return!1;return!0}if(ArrayBuffer.isView(e)&&ArrayBuffer.isView(n)){if((r=e.length)!=n.length)return!1;for(i=r;0!==i--;)if(e[i]!==n[i])return!1;return!0}if(e.constructor===RegExp)return e.source===n.source&&e.flags===n.flags;if(e.valueOf!==Object.prototype.valueOf)return e.valueOf()===n.valueOf();if(e.toString!==Object.prototype.toString)return e.toString()===n.toString();if((r=(o=Object.keys(e)).length)!==Object.keys(n).length)return!1;for(i=r;0!==i--;)if(!Object.prototype.hasOwnProperty.call(n,o[i]))return!1;for(i=r;0!==i--;){var s=o[i];if(("_owner"!==s||!e.$$typeof)&&!t(e[s],n[s]))return!1}return!0}return e!==e&&n!==n})),Oe={exports:{}},Ee={};Oe.exports=function(){if(Ae)return Ee;Ae=1;var t=fe,e=we,n="function"===typeof Object.is?Object.is:function(t,e){return t===e&&(0!==t||1/t===1/e)||t!==t&&e!==e},r=e.useSyncExternalStore,i=t.useRef,o=t.useEffect,s=t.useMemo,a=t.useDebugValue;return Ee.useSyncExternalStoreWithSelector=function(t,e,l,c,u){var d=i(null);if(null===d.current){var p={hasValue:!1,value:null};d.current=p}else p=d.current;d=s((function(){function t(t){if(!o){if(o=!0,r=t,t=c(t),void 0!==u&&p.hasValue){var e=p.value;if(u(e,t))return i=e}return i=t}if(e=i,n(r,t))return e;var s=c(t);return void 0!==u&&u(e,s)?e:(r=t,i=s)}var r,i,o=!1,s=void 0===l?null:l;return[function(){return t(e())},null===s?void 0:function(){return t(s())}]}),[e,l,c,u]);var h=r(t,d[0],d[1]);return o((function(){p.hasValue=!0,p.value=h}),[h]),a(h),h},Ee}();var Ie=Oe.exports;class Ne{constructor(t){this.transactionNumber=0,this.lastTransactionNumber=0,this.subscribers=new Set,this.editor=t,this.lastSnapshot={editor:t,transactionNumber:0},this.getSnapshot=this.getSnapshot.bind(this),this.getServerSnapshot=this.getServerSnapshot.bind(this),this.watch=this.watch.bind(this),this.subscribe=this.subscribe.bind(this)}getSnapshot(){return this.transactionNumber===this.lastTransactionNumber||(this.lastTransactionNumber=this.transactionNumber,this.lastSnapshot={editor:this.editor,transactionNumber:this.transactionNumber}),this.lastSnapshot}getServerSnapshot(){return{editor:null,transactionNumber:0}}subscribe(t){return this.subscribers.add(t),()=>{this.subscribers.delete(t)}}watch(t){if(this.editor=t,this.editor){const t=()=>{this.transactionNumber+=1,this.subscribers.forEach((t=>t()))},e=this.editor;return e.on("transaction",t),()=>{e.off("transaction",t)}}}}const Re="undefined"===typeof window,De=Re||Boolean("undefined"!==typeof window&&window.next);class Le{constructor(t){this.editor=null,this.subscriptions=new Set,this.isComponentMounted=!1,this.previousDeps=null,this.instanceId="",this.options=t,this.subscriptions=new Set,this.setEditor(this.getInitialEditor()),this.scheduleDestroy(),this.getEditor=this.getEditor.bind(this),this.getServerSnapshot=this.getServerSnapshot.bind(this),this.subscribe=this.subscribe.bind(this),this.refreshEditorInstance=this.refreshEditorInstance.bind(this),this.scheduleDestroy=this.scheduleDestroy.bind(this),this.onRender=this.onRender.bind(this),this.createEditor=this.createEditor.bind(this)}setEditor(t){this.editor=t,this.instanceId=Math.random().toString(36).slice(2,9),this.subscriptions.forEach((t=>t()))}getInitialEditor(){return void 0===this.options.current.immediatelyRender?Re||De?null:this.createEditor():(this.options.current.immediatelyRender,this.options.current.immediatelyRender?this.createEditor():null)}createEditor(){const t={...this.options.current,onBeforeCreate:(...t)=>{var e,n;return null===(n=(e=this.options.current).onBeforeCreate)||void 0===n?void 0:n.call(e,...t)},onBlur:(...t)=>{var e,n;return null===(n=(e=this.options.current).onBlur)||void 0===n?void 0:n.call(e,...t)},onCreate:(...t)=>{var e,n;return null===(n=(e=this.options.current).onCreate)||void 0===n?void 0:n.call(e,...t)},onDestroy:(...t)=>{var e,n;return null===(n=(e=this.options.current).onDestroy)||void 0===n?void 0:n.call(e,...t)},onFocus:(...t)=>{var e,n;return null===(n=(e=this.options.current).onFocus)||void 0===n?void 0:n.call(e,...t)},onSelectionUpdate:(...t)=>{var e,n;return null===(n=(e=this.options.current).onSelectionUpdate)||void 0===n?void 0:n.call(e,...t)},onTransaction:(...t)=>{var e,n;return null===(n=(e=this.options.current).onTransaction)||void 0===n?void 0:n.call(e,...t)},onUpdate:(...t)=>{var e,n;return null===(n=(e=this.options.current).onUpdate)||void 0===n?void 0:n.call(e,...t)},onContentError:(...t)=>{var e,n;return null===(n=(e=this.options.current).onContentError)||void 0===n?void 0:n.call(e,...t)},onDrop:(...t)=>{var e,n;return null===(n=(e=this.options.current).onDrop)||void 0===n?void 0:n.call(e,...t)},onPaste:(...t)=>{var e,n;return null===(n=(e=this.options.current).onPaste)||void 0===n?void 0:n.call(e,...t)}};return new r.ML(t)}getEditor(){return this.editor}getServerSnapshot(){return null}subscribe(t){return this.subscriptions.add(t),()=>{this.subscriptions.delete(t)}}onRender(t){return()=>(this.isComponentMounted=!0,clearTimeout(this.scheduledDestructionTimeout),this.editor&&!this.editor.isDestroyed&&0===t.length?this.editor.setOptions(this.options.current):this.refreshEditorInstance(t),()=>{this.isComponentMounted=!1,this.scheduleDestroy()})}refreshEditorInstance(t){if(this.editor&&!this.editor.isDestroyed){if(null===this.previousDeps)return void(this.previousDeps=t);if(this.previousDeps.length===t.length&&this.previousDeps.every(((e,n)=>e===t[n])))return}this.editor&&!this.editor.isDestroyed&&this.editor.destroy(),this.setEditor(this.createEditor()),this.previousDeps=t}scheduleDestroy(){const t=this.instanceId,e=this.editor;this.scheduledDestructionTimeout=setTimeout((()=>{this.isComponentMounted&&this.instanceId===t?e&&e.setOptions(this.options.current):e&&!e.isDestroyed&&(e.destroy(),this.instanceId===t&&this.setEditor(null))}),1)}}function Fe(t={},e=[]){const n=(0,fe.useRef)(t);n.current=t;const[r]=(0,fe.useState)((()=>new Le(n))),i=we.useSyncExternalStore(r.subscribe,r.getEditor,r.getServerSnapshot);return(0,fe.useDebugValue)(i),(0,fe.useEffect)(r.onRender(e)),function(t){var e;const[n]=(0,fe.useState)((()=>new Ne(t.editor))),r=Ie.useSyncExternalStoreWithSelector(n.subscribe,n.getSnapshot,n.getServerSnapshot,t.selector,null!==(e=t.equalityFn)&&void 0!==e?e:Te);(0,fe.useEffect)((()=>n.watch(t.editor)),[t.editor,n]),(0,fe.useDebugValue)(r)}({editor:i,selector:({transactionNumber:e})=>!1===t.shouldRerenderOnTransaction?null:t.immediatelyRender&&0===e?0:e+1}),i}const He=(0,fe.createContext)({editor:null}),_e=(He.Consumer,()=>(0,fe.useContext)(He));const Be=t=>{const[e,n]=(0,fe.useState)(null),{editor:r}=_e();return(0,fe.useEffect)((()=>{var n;if(!e)return;if((null===(n=t.editor)||void 0===n?void 0:n.isDestroyed)||(null===r||void 0===r?void 0:r.isDestroyed))return;const{pluginKey:i="bubbleMenu",editor:o,tippyOptions:s={},updateDelay:a,shouldShow:l=null}=t,c=o||r;if(!c)return void console.warn("BubbleMenu component is not rendered inside of an editor component or does not have editor prop.");const u=he({updateDelay:a,editor:c,element:e,pluginKey:i,shouldShow:l,tippyOptions:s});return c.registerPlugin(u),()=>{c.unregisterPlugin(i)}}),[t.editor,r,e]),fe.createElement("div",{ref:n,className:t.className,style:{visibility:"hidden"}},t.children)},Ve=(0,fe.createContext)({onDragStart:void 0}),ze=()=>(0,fe.useContext)(Ve);fe.forwardRef(((t,e)=>{const{onDragStart:n}=ze(),r=t.as||"div";return fe.createElement(r,{...t,ref:e,"data-node-view-wrapper":"",onDragStart:n,style:{whiteSpace:"normal",...t.style}})}))},1211:function(t,e,n){n.d(e,{Z:function(){return yt}});var r=n(5865);const i=/^\s*>\s$/,o=r.NB.create({name:"blockquote",addOptions:()=>({HTMLAttributes:{}}),content:"block+",group:"block",defining:!0,parseHTML:()=>[{tag:"blockquote"}],renderHTML({HTMLAttributes:t}){return["blockquote",(0,r.P1)(this.options.HTMLAttributes,t),0]},addCommands(){return{setBlockquote:()=>({commands:t})=>t.wrapIn(this.name),toggleBlockquote:()=>({commands:t})=>t.toggleWrap(this.name),unsetBlockquote:()=>({commands:t})=>t.lift(this.name)}},addKeyboardShortcuts(){return{"Mod-Shift-b":()=>this.editor.commands.toggleBlockquote()}},addInputRules(){return[(0,r.S0)({find:i,type:this.type})]}}),s=/(?:^|\s)(\*\*(?!\s+\*\*)((?:[^*]+))\*\*(?!\s+\*\*))$/,a=/(?:^|\s)(\*\*(?!\s+\*\*)((?:[^*]+))\*\*(?!\s+\*\*))/g,l=/(?:^|\s)(__(?!\s+__)((?:[^_]+))__(?!\s+__))$/,c=/(?:^|\s)(__(?!\s+__)((?:[^_]+))__(?!\s+__))/g,u=r.vc.create({name:"bold",addOptions:()=>({HTMLAttributes:{}}),parseHTML:()=>[{tag:"strong"},{tag:"b",getAttrs:t=>"normal"!==t.style.fontWeight&&null},{style:"font-weight",getAttrs:t=>/^(bold(er)?|[5-9]\d{2,})$/.test(t)&&null}],renderHTML({HTMLAttributes:t}){return["strong",(0,r.P1)(this.options.HTMLAttributes,t),0]},addCommands(){return{setBold:()=>({commands:t})=>t.setMark(this.name),toggleBold:()=>({commands:t})=>t.toggleMark(this.name),unsetBold:()=>({commands:t})=>t.unsetMark(this.name)}},addKeyboardShortcuts(){return{"Mod-b":()=>this.editor.commands.toggleBold(),"Mod-B":()=>this.editor.commands.toggleBold()}},addInputRules(){return[(0,r.Cf)({find:s,type:this.type}),(0,r.Cf)({find:l,type:this.type})]},addPasteRules(){return[(0,r.K9)({find:a,type:this.type}),(0,r.K9)({find:c,type:this.type})]}});var d=n(561);const p=/(?:^|\s)(`(?!\s+`)((?:[^`]+))`(?!\s+`))$/,h=/(?:^|\s)(`(?!\s+`)((?:[^`]+))`(?!\s+`))/g,f=r.vc.create({name:"code",addOptions:()=>({HTMLAttributes:{}}),excludes:"_",code:!0,exitable:!0,parseHTML:()=>[{tag:"code"}],renderHTML({HTMLAttributes:t}){return["code",(0,r.P1)(this.options.HTMLAttributes,t),0]},addCommands(){return{setCode:()=>({commands:t})=>t.setMark(this.name),toggleCode:()=>({commands:t})=>t.toggleMark(this.name),unsetCode:()=>({commands:t})=>t.unsetMark(this.name)}},addKeyboardShortcuts(){return{"Mod-e":()=>this.editor.commands.toggleCode()}},addInputRules(){return[(0,r.Cf)({find:p,type:this.type})]},addPasteRules(){return[(0,r.K9)({find:h,type:this.type})]}});var m=n(2376);const g=/^```([a-z]+)?[\s\n]$/,y=/^~~~([a-z]+)?[\s\n]$/,v=r.NB.create({name:"codeBlock",addOptions:()=>({languageClassPrefix:"language-",exitOnTripleEnter:!0,exitOnArrowDown:!0,defaultLanguage:null,HTMLAttributes:{}}),content:"text*",marks:"",group:"block",code:!0,defining:!0,addAttributes(){return{language:{default:this.options.defaultLanguage,parseHTML:t=>{var e;const{languageClassPrefix:n}=this.options,r=[...(null===(e=t.firstElementChild)||void 0===e?void 0:e.classList)||[]].filter((t=>t.startsWith(n))).map((t=>t.replace(n,"")))[0];return r||null},rendered:!1}}},parseHTML:()=>[{tag:"pre",preserveWhitespace:"full"}],renderHTML({node:t,HTMLAttributes:e}){return["pre",(0,r.P1)(this.options.HTMLAttributes,e),["code",{class:t.attrs.language?this.options.languageClassPrefix+t.attrs.language:null},0]]},addCommands(){return{setCodeBlock:t=>({commands:e})=>e.setNode(this.name,t),toggleCodeBlock:t=>({commands:e})=>e.toggleNode(this.name,"paragraph",t)}},addKeyboardShortcuts(){return{"Mod-Alt-c":()=>this.editor.commands.toggleCodeBlock(),Backspace:()=>{const{empty:t,$anchor:e}=this.editor.state.selection,n=1===e.pos;return!(!t||e.parent.type.name!==this.name)&&(!(!n&&e.parent.textContent.length)&&this.editor.commands.clearNodes())},Enter:({editor:t})=>{if(!this.options.exitOnTripleEnter)return!1;const{state:e}=t,{selection:n}=e,{$from:r,empty:i}=n;if(!i||r.parent.type!==this.type)return!1;const o=r.parentOffset===r.parent.nodeSize-2,s=r.parent.textContent.endsWith("\n\n");return!(!o||!s)&&t.chain().command((({tr:t})=>(t.delete(r.pos-2,r.pos),!0))).exitCode().run()},ArrowDown:({editor:t})=>{if(!this.options.exitOnArrowDown)return!1;const{state:e}=t,{selection:n,doc:r}=e,{$from:i,empty:o}=n;if(!o||i.parent.type!==this.type)return!1;if(!(i.parentOffset===i.parent.nodeSize-2))return!1;const s=i.after();if(void 0===s)return!1;return r.nodeAt(s)?t.commands.command((({tr:t})=>(t.setSelection(m.Y1.near(r.resolve(s))),!0))):t.commands.exitCode()}}},addInputRules(){return[(0,r.zK)({find:g,type:this.type,getAttributes:t=>({language:t[1]})}),(0,r.zK)({find:y,type:this.type,getAttributes:t=>({language:t[1]})})]},addProseMirrorPlugins(){return[new m.Sy({key:new m.H$("codeBlockVSCodeHandler"),props:{handlePaste:(t,e)=>{if(!e.clipboardData)return!1;if(this.editor.isActive(this.type.name))return!1;const n=e.clipboardData.getData("text/plain"),r=e.clipboardData.getData("vscode-editor-data"),i=r?JSON.parse(r):void 0,o=null===i||void 0===i?void 0:i.mode;if(!n||!o)return!1;const{tr:s,schema:a}=t.state,l=a.text(n.replace(/\r\n?/g,"\n"));return s.replaceSelectionWith(this.type.create({language:o},l)),s.selection.$from.parent.type!==this.type&&s.setSelection(m.Bs.near(s.doc.resolve(Math.max(0,s.selection.from-2)))),s.setMeta("paste",!0),t.dispatch(s),!0}}})]}}),b=r.NB.create({name:"doc",topNode:!0,content:"block+"});var w=n(6560);function x(t={}){return new m.Sy({view:e=>new k(e,t)})}class k{constructor(t,e){var n;this.editorView=t,this.cursorPos=null,this.element=null,this.timeout=-1,this.width=null!==(n=e.width)&&void 0!==n?n:1,this.color=!1===e.color?void 0:e.color||"black",this.class=e.class,this.handlers=["dragover","dragend","drop","dragleave"].map((e=>{let n=t=>{this[e](t)};return t.dom.addEventListener(e,n),{name:e,handler:n}}))}destroy(){this.handlers.forEach((({name:t,handler:e})=>this.editorView.dom.removeEventListener(t,e)))}update(t,e){null!=this.cursorPos&&e.doc!=t.state.doc&&(this.cursorPos>t.state.doc.content.size?this.setCursor(null):this.updateOverlay())}setCursor(t){t!=this.cursorPos&&(this.cursorPos=t,null==t?(this.element.parentNode.removeChild(this.element),this.element=null):this.updateOverlay())}updateOverlay(){let t,e=this.editorView.state.doc.resolve(this.cursorPos),n=!e.parent.inlineContent;if(n){let n=e.nodeBefore,r=e.nodeAfter;if(n||r){let e=this.editorView.nodeDOM(this.cursorPos-(n?n.nodeSize:0));if(e){let i=e.getBoundingClientRect(),o=n?i.bottom:i.top;n&&r&&(o=(o+this.editorView.nodeDOM(this.cursorPos).getBoundingClientRect().top)/2),t={left:i.left,right:i.right,top:o-this.width/2,bottom:o+this.width/2}}}}if(!t){let e=this.editorView.coordsAtPos(this.cursorPos);t={left:e.left-this.width/2,right:e.left+this.width/2,top:e.top,bottom:e.bottom}}let r,i,o=this.editorView.dom.offsetParent;if(this.element||(this.element=o.appendChild(document.createElement("div")),this.class&&(this.element.className=this.class),this.element.style.cssText="position: absolute; z-index: 50; pointer-events: none;",this.color&&(this.element.style.backgroundColor=this.color)),this.element.classList.toggle("prosemirror-dropcursor-block",n),this.element.classList.toggle("prosemirror-dropcursor-inline",!n),!o||o==document.body&&"static"==getComputedStyle(o).position)r=-pageXOffset,i=-pageYOffset;else{let t=o.getBoundingClientRect();r=t.left-o.scrollLeft,i=t.top-o.scrollTop}this.element.style.left=t.left-r+"px",this.element.style.top=t.top-i+"px",this.element.style.width=t.right-t.left+"px",this.element.style.height=t.bottom-t.top+"px"}scheduleRemoval(t){clearTimeout(this.timeout),this.timeout=setTimeout((()=>this.setCursor(null)),t)}dragover(t){if(!this.editorView.editable)return;let e=this.editorView.posAtCoords({left:t.clientX,top:t.clientY}),n=e&&e.inside>=0&&this.editorView.state.doc.nodeAt(e.inside),r=n&&n.type.spec.disableDropCursor,i="function"==typeof r?r(this.editorView,e,t):r;if(e&&!i){let t=e.pos;if(this.editorView.dragging&&this.editorView.dragging.slice){let e=(0,w.nj)(this.editorView.state.doc,t,this.editorView.dragging.slice);null!=e&&(t=e)}this.setCursor(t),this.scheduleRemoval(5e3)}}dragend(){this.scheduleRemoval(20)}drop(){this.scheduleRemoval(20)}dragleave(t){t.target!=this.editorView.dom&&this.editorView.dom.contains(t.relatedTarget)||this.setCursor(null)}}const S=r.hj.create({name:"dropCursor",addOptions:()=>({color:"currentColor",width:1,class:void 0}),addProseMirrorPlugins(){return[x(this.options)]}});var M=n(2696),C=n(2806),A=n(4348);class T extends m.Y1{constructor(t){super(t,t)}map(t,e){let n=t.resolve(e.map(this.head));return T.valid(n)?new T(n):m.Y1.near(n)}content(){return C.p2.empty}eq(t){return t instanceof T&&t.head==this.head}toJSON(){return{type:"gapcursor",pos:this.head}}static fromJSON(t,e){if("number"!=typeof e.pos)throw new RangeError("Invalid input for GapCursor.fromJSON");return new T(t.resolve(e.pos))}getBookmark(){return new O(this.anchor)}static valid(t){let e=t.parent;if(e.isTextblock||!function(t){for(let e=t.depth;e>=0;e--){let n=t.index(e),r=t.node(e);if(0!=n)for(let t=r.child(n-1);;t=t.lastChild){if(0==t.childCount&&!t.inlineContent||t.isAtom||t.type.spec.isolating)return!0;if(t.inlineContent)return!1}else if(r.type.spec.isolating)return!0}return!0}(t)||!function(t){for(let e=t.depth;e>=0;e--){let n=t.indexAfter(e),r=t.node(e);if(n!=r.childCount)for(let t=r.child(n);;t=t.firstChild){if(0==t.childCount&&!t.inlineContent||t.isAtom||t.type.spec.isolating)return!0;if(t.inlineContent)return!1}else if(r.type.spec.isolating)return!0}return!0}(t))return!1;let n=e.type.spec.allowGapCursor;if(null!=n)return n;let r=e.contentMatchAt(t.index()).defaultType;return r&&r.isTextblock}static findGapCursorFrom(t,e,n=!1){t:for(;;){if(!n&&T.valid(t))return t;let r=t.pos,i=null;for(let n=t.depth;;n--){let o=t.node(n);if(e>0?t.indexAfter(n)<o.childCount:t.index(n)>0){i=o.child(e>0?t.indexAfter(n):t.index(n)-1);break}if(0==n)return null;r+=e;let s=t.doc.resolve(r);if(T.valid(s))return s}for(;;){let o=e>0?i.firstChild:i.lastChild;if(!o){if(i.isAtom&&!i.isText&&!m.qv.isSelectable(i)){t=t.doc.resolve(r+i.nodeSize*e),n=!1;continue t}break}i=o,r+=e;let s=t.doc.resolve(r);if(T.valid(s))return s}return null}}}T.prototype.visible=!1,T.findFrom=T.findGapCursorFrom,m.Y1.jsonID("gapcursor",T);class O{constructor(t){this.pos=t}map(t){return new O(t.map(this.pos))}resolve(t){let e=t.resolve(this.pos);return T.valid(e)?new T(e):m.Y1.near(e)}}const E=(0,M.$)({ArrowLeft:I("horiz",-1),ArrowRight:I("horiz",1),ArrowUp:I("vert",-1),ArrowDown:I("vert",1)});function I(t,e){const n="vert"==t?e>0?"down":"up":e>0?"right":"left";return function(t,r,i){let o=t.selection,s=e>0?o.$to:o.$from,a=o.empty;if(o instanceof m.Bs){if(!i.endOfTextblock(n)||0==s.depth)return!1;a=!1,s=t.doc.resolve(e>0?s.after():s.before())}let l=T.findGapCursorFrom(s,e,a);return!!l&&(r&&r(t.tr.setSelection(new T(l))),!0)}}function N(t,e,n){if(!t||!t.editable)return!1;let r=t.state.doc.resolve(e);if(!T.valid(r))return!1;let i=t.posAtCoords({left:n.clientX,top:n.clientY});return!(i&&i.inside>-1&&m.qv.isSelectable(t.state.doc.nodeAt(i.inside)))&&(t.dispatch(t.state.tr.setSelection(new T(r))),!0)}function R(t,e){if("insertCompositionText"!=e.inputType||!(t.state.selection instanceof T))return!1;let{$from:n}=t.state.selection,r=n.parent.contentMatchAt(n.index()).findWrapping(t.state.schema.nodes.text);if(!r)return!1;let i=C.HY.empty;for(let s=r.length-1;s>=0;s--)i=C.HY.from(r[s].createAndFill(null,i));let o=t.state.tr.replace(n.pos,n.pos,new C.p2(i,0,0));return o.setSelection(m.Bs.near(o.doc.resolve(n.pos+1))),t.dispatch(o),!1}function D(t){if(!(t.selection instanceof T))return null;let e=document.createElement("div");return e.className="ProseMirror-gapcursor",A.EH.create(t.doc,[A.p.widget(t.selection.head,e,{key:"gapcursor"})])}const L=r.hj.create({name:"gapCursor",addProseMirrorPlugins:()=>[new m.Sy({props:{decorations:D,createSelectionBetween:(t,e,n)=>e.pos==n.pos&&T.valid(n)?new T(n):null,handleClick:N,handleKeyDown:E,handleDOMEvents:{beforeinput:R}}})],extendNodeSchema(t){var e;const n={name:t.name,options:t.options,storage:t.storage};return{allowGapCursor:null!==(e=(0,r.nU)((0,r.Nl)(t,"allowGapCursor",n)))&&void 0!==e?e:null}}}),F=r.NB.create({name:"hardBreak",addOptions:()=>({keepMarks:!0,HTMLAttributes:{}}),inline:!0,group:"inline",selectable:!1,parseHTML:()=>[{tag:"br"}],renderHTML({HTMLAttributes:t}){return["br",(0,r.P1)(this.options.HTMLAttributes,t)]},renderText:()=>"\n",addCommands(){return{setHardBreak:()=>({commands:t,chain:e,state:n,editor:r})=>t.first([()=>t.exitCode(),()=>t.command((()=>{const{selection:t,storedMarks:i}=n;if(t.$from.parent.type.spec.isolating)return!1;const{keepMarks:o}=this.options,{splittableMarks:s}=r.extensionManager,a=i||t.$to.parentOffset&&t.$from.marks();return e().insertContent({type:this.name}).command((({tr:t,dispatch:e})=>{if(e&&a&&o){const e=a.filter((t=>s.includes(t.type.name)));t.ensureMarks(e)}return!0})).run()}))])}},addKeyboardShortcuts(){return{"Mod-Enter":()=>this.editor.commands.setHardBreak(),"Shift-Enter":()=>this.editor.commands.setHardBreak()}}});var H=n(7490),_=200,B=function(){};B.prototype.append=function(t){return t.length?(t=B.from(t),!this.length&&t||t.length<_&&this.leafAppend(t)||this.length<_&&t.leafPrepend(this)||this.appendInner(t)):this},B.prototype.prepend=function(t){return t.length?B.from(t).append(this):this},B.prototype.appendInner=function(t){return new z(this,t)},B.prototype.slice=function(t,e){return void 0===t&&(t=0),void 0===e&&(e=this.length),t>=e?B.empty:this.sliceInner(Math.max(0,t),Math.min(this.length,e))},B.prototype.get=function(t){if(!(t<0||t>=this.length))return this.getInner(t)},B.prototype.forEach=function(t,e,n){void 0===e&&(e=0),void 0===n&&(n=this.length),e<=n?this.forEachInner(t,e,n,0):this.forEachInvertedInner(t,e,n,0)},B.prototype.map=function(t,e,n){void 0===e&&(e=0),void 0===n&&(n=this.length);var r=[];return this.forEach((function(e,n){return r.push(t(e,n))}),e,n),r},B.from=function(t){return t instanceof B?t:t&&t.length?new V(t):B.empty};var V=function(t){function e(e){t.call(this),this.values=e}t&&(e.__proto__=t),e.prototype=Object.create(t&&t.prototype),e.prototype.constructor=e;var n={length:{configurable:!0},depth:{configurable:!0}};return e.prototype.flatten=function(){return this.values},e.prototype.sliceInner=function(t,n){return 0==t&&n==this.length?this:new e(this.values.slice(t,n))},e.prototype.getInner=function(t){return this.values[t]},e.prototype.forEachInner=function(t,e,n,r){for(var i=e;i<n;i++)if(!1===t(this.values[i],r+i))return!1},e.prototype.forEachInvertedInner=function(t,e,n,r){for(var i=e-1;i>=n;i--)if(!1===t(this.values[i],r+i))return!1},e.prototype.leafAppend=function(t){if(this.length+t.length<=_)return new e(this.values.concat(t.flatten()))},e.prototype.leafPrepend=function(t){if(this.length+t.length<=_)return new e(t.flatten().concat(this.values))},n.length.get=function(){return this.values.length},n.depth.get=function(){return 0},Object.defineProperties(e.prototype,n),e}(B);B.empty=new V([]);var z=function(t){function e(e,n){t.call(this),this.left=e,this.right=n,this.length=e.length+n.length,this.depth=Math.max(e.depth,n.depth)+1}return t&&(e.__proto__=t),e.prototype=Object.create(t&&t.prototype),e.prototype.constructor=e,e.prototype.flatten=function(){return this.left.flatten().concat(this.right.flatten())},e.prototype.getInner=function(t){return t<this.left.length?this.left.get(t):this.right.get(t-this.left.length)},e.prototype.forEachInner=function(t,e,n,r){var i=this.left.length;return!(e<i&&!1===this.left.forEachInner(t,e,Math.min(n,i),r))&&(!(n>i&&!1===this.right.forEachInner(t,Math.max(e-i,0),Math.min(this.length,n)-i,r+i))&&void 0)},e.prototype.forEachInvertedInner=function(t,e,n,r){var i=this.left.length;return!(e>i&&!1===this.right.forEachInvertedInner(t,e-i,Math.max(n,i)-i,r+i))&&(!(n<i&&!1===this.left.forEachInvertedInner(t,Math.min(e,i),n,r))&&void 0)},e.prototype.sliceInner=function(t,e){if(0==t&&e==this.length)return this;var n=this.left.length;return e<=n?this.left.slice(t,e):t>=n?this.right.slice(t-n,e-n):this.left.slice(t,n).append(this.right.slice(0,e-n))},e.prototype.leafAppend=function(t){var n=this.right.leafAppend(t);if(n)return new e(this.left,n)},e.prototype.leafPrepend=function(t){var n=this.left.leafPrepend(t);if(n)return new e(n,this.right)},e.prototype.appendInner=function(t){return this.left.depth>=Math.max(this.right.depth,t.depth)+1?new e(this.left,new e(this.right,t)):new e(this,t)},e}(B),$=B;class j{constructor(t,e){this.items=t,this.eventCount=e}popEvent(t,e){if(0==this.eventCount)return null;let n,r,i=this.items.length;for(;;i--){if(this.items.get(i-1).selection){--i;break}}e&&(n=this.remapping(i,this.items.length),r=n.maps.length);let o,s,a=t.tr,l=[],c=[];return this.items.forEach(((t,e)=>{if(!t.step)return n||(n=this.remapping(i,e+1),r=n.maps.length),r--,void c.push(t);if(n){c.push(new P(t.map));let e,i=t.step.map(n.slice(r));i&&a.maybeStep(i).doc&&(e=a.mapping.maps[a.mapping.maps.length-1],l.push(new P(e,void 0,void 0,l.length+c.length))),r--,e&&n.appendMap(e,r)}else a.maybeStep(t.step);return t.selection?(o=n?t.selection.map(n.slice(r)):t.selection,s=new j(this.items.slice(0,i).append(c.reverse().concat(l)),this.eventCount-1),!1):void 0}),this.items.length,0),{remaining:s,transform:a,selection:o}}addTransform(t,e,n,r){let i=[],o=this.eventCount,s=this.items,a=!r&&s.length?s.get(s.length-1):null;for(let c=0;c<t.steps.length;c++){let n,l=t.steps[c].invert(t.docs[c]),u=new P(t.mapping.maps[c],l,e);(n=a&&a.merge(u))&&(u=n,c?i.pop():s=s.slice(0,s.length-1)),i.push(u),e&&(o++,e=void 0),r||(a=u)}let l=o-n.depth;return l>q&&(s=function(t,e){let n;return t.forEach(((t,r)=>{if(t.selection&&0==e--)return n=r,!1})),t.slice(n)}(s,l),o-=l),new j(s.append(i),o)}remapping(t,e){let n=new w.vs;return this.items.forEach(((e,r)=>{let i=null!=e.mirrorOffset&&r-e.mirrorOffset>=t?n.maps.length-e.mirrorOffset:void 0;n.appendMap(e.map,i)}),t,e),n}addMaps(t){return 0==this.eventCount?this:new j(this.items.append(t.map((t=>new P(t)))),this.eventCount)}rebased(t,e){if(!this.eventCount)return this;let n=[],r=Math.max(0,this.items.length-e),i=t.mapping,o=t.steps.length,s=this.eventCount;this.items.forEach((t=>{t.selection&&s--}),r);let a=e;this.items.forEach((e=>{let r=i.getMirror(--a);if(null==r)return;o=Math.min(o,r);let l=i.maps[r];if(e.step){let o=t.steps[r].invert(t.docs[r]),c=e.selection&&e.selection.map(i.slice(a+1,r));c&&s++,n.push(new P(l,o,c))}else n.push(new P(l))}),r);let l=[];for(let d=e;d<o;d++)l.push(new P(i.maps[d]));let c=this.items.slice(0,r).append(l).append(n),u=new j(c,s);return u.emptyItemCount()>500&&(u=u.compress(this.items.length-n.length)),u}emptyItemCount(){let t=0;return this.items.forEach((e=>{e.step||t++})),t}compress(t=this.items.length){let e=this.remapping(0,t),n=e.maps.length,r=[],i=0;return this.items.forEach(((o,s)=>{if(s>=t)r.push(o),o.selection&&i++;else if(o.step){let t=o.step.map(e.slice(n)),s=t&&t.getMap();if(n--,s&&e.appendMap(s,n),t){let a=o.selection&&o.selection.map(e.slice(n));a&&i++;let l,c=new P(s.invert(),t,a),u=r.length-1;(l=r.length&&r[u].merge(c))?r[u]=l:r.push(c)}}else o.map&&n--}),this.items.length,0),new j($.from(r.reverse()),i)}}j.empty=new j($.empty,0);class P{constructor(t,e,n,r){this.map=t,this.step=e,this.selection=n,this.mirrorOffset=r}merge(t){if(this.step&&t.step&&!t.selection){let e=t.step.merge(this.step);if(e)return new P(e.getMap().invert(),e,this.selection)}}}class J{constructor(t,e,n,r,i){this.done=t,this.undone=e,this.prevRanges=n,this.prevTime=r,this.prevComposition=i}}const q=20;function W(t){let e=[];for(let n=t.length-1;n>=0&&0==e.length;n--)t[n].forEach(((t,n,r,i)=>e.push(r,i)));return e}function Y(t,e){if(!t)return null;let n=[];for(let r=0;r<t.length;r+=2){let i=e.map(t[r],1),o=e.map(t[r+1],-1);i<=o&&n.push(i,o)}return n}let U=!1,K=null;function G(t){let e=t.plugins;if(K!=e){U=!1,K=e;for(let t=0;t<e.length;t++)if(e[t].spec.historyPreserveItems){U=!0;break}}return U}const X=new m.H$("history"),Z=new m.H$("closeHistory");function Q(t={}){return t={depth:t.depth||100,newGroupDelay:t.newGroupDelay||500},new m.Sy({key:X,state:{init:()=>new J(j.empty,j.empty,null,0,-1),apply:(e,n,r)=>function(t,e,n,r){let i,o=n.getMeta(X);if(o)return o.historyState;n.getMeta(Z)&&(t=new J(t.done,t.undone,null,0,-1));let s=n.getMeta("appendedTransaction");if(0==n.steps.length)return t;if(s&&s.getMeta(X))return s.getMeta(X).redo?new J(t.done.addTransform(n,void 0,r,G(e)),t.undone,W(n.mapping.maps),t.prevTime,t.prevComposition):new J(t.done,t.undone.addTransform(n,void 0,r,G(e)),null,t.prevTime,t.prevComposition);if(!1===n.getMeta("addToHistory")||s&&!1===s.getMeta("addToHistory"))return(i=n.getMeta("rebased"))?new J(t.done.rebased(n,i),t.undone.rebased(n,i),Y(t.prevRanges,n.mapping),t.prevTime,t.prevComposition):new J(t.done.addMaps(n.mapping.maps),t.undone.addMaps(n.mapping.maps),Y(t.prevRanges,n.mapping),t.prevTime,t.prevComposition);{let i=n.getMeta("composition"),o=0==t.prevTime||!s&&t.prevComposition!=i&&(t.prevTime<(n.time||0)-r.newGroupDelay||!function(t,e){if(!e)return!1;if(!t.docChanged)return!0;let n=!1;return t.mapping.maps[0].forEach(((t,r)=>{for(let i=0;i<e.length;i+=2)t<=e[i+1]&&r>=e[i]&&(n=!0)})),n}(n,t.prevRanges)),a=s?Y(t.prevRanges,n.mapping):W(n.mapping.maps);return new J(t.done.addTransform(n,o?e.selection.getBookmark():void 0,r,G(e)),j.empty,a,n.time,null==i?t.prevComposition:i)}}(n,r,e,t)},config:t,props:{handleDOMEvents:{beforeinput(t,e){let n=e.inputType,r="historyUndo"==n?et:"historyRedo"==n?nt:null;return!!r&&(e.preventDefault(),r(t.state,t.dispatch))}}}})}function tt(t,e){return(n,r)=>{let i=X.getState(n);if(!i||0==(t?i.undone:i.done).eventCount)return!1;if(r){let o=function(t,e,n){let r=G(e),i=X.get(e).spec.config,o=(n?t.undone:t.done).popEvent(e,r);if(!o)return null;let s=o.selection.resolve(o.transform.doc),a=(n?t.done:t.undone).addTransform(o.transform,e.selection.getBookmark(),i,r),l=new J(n?a:o.remaining,n?o.remaining:a,null,0,-1);return o.transform.setSelection(s).setMeta(X,{redo:n,historyState:l})}(i,n,t);o&&r(e?o.scrollIntoView():o)}return!0}}const et=tt(!1,!0),nt=tt(!0,!0);tt(!1,!1),tt(!0,!1);const rt=r.hj.create({name:"history",addOptions:()=>({depth:100,newGroupDelay:500}),addCommands:()=>({undo:()=>({state:t,dispatch:e})=>et(t,e),redo:()=>({state:t,dispatch:e})=>nt(t,e)}),addProseMirrorPlugins(){return[Q(this.options)]},addKeyboardShortcuts(){return{"Mod-z":()=>this.editor.commands.undo(),"Shift-Mod-z":()=>this.editor.commands.redo(),"Mod-y":()=>this.editor.commands.redo(),"Mod-\u044f":()=>this.editor.commands.undo(),"Shift-Mod-\u044f":()=>this.editor.commands.redo()}}}),it=r.NB.create({name:"horizontalRule",addOptions:()=>({HTMLAttributes:{}}),group:"block",parseHTML:()=>[{tag:"hr"}],renderHTML({HTMLAttributes:t}){return["hr",(0,r.P1)(this.options.HTMLAttributes,t)]},addCommands(){return{setHorizontalRule:()=>({chain:t,state:e})=>{const{selection:n}=e,{$from:i,$to:o}=n,s=t();return 0===i.parentOffset?s.insertContentAt({from:Math.max(i.pos-1,0),to:o.pos},{type:this.name}):(0,r.EG)(n)?s.insertContentAt(o.pos,{type:this.name}):s.insertContent({type:this.name}),s.command((({tr:t,dispatch:e})=>{var n;if(e){const{$to:e}=t.selection,r=e.end();if(e.nodeAfter)e.nodeAfter.isTextblock?t.setSelection(m.Bs.create(t.doc,e.pos+1)):e.nodeAfter.isBlock?t.setSelection(m.qv.create(t.doc,e.pos)):t.setSelection(m.Bs.create(t.doc,e.pos));else{const i=null===(n=e.parent.type.contentMatch.defaultType)||void 0===n?void 0:n.create();i&&(t.insert(r,i),t.setSelection(m.Bs.create(t.doc,r+1)))}t.scrollIntoView()}return!0})).run()}}},addInputRules(){return[(0,r.x2)({find:/^(?:---|\u2014-|___\s|\*\*\*\s)$/,type:this.type})]}}),ot=/(?:^|\s)(\*(?!\s+\*)((?:[^*]+))\*(?!\s+\*))$/,st=/(?:^|\s)(\*(?!\s+\*)((?:[^*]+))\*(?!\s+\*))/g,at=/(?:^|\s)(_(?!\s+_)((?:[^_]+))_(?!\s+_))$/,lt=/(?:^|\s)(_(?!\s+_)((?:[^_]+))_(?!\s+_))/g,ct=r.vc.create({name:"italic",addOptions:()=>({HTMLAttributes:{}}),parseHTML:()=>[{tag:"em"},{tag:"i",getAttrs:t=>"normal"!==t.style.fontStyle&&null},{style:"font-style=italic"}],renderHTML({HTMLAttributes:t}){return["em",(0,r.P1)(this.options.HTMLAttributes,t),0]},addCommands(){return{setItalic:()=>({commands:t})=>t.setMark(this.name),toggleItalic:()=>({commands:t})=>t.toggleMark(this.name),unsetItalic:()=>({commands:t})=>t.unsetMark(this.name)}},addKeyboardShortcuts(){return{"Mod-i":()=>this.editor.commands.toggleItalic(),"Mod-I":()=>this.editor.commands.toggleItalic()}},addInputRules(){return[(0,r.Cf)({find:ot,type:this.type}),(0,r.Cf)({find:at,type:this.type})]},addPasteRules(){return[(0,r.K9)({find:st,type:this.type}),(0,r.K9)({find:lt,type:this.type})]}}),ut=r.NB.create({name:"listItem",addOptions:()=>({HTMLAttributes:{},bulletListTypeName:"bulletList",orderedListTypeName:"orderedList"}),content:"paragraph block*",defining:!0,parseHTML:()=>[{tag:"li"}],renderHTML({HTMLAttributes:t}){return["li",(0,r.P1)(this.options.HTMLAttributes,t),0]},addKeyboardShortcuts(){return{Enter:()=>this.editor.commands.splitListItem(this.name),Tab:()=>this.editor.commands.sinkListItem(this.name),"Shift-Tab":()=>this.editor.commands.liftListItem(this.name)}}});var dt=n(1575);const pt=r.NB.create({name:"paragraph",priority:1e3,addOptions:()=>({HTMLAttributes:{}}),group:"block",content:"inline*",parseHTML:()=>[{tag:"p"}],renderHTML({HTMLAttributes:t}){return["p",(0,r.P1)(this.options.HTMLAttributes,t),0]},addCommands(){return{setParagraph:()=>({commands:t})=>t.setNode(this.name)}},addKeyboardShortcuts(){return{"Mod-Alt-0":()=>this.editor.commands.setParagraph()}}}),ht=/(?:^|\s)(~~(?!\s+~~)((?:[^~]+))~~(?!\s+~~))$/,ft=/(?:^|\s)(~~(?!\s+~~)((?:[^~]+))~~(?!\s+~~))/g,mt=r.vc.create({name:"strike",addOptions:()=>({HTMLAttributes:{}}),parseHTML:()=>[{tag:"s"},{tag:"del"},{tag:"strike"},{style:"text-decoration",consuming:!1,getAttrs:t=>!!t.includes("line-through")&&{}}],renderHTML({HTMLAttributes:t}){return["s",(0,r.P1)(this.options.HTMLAttributes,t),0]},addCommands(){return{setStrike:()=>({commands:t})=>t.setMark(this.name),toggleStrike:()=>({commands:t})=>t.toggleMark(this.name),unsetStrike:()=>({commands:t})=>t.unsetMark(this.name)}},addKeyboardShortcuts(){return{"Mod-Shift-s":()=>this.editor.commands.toggleStrike()}},addInputRules(){return[(0,r.Cf)({find:ht,type:this.type})]},addPasteRules(){return[(0,r.K9)({find:ft,type:this.type})]}}),gt=r.NB.create({name:"text",group:"inline"}),yt=r.hj.create({name:"starterKit",addExtensions(){var t,e,n,r,i,s,a,l,c,p,h,m,g,y,w,x,k,M;const C=[];return!1!==this.options.bold&&C.push(u.configure(null===(t=this.options)||void 0===t?void 0:t.bold)),!1!==this.options.blockquote&&C.push(o.configure(null===(e=this.options)||void 0===e?void 0:e.blockquote)),!1!==this.options.bulletList&&C.push(d.DY.configure(null===(n=this.options)||void 0===n?void 0:n.bulletList)),!1!==this.options.code&&C.push(f.configure(null===(r=this.options)||void 0===r?void 0:r.code)),!1!==this.options.codeBlock&&C.push(v.configure(null===(i=this.options)||void 0===i?void 0:i.codeBlock)),!1!==this.options.document&&C.push(b.configure(null===(s=this.options)||void 0===s?void 0:s.document)),!1!==this.options.dropcursor&&C.push(S.configure(null===(a=this.options)||void 0===a?void 0:a.dropcursor)),!1!==this.options.gapcursor&&C.push(L.configure(null===(l=this.options)||void 0===l?void 0:l.gapcursor)),!1!==this.options.hardBreak&&C.push(F.configure(null===(c=this.options)||void 0===c?void 0:c.hardBreak)),!1!==this.options.heading&&C.push(H.X.configure(null===(p=this.options)||void 0===p?void 0:p.heading)),!1!==this.options.history&&C.push(rt.configure(null===(h=this.options)||void 0===h?void 0:h.history)),!1!==this.options.horizontalRule&&C.push(it.configure(null===(m=this.options)||void 0===m?void 0:m.horizontalRule)),!1!==this.options.italic&&C.push(ct.configure(null===(g=this.options)||void 0===g?void 0:g.italic)),!1!==this.options.listItem&&C.push(ut.configure(null===(y=this.options)||void 0===y?void 0:y.listItem)),!1!==this.options.orderedList&&C.push(dt.GS.configure(null===(w=this.options)||void 0===w?void 0:w.orderedList)),!1!==this.options.paragraph&&C.push(pt.configure(null===(x=this.options)||void 0===x?void 0:x.paragraph)),!1!==this.options.strike&&C.push(mt.configure(null===(k=this.options)||void 0===k?void 0:k.strike)),!1!==this.options.text&&C.push(gt.configure(null===(M=this.options)||void 0===M?void 0:M.text)),C}})},5804:function(t,e,n){n.d(e,{Ig:function(){return w},MI:function(){return b},N0:function(){return E},NE:function(){return s},QK:function(){return k},U9:function(){return R},X0:function(){return A},Y_:function(){return g},_M:function(){return h},al:function(){return l},cR:function(){return u},mD:function(){return C},nw:function(){return D},o:function(){return y},rr:function(){return c},uJ:function(){return F},uo:function(){return M},xb:function(){return x},ym:function(){return L}});var r=n(6560),i=n(2806),o=n(2376);const s=(t,e)=>!t.selection.empty&&(e&&e(t.tr.deleteSelection().scrollIntoView()),!0);function a(t,e){let{$cursor:n}=t.selection;return!n||(e?!e.endOfTextblock("backward",t):n.parentOffset>0)?null:n}const l=(t,e,n)=>{let s=a(t,n);if(!s)return!1;let l=f(s);if(!l){let n=s.blockRange(),i=n&&(0,r.k9)(n);return null!=i&&(e&&e(t.tr.lift(n,i).scrollIntoView()),!0)}let c=l.nodeBefore;if(I(t,l,e,-1))return!0;if(0==s.parent.content.size&&(p(c,"end")||o.qv.isSelectable(c)))for(let a=s.depth;;a--){let n=(0,r.dR)(t.doc,s.before(a),s.after(a),i.p2.empty);if(n&&n.slice.size<n.to-n.from){if(e){let r=t.tr.step(n);r.setSelection(p(c,"end")?o.Y1.findFrom(r.doc.resolve(r.mapping.map(l.pos,-1)),-1):o.qv.create(r.doc,l.pos-c.nodeSize)),e(r.scrollIntoView())}return!0}if(1==a||s.node(a-1).childCount>1)break}return!(!c.isAtom||l.depth!=s.depth-1)&&(e&&e(t.tr.delete(l.pos-c.nodeSize,l.pos).scrollIntoView()),!0)},c=(t,e,n)=>{let r=a(t,n);if(!r)return!1;let i=f(r);return!!i&&d(t,i,e)},u=(t,e,n)=>{let r=m(t,n);if(!r)return!1;let i=v(r);return!!i&&d(t,i,e)};function d(t,e,n){let s=e.nodeBefore,a=e.pos-1;for(;!s.isTextblock;a--){if(s.type.spec.isolating)return!1;let t=s.lastChild;if(!t)return!1;s=t}let l=e.nodeAfter,c=e.pos+1;for(;!l.isTextblock;c++){if(l.type.spec.isolating)return!1;let t=l.firstChild;if(!t)return!1;l=t}let u=(0,r.dR)(t.doc,a,c,i.p2.empty);if(!u||u.from!=a||u instanceof r.Pu&&u.slice.size>=c-a)return!1;if(n){let e=t.tr.step(u);e.setSelection(o.Bs.create(e.doc,a)),n(e.scrollIntoView())}return!0}function p(t,e,n=!1){for(let r=t;r;r="start"==e?r.firstChild:r.lastChild){if(r.isTextblock)return!0;if(n&&1!=r.childCount)return!1}return!1}const h=(t,e,n)=>{let{$head:r,empty:i}=t.selection,s=r;if(!i)return!1;if(r.parent.isTextblock){if(n?!n.endOfTextblock("backward",t):r.parentOffset>0)return!1;s=f(r)}let a=s&&s.nodeBefore;return!(!a||!o.qv.isSelectable(a))&&(e&&e(t.tr.setSelection(o.qv.create(t.doc,s.pos-a.nodeSize)).scrollIntoView()),!0)};function f(t){if(!t.parent.type.spec.isolating)for(let e=t.depth-1;e>=0;e--){if(t.index(e)>0)return t.doc.resolve(t.before(e+1));if(t.node(e).type.spec.isolating)break}return null}function m(t,e){let{$cursor:n}=t.selection;return!n||(e?!e.endOfTextblock("forward",t):n.parentOffset<n.parent.content.size)?null:n}const g=(t,e,n)=>{let s=m(t,n);if(!s)return!1;let a=v(s);if(!a)return!1;let l=a.nodeAfter;if(I(t,a,e,1))return!0;if(0==s.parent.content.size&&(p(l,"start")||o.qv.isSelectable(l))){let n=(0,r.dR)(t.doc,s.before(),s.after(),i.p2.empty);if(n&&n.slice.size<n.to-n.from){if(e){let r=t.tr.step(n);r.setSelection(p(l,"start")?o.Y1.findFrom(r.doc.resolve(r.mapping.map(a.pos)),1):o.qv.create(r.doc,r.mapping.map(a.pos))),e(r.scrollIntoView())}return!0}}return!(!l.isAtom||a.depth!=s.depth-1)&&(e&&e(t.tr.delete(a.pos,a.pos+l.nodeSize).scrollIntoView()),!0)},y=(t,e,n)=>{let{$head:r,empty:i}=t.selection,s=r;if(!i)return!1;if(r.parent.isTextblock){if(n?!n.endOfTextblock("forward",t):r.parentOffset<r.parent.content.size)return!1;s=v(r)}let a=s&&s.nodeAfter;return!(!a||!o.qv.isSelectable(a))&&(e&&e(t.tr.setSelection(o.qv.create(t.doc,s.pos)).scrollIntoView()),!0)};function v(t){if(!t.parent.type.spec.isolating)for(let e=t.depth-1;e>=0;e--){let n=t.node(e);if(t.index(e)+1<n.childCount)return t.doc.resolve(t.after(e+1));if(n.type.spec.isolating)break}return null}const b=(t,e)=>{let n,i=t.selection,s=i instanceof o.qv;if(s){if(i.node.isTextblock||!(0,r.Mn)(t.doc,i.from))return!1;n=i.from}else if(n=(0,r.GJ)(t.doc,i.from,-1),null==n)return!1;if(e){let r=t.tr.join(n);s&&r.setSelection(o.qv.create(r.doc,n-t.doc.resolve(n).nodeBefore.nodeSize)),e(r.scrollIntoView())}return!0},w=(t,e)=>{let n,i=t.selection;if(i instanceof o.qv){if(i.node.isTextblock||!(0,r.Mn)(t.doc,i.to))return!1;n=i.to}else if(n=(0,r.GJ)(t.doc,i.to,1),null==n)return!1;return e&&e(t.tr.join(n).scrollIntoView()),!0},x=(t,e)=>{let{$from:n,$to:i}=t.selection,o=n.blockRange(i),s=o&&(0,r.k9)(o);return null!=s&&(e&&e(t.tr.lift(o,s).scrollIntoView()),!0)},k=(t,e)=>{let{$head:n,$anchor:r}=t.selection;return!(!n.parent.type.spec.code||!n.sameParent(r))&&(e&&e(t.tr.insertText("\n").scrollIntoView()),!0)};function S(t){for(let e=0;e<t.edgeCount;e++){let{type:n}=t.edge(e);if(n.isTextblock&&!n.hasRequiredAttrs())return n}return null}const M=(t,e)=>{let{$head:n,$anchor:r}=t.selection;if(!n.parent.type.spec.code||!n.sameParent(r))return!1;let i=n.node(-1),s=n.indexAfter(-1),a=S(i.contentMatchAt(s));if(!a||!i.canReplaceWith(s,s,a))return!1;if(e){let r=n.after(),i=t.tr.replaceWith(r,r,a.createAndFill());i.setSelection(o.Y1.near(i.doc.resolve(r),1)),e(i.scrollIntoView())}return!0},C=(t,e)=>{let n=t.selection,{$from:r,$to:i}=n;if(n instanceof o.C1||r.parent.inlineContent||i.parent.inlineContent)return!1;let s=S(i.parent.contentMatchAt(i.indexAfter()));if(!s||!s.isTextblock)return!1;if(e){let n=(!r.parentOffset&&i.index()<i.parent.childCount?r:i).pos,a=t.tr.insert(n,s.createAndFill());a.setSelection(o.Bs.create(a.doc,n+1)),e(a.scrollIntoView())}return!0},A=(t,e)=>{let{$cursor:n}=t.selection;if(!n||n.parent.content.size)return!1;if(n.depth>1&&n.after()!=n.end(-1)){let i=n.before();if((0,r.Ax)(t.doc,i))return e&&e(t.tr.split(i).scrollIntoView()),!0}let i=n.blockRange(),o=i&&(0,r.k9)(i);return null!=o&&(e&&e(t.tr.lift(i,o).scrollIntoView()),!0)};const T=(t,e)=>{let{$from:n,$to:i}=t.selection;if(t.selection instanceof o.qv&&t.selection.node.isBlock)return!(!n.parentOffset||!(0,r.Ax)(t.doc,n.pos))&&(e&&e(t.tr.split(n.pos).scrollIntoView()),!0);if(!n.parent.isBlock)return!1;if(e){let s=i.parentOffset==i.parent.content.size,a=t.tr;(t.selection instanceof o.Bs||t.selection instanceof o.C1)&&a.deleteSelection();let l=0==n.depth?null:S(n.node(-1).contentMatchAt(n.indexAfter(-1))),c=O&&O(i.parent,s,n),u=c?[c]:s&&l?[{type:l}]:void 0,d=(0,r.Ax)(a.doc,a.mapping.map(n.pos),1,u);if(u||d||!(0,r.Ax)(a.doc,a.mapping.map(n.pos),1,l?[{type:l}]:void 0)||(l&&(u=[{type:l}]),d=!0),d&&(a.split(a.mapping.map(n.pos),1,u),!s&&!n.parentOffset&&n.parent.type!=l)){let t=a.mapping.map(n.before()),e=a.doc.resolve(t);l&&n.node(-1).canReplaceWith(e.index(),e.index()+1,l)&&a.setNodeMarkup(a.mapping.map(n.before()),l)}e(a.scrollIntoView())}return!0};var O;const E=(t,e)=>{let n,{$from:r,to:i}=t.selection,s=r.sharedDepth(i);return 0!=s&&(n=r.before(s),e&&e(t.tr.setSelection(o.qv.create(t.doc,n))),!0)};function I(t,e,n,s){let a,l,c=e.nodeBefore,u=e.nodeAfter,d=c.type.spec.isolating||u.type.spec.isolating;if(!d&&function(t,e,n){let i=e.nodeBefore,o=e.nodeAfter,s=e.index();return!!(i&&o&&i.type.compatibleContent(o.type))&&(!i.content.size&&e.parent.canReplace(s-1,s)?(n&&n(t.tr.delete(e.pos-i.nodeSize,e.pos).scrollIntoView()),!0):!(!e.parent.canReplace(s,s+1)||!o.isTextblock&&!(0,r.Mn)(t.doc,e.pos))&&(n&&n(t.tr.clearIncompatible(e.pos,i.type,i.contentMatchAt(i.childCount)).join(e.pos).scrollIntoView()),!0))}(t,e,n))return!0;let h=!d&&e.parent.canReplace(e.index(),e.index()+1);if(h&&(a=(l=c.contentMatchAt(c.childCount)).findWrapping(u.type))&&l.matchType(a[0]||u.type).validEnd){if(n){let o=e.pos+u.nodeSize,s=i.HY.empty;for(let t=a.length-1;t>=0;t--)s=i.HY.from(a[t].create(null,s));s=i.HY.from(c.copy(s));let l=t.tr.step(new r.FC(e.pos-1,o,e.pos,o,new i.p2(s,1,0),a.length,!0)),d=o+2*a.length;(0,r.Mn)(l.doc,d)&&l.join(d),n(l.scrollIntoView())}return!0}let f=u.type.spec.isolating||s>0&&d?null:o.Y1.findFrom(e,1),m=f&&f.$from.blockRange(f.$to),g=m&&(0,r.k9)(m);if(null!=g&&g>=e.depth)return n&&n(t.tr.lift(m,g).scrollIntoView()),!0;if(h&&p(u,"start",!0)&&p(c,"end")){let o=c,s=[];for(;s.push(o),!o.isTextblock;)o=o.lastChild;let a=u,l=1;for(;!a.isTextblock;a=a.firstChild)l++;if(o.canReplace(o.childCount,o.childCount,a.content)){if(n){let o=i.HY.empty;for(let t=s.length-1;t>=0;t--)o=i.HY.from(s[t].copy(o));n(t.tr.step(new r.FC(e.pos-s.length,e.pos+u.nodeSize,e.pos+l,e.pos+u.nodeSize-l,new i.p2(o,s.length,0),0,!0)).scrollIntoView())}return!0}}return!1}function N(t){return function(e,n){let r=e.selection,i=t<0?r.$from:r.$to,s=i.depth;for(;i.node(s).isInline;){if(!s)return!1;s--}return!!i.node(s).isTextblock&&(n&&n(e.tr.setSelection(o.Bs.create(e.doc,t<0?i.start(s):i.end(s)))),!0)}}const R=N(-1),D=N(1);function L(t,e=null){return function(n,i){let{$from:o,$to:s}=n.selection,a=o.blockRange(s),l=a&&(0,r.nd)(a,t,e);return!!l&&(i&&i(n.tr.wrap(a,l).scrollIntoView()),!0)}}function F(t,e=null){return function(n,r){let i=!1;for(let o=0;o<n.selection.ranges.length&&!i;o++){let{$from:{pos:r},$to:{pos:s}}=n.selection.ranges[o];n.doc.nodesBetween(r,s,((r,o)=>{if(i)return!1;if(r.isTextblock&&!r.hasMarkup(t,e))if(r.type==t)i=!0;else{let e=n.doc.resolve(o),r=e.index();i=e.parent.canReplaceWith(r,r+1,t)}}))}if(!i)return!1;if(r){let i=n.tr;for(let r=0;r<n.selection.ranges.length;r++){let{$from:{pos:o},$to:{pos:s}}=n.selection.ranges[r];i.setBlockType(o,s,t,e)}r(i.scrollIntoView())}return!0}}function H(...t){return function(e,n,r){for(let i=0;i<t.length;i++)if(t[i](e,n,r))return!0;return!1}}let _=H(s,l,h),B=H(s,g,y);const V={Enter:H(k,C,A,T),"Mod-Enter":M,Backspace:_,"Mod-Backspace":_,"Shift-Backspace":_,Delete:B,"Mod-Delete":B,"Mod-a":(t,e)=>(e&&e(t.tr.setSelection(new o.C1(t.doc))),!0)},z={"Ctrl-h":V.Backspace,"Alt-Backspace":V["Mod-Backspace"],"Ctrl-d":V.Delete,"Ctrl-Alt-Backspace":V["Mod-Delete"],"Alt-Delete":V["Mod-Delete"],"Alt-d":V["Mod-Delete"],"Ctrl-a":R,"Ctrl-e":D};for(let $ in V)z[$]=V[$];"undefined"!=typeof navigator?/Mac|iP(hone|[oa]d)/.test(navigator.platform):!("undefined"==typeof os||!os.platform)&&os.platform()},2696:function(t,e,n){n.d(e,{$:function(){return f},h:function(){return h}});for(var r={8:"Backspace",9:"Tab",10:"Enter",12:"NumLock",13:"Enter",16:"Shift",17:"Control",18:"Alt",20:"CapsLock",27:"Escape",32:" ",33:"PageUp",34:"PageDown",35:"End",36:"Home",37:"ArrowLeft",38:"ArrowUp",39:"ArrowRight",40:"ArrowDown",44:"PrintScreen",45:"Insert",46:"Delete",59:";",61:"=",91:"Meta",92:"Meta",106:"*",107:"+",108:",",109:"-",110:".",111:"/",144:"NumLock",145:"ScrollLock",160:"Shift",161:"Shift",162:"Control",163:"Control",164:"Alt",165:"Alt",173:"-",186:";",187:"=",188:",",189:"-",190:".",191:"/",192:"`",219:"[",220:"\\",221:"]",222:"'"},i={48:")",49:"!",50:"@",51:"#",52:"$",53:"%",54:"^",55:"&",56:"*",57:"(",59:":",61:"+",173:"_",186:":",187:"+",188:"<",189:"_",190:">",191:"?",192:"~",219:"{",220:"|",221:"}",222:'"'},o="undefined"!=typeof navigator&&/Mac/.test(navigator.platform),s="undefined"!=typeof navigator&&/MSIE \d|Trident\/(?:[7-9]|\d{2,})\..*rv:(\d+)/.exec(navigator.userAgent),a=0;a<10;a++)r[48+a]=r[96+a]=String(a);for(a=1;a<=24;a++)r[a+111]="F"+a;for(a=65;a<=90;a++)r[a]=String.fromCharCode(a+32),i[a]=String.fromCharCode(a);for(var l in r)i.hasOwnProperty(l)||(i[l]=r[l]);var c=n(2376);const u="undefined"!=typeof navigator&&/Mac|iP(hone|[oa]d)/.test(navigator.platform);function d(t){let e,n,r,i,o=t.split(/-(?!$)/),s=o[o.length-1];"Space"==s&&(s=" ");for(let a=0;a<o.length-1;a++){let t=o[a];if(/^(cmd|meta|m)$/i.test(t))i=!0;else if(/^a(lt)?$/i.test(t))e=!0;else if(/^(c|ctrl|control)$/i.test(t))n=!0;else if(/^s(hift)?$/i.test(t))r=!0;else{if(!/^mod$/i.test(t))throw new Error("Unrecognized modifier name: "+t);u?i=!0:n=!0}}return e&&(s="Alt-"+s),n&&(s="Ctrl-"+s),i&&(s="Meta-"+s),r&&(s="Shift-"+s),s}function p(t,e,n=!0){return e.altKey&&(t="Alt-"+t),e.ctrlKey&&(t="Ctrl-"+t),e.metaKey&&(t="Meta-"+t),n&&e.shiftKey&&(t="Shift-"+t),t}function h(t){return new c.Sy({props:{handleKeyDown:f(t)}})}function f(t){let e=function(t){let e=Object.create(null);for(let n in t)e[d(n)]=t[n];return e}(t);return function(t,n){let a,l=function(t){var e=!(o&&t.metaKey&&t.shiftKey&&!t.ctrlKey&&!t.altKey||s&&t.shiftKey&&t.key&&1==t.key.length||"Unidentified"==t.key)&&t.key||(t.shiftKey?i:r)[t.keyCode]||t.key||"Unidentified";return"Esc"==e&&(e="Escape"),"Del"==e&&(e="Delete"),"Left"==e&&(e="ArrowLeft"),"Up"==e&&(e="ArrowUp"),"Right"==e&&(e="ArrowRight"),"Down"==e&&(e="ArrowDown"),e}(n),c=e[p(l,n)];if(c&&c(t.state,t.dispatch,t))return!0;if(1==l.length&&" "!=l){if(n.shiftKey){let r=e[p(l,n,!1)];if(r&&r(t.state,t.dispatch,t))return!0}if((n.shiftKey||n.altKey||n.metaKey||l.charCodeAt(0)>127)&&(a=r[n.keyCode])&&a!=l){let r=e[p(a,n)];if(r&&r(t.state,t.dispatch,t))return!0}}return!1}}},2806:function(t,e,n){function r(t){this.content=t}n.d(e,{aw:function(){return Z},PW:function(){return lt},HY:function(){return a},vc:function(){return d},ZU:function(){return K},NB:function(){return N},Ts:function(){return E},e4:function(){return p},V_:function(){return G},p2:function(){return h}}),r.prototype={constructor:r,find:function(t){for(var e=0;e<this.content.length;e+=2)if(this.content[e]===t)return e;return-1},get:function(t){var e=this.find(t);return-1==e?void 0:this.content[e+1]},update:function(t,e,n){var i=n&&n!=t?this.remove(n):this,o=i.find(t),s=i.content.slice();return-1==o?s.push(n||t,e):(s[o+1]=e,n&&(s[o]=n)),new r(s)},remove:function(t){var e=this.find(t);if(-1==e)return this;var n=this.content.slice();return n.splice(e,2),new r(n)},addToStart:function(t,e){return new r([t,e].concat(this.remove(t).content))},addToEnd:function(t,e){var n=this.remove(t).content.slice();return n.push(t,e),new r(n)},addBefore:function(t,e,n){var i=this.remove(e),o=i.content.slice(),s=i.find(t);return o.splice(-1==s?o.length:s,0,e,n),new r(o)},forEach:function(t){for(var e=0;e<this.content.length;e+=2)t(this.content[e],this.content[e+1])},prepend:function(t){return(t=r.from(t)).size?new r(t.content.concat(this.subtract(t).content)):this},append:function(t){return(t=r.from(t)).size?new r(this.subtract(t).content.concat(t.content)):this},subtract:function(t){var e=this;t=r.from(t);for(var n=0;n<t.content.length;n+=2)e=e.remove(t.content[n]);return e},toObject:function(){var t={};return this.forEach((function(e,n){t[e]=n})),t},get size(){return this.content.length>>1}},r.from=function(t){if(t instanceof r)return t;var e=[];if(t)for(var n in t)e.push(n,t[n]);return new r(e)};var i=r;function o(t,e,n){for(let r=0;;r++){if(r==t.childCount||r==e.childCount)return t.childCount==e.childCount?null:n;let i=t.child(r),s=e.child(r);if(i!=s){if(!i.sameMarkup(s))return n;if(i.isText&&i.text!=s.text){for(let t=0;i.text[t]==s.text[t];t++)n++;return n}if(i.content.size||s.content.size){let t=o(i.content,s.content,n+1);if(null!=t)return t}n+=i.nodeSize}else n+=i.nodeSize}}function s(t,e,n,r){for(let i=t.childCount,o=e.childCount;;){if(0==i||0==o)return i==o?null:{a:n,b:r};let a=t.child(--i),l=e.child(--o),c=a.nodeSize;if(a!=l){if(!a.sameMarkup(l))return{a:n,b:r};if(a.isText&&a.text!=l.text){let t=0,e=Math.min(a.text.length,l.text.length);for(;t<e&&a.text[a.text.length-t-1]==l.text[l.text.length-t-1];)t++,n--,r--;return{a:n,b:r}}if(a.content.size||l.content.size){let t=s(a.content,l.content,n-1,r-1);if(t)return t}n-=c,r-=c}else n-=c,r-=c}}class a{constructor(t,e){if(this.content=t,this.size=e||0,null==e)for(let n=0;n<t.length;n++)this.size+=t[n].nodeSize}nodesBetween(t,e,n,r=0,i){for(let o=0,s=0;s<e;o++){let a=this.content[o],l=s+a.nodeSize;if(l>t&&!1!==n(a,r+s,i||null,o)&&a.content.size){let i=s+1;a.nodesBetween(Math.max(0,t-i),Math.min(a.content.size,e-i),n,r+i)}s=l}}descendants(t){this.nodesBetween(0,this.size,t)}textBetween(t,e,n,r){let i="",o=!0;return this.nodesBetween(t,e,((s,a)=>{let l=s.isText?s.text.slice(Math.max(t,a)-a,e-a):s.isLeaf?r?"function"===typeof r?r(s):r:s.type.spec.leafText?s.type.spec.leafText(s):"":"";s.isBlock&&(s.isLeaf&&l||s.isTextblock)&&n&&(o?o=!1:i+=n),i+=l}),0),i}append(t){if(!t.size)return this;if(!this.size)return t;let e=this.lastChild,n=t.firstChild,r=this.content.slice(),i=0;for(e.isText&&e.sameMarkup(n)&&(r[r.length-1]=e.withText(e.text+n.text),i=1);i<t.content.length;i++)r.push(t.content[i]);return new a(r,this.size+t.size)}cut(t,e=this.size){if(0==t&&e==this.size)return this;let n=[],r=0;if(e>t)for(let i=0,o=0;o<e;i++){let s=this.content[i],a=o+s.nodeSize;a>t&&((o<t||a>e)&&(s=s.isText?s.cut(Math.max(0,t-o),Math.min(s.text.length,e-o)):s.cut(Math.max(0,t-o-1),Math.min(s.content.size,e-o-1))),n.push(s),r+=s.nodeSize),o=a}return new a(n,r)}cutByIndex(t,e){return t==e?a.empty:0==t&&e==this.content.length?this:new a(this.content.slice(t,e))}replaceChild(t,e){let n=this.content[t];if(n==e)return this;let r=this.content.slice(),i=this.size+e.nodeSize-n.nodeSize;return r[t]=e,new a(r,i)}addToStart(t){return new a([t].concat(this.content),this.size+t.nodeSize)}addToEnd(t){return new a(this.content.concat(t),this.size+t.nodeSize)}eq(t){if(this.content.length!=t.content.length)return!1;for(let e=0;e<this.content.length;e++)if(!this.content[e].eq(t.content[e]))return!1;return!0}get firstChild(){return this.content.length?this.content[0]:null}get lastChild(){return this.content.length?this.content[this.content.length-1]:null}get childCount(){return this.content.length}child(t){let e=this.content[t];if(!e)throw new RangeError("Index "+t+" out of range for "+this);return e}maybeChild(t){return this.content[t]||null}forEach(t){for(let e=0,n=0;e<this.content.length;e++){let r=this.content[e];t(r,n,e),n+=r.nodeSize}}findDiffStart(t,e=0){return o(this,t,e)}findDiffEnd(t,e=this.size,n=t.size){return s(this,t,e,n)}findIndex(t,e=-1){if(0==t)return c(0,t);if(t==this.size)return c(this.content.length,t);if(t>this.size||t<0)throw new RangeError(`Position ${t} outside of fragment (${this})`);for(let n=0,r=0;;n++){let i=r+this.child(n).nodeSize;if(i>=t)return i==t||e>0?c(n+1,i):c(n,r);r=i}}toString(){return"<"+this.toStringInner()+">"}toStringInner(){return this.content.join(", ")}toJSON(){return this.content.length?this.content.map((t=>t.toJSON())):null}static fromJSON(t,e){if(!e)return a.empty;if(!Array.isArray(e))throw new RangeError("Invalid input for Fragment.fromJSON");return new a(e.map(t.nodeFromJSON))}static fromArray(t){if(!t.length)return a.empty;let e,n=0;for(let r=0;r<t.length;r++){let i=t[r];n+=i.nodeSize,r&&i.isText&&t[r-1].sameMarkup(i)?(e||(e=t.slice(0,r)),e[e.length-1]=i.withText(e[e.length-1].text+i.text)):e&&e.push(i)}return new a(e||t,n)}static from(t){if(!t)return a.empty;if(t instanceof a)return t;if(Array.isArray(t))return this.fromArray(t);if(t.attrs)return new a([t],t.nodeSize);throw new RangeError("Can not convert "+t+" to a Fragment"+(t.nodesBetween?" (looks like multiple versions of prosemirror-model were loaded)":""))}}a.empty=new a([],0);const l={index:0,offset:0};function c(t,e){return l.index=t,l.offset=e,l}function u(t,e){if(t===e)return!0;if(!t||"object"!=typeof t||!e||"object"!=typeof e)return!1;let n=Array.isArray(t);if(Array.isArray(e)!=n)return!1;if(n){if(t.length!=e.length)return!1;for(let n=0;n<t.length;n++)if(!u(t[n],e[n]))return!1}else{for(let n in t)if(!(n in e)||!u(t[n],e[n]))return!1;for(let n in e)if(!(n in t))return!1}return!0}class d{constructor(t,e){this.type=t,this.attrs=e}addToSet(t){let e,n=!1;for(let r=0;r<t.length;r++){let i=t[r];if(this.eq(i))return t;if(this.type.excludes(i.type))e||(e=t.slice(0,r));else{if(i.type.excludes(this.type))return t;!n&&i.type.rank>this.type.rank&&(e||(e=t.slice(0,r)),e.push(this),n=!0),e&&e.push(i)}}return e||(e=t.slice()),n||e.push(this),e}removeFromSet(t){for(let e=0;e<t.length;e++)if(this.eq(t[e]))return t.slice(0,e).concat(t.slice(e+1));return t}isInSet(t){for(let e=0;e<t.length;e++)if(this.eq(t[e]))return!0;return!1}eq(t){return this==t||this.type==t.type&&u(this.attrs,t.attrs)}toJSON(){let t={type:this.type.name};for(let e in this.attrs){t.attrs=this.attrs;break}return t}static fromJSON(t,e){if(!e)throw new RangeError("Invalid input for Mark.fromJSON");let n=t.marks[e.type];if(!n)throw new RangeError(`There is no mark type ${e.type} in this schema`);let r=n.create(e.attrs);return n.checkAttrs(r.attrs),r}static sameSet(t,e){if(t==e)return!0;if(t.length!=e.length)return!1;for(let n=0;n<t.length;n++)if(!t[n].eq(e[n]))return!1;return!0}static setFrom(t){if(!t||Array.isArray(t)&&0==t.length)return d.none;if(t instanceof d)return[t];let e=t.slice();return e.sort(((t,e)=>t.type.rank-e.type.rank)),e}}d.none=[];class p extends Error{}class h{constructor(t,e,n){this.content=t,this.openStart=e,this.openEnd=n}get size(){return this.content.size-this.openStart-this.openEnd}insertAt(t,e){let n=m(this.content,t+this.openStart,e);return n&&new h(n,this.openStart,this.openEnd)}removeBetween(t,e){return new h(f(this.content,t+this.openStart,e+this.openStart),this.openStart,this.openEnd)}eq(t){return this.content.eq(t.content)&&this.openStart==t.openStart&&this.openEnd==t.openEnd}toString(){return this.content+"("+this.openStart+","+this.openEnd+")"}toJSON(){if(!this.content.size)return null;let t={content:this.content.toJSON()};return this.openStart>0&&(t.openStart=this.openStart),this.openEnd>0&&(t.openEnd=this.openEnd),t}static fromJSON(t,e){if(!e)return h.empty;let n=e.openStart||0,r=e.openEnd||0;if("number"!=typeof n||"number"!=typeof r)throw new RangeError("Invalid input for Slice.fromJSON");return new h(a.fromJSON(t,e.content),n,r)}static maxOpen(t,e=!0){let n=0,r=0;for(let i=t.firstChild;i&&!i.isLeaf&&(e||!i.type.spec.isolating);i=i.firstChild)n++;for(let i=t.lastChild;i&&!i.isLeaf&&(e||!i.type.spec.isolating);i=i.lastChild)r++;return new h(t,n,r)}}function f(t,e,n){let{index:r,offset:i}=t.findIndex(e),o=t.maybeChild(r),{index:s,offset:a}=t.findIndex(n);if(i==e||o.isText){if(a!=n&&!t.child(s).isText)throw new RangeError("Removing non-flat range");return t.cut(0,e).append(t.cut(n))}if(r!=s)throw new RangeError("Removing non-flat range");return t.replaceChild(r,o.copy(f(o.content,e-i-1,n-i-1)))}function m(t,e,n,r){let{index:i,offset:o}=t.findIndex(e),s=t.maybeChild(i);if(o==e||s.isText)return r&&!r.canReplace(i,i,n)?null:t.cut(0,e).append(n).append(t.cut(e));let a=m(s.content,e-o-1,n);return a&&t.replaceChild(i,s.copy(a))}function g(t,e,n){if(n.openStart>t.depth)throw new p("Inserted content deeper than insertion position");if(t.depth-n.openStart!=e.depth-n.openEnd)throw new p("Inconsistent open depths");return y(t,e,n,0)}function y(t,e,n,r){let i=t.index(r),o=t.node(r);if(i==e.index(r)&&r<t.depth-n.openStart){let s=y(t,e,n,r+1);return o.copy(o.content.replaceChild(i,s))}if(n.content.size){if(n.openStart||n.openEnd||t.depth!=r||e.depth!=r){let{start:i,end:s}=function(t,e){let n=e.depth-t.openStart,r=e.node(n).copy(t.content);for(let i=n-1;i>=0;i--)r=e.node(i).copy(a.from(r));return{start:r.resolveNoCache(t.openStart+n),end:r.resolveNoCache(r.content.size-t.openEnd-n)}}(n,t);return k(o,S(t,i,s,e,r))}{let r=t.parent,i=r.content;return k(r,i.cut(0,t.parentOffset).append(n.content).append(i.cut(e.parentOffset)))}}return k(o,M(t,e,r))}function v(t,e){if(!e.type.compatibleContent(t.type))throw new p("Cannot join "+e.type.name+" onto "+t.type.name)}function b(t,e,n){let r=t.node(n);return v(r,e.node(n)),r}function w(t,e){let n=e.length-1;n>=0&&t.isText&&t.sameMarkup(e[n])?e[n]=t.withText(e[n].text+t.text):e.push(t)}function x(t,e,n,r){let i=(e||t).node(n),o=0,s=e?e.index(n):i.childCount;t&&(o=t.index(n),t.depth>n?o++:t.textOffset&&(w(t.nodeAfter,r),o++));for(let a=o;a<s;a++)w(i.child(a),r);e&&e.depth==n&&e.textOffset&&w(e.nodeBefore,r)}function k(t,e){return t.type.checkContent(e),t.copy(e)}function S(t,e,n,r,i){let o=t.depth>i&&b(t,e,i+1),s=r.depth>i&&b(n,r,i+1),l=[];return x(null,t,i,l),o&&s&&e.index(i)==n.index(i)?(v(o,s),w(k(o,S(t,e,n,r,i+1)),l)):(o&&w(k(o,M(t,e,i+1)),l),x(e,n,i,l),s&&w(k(s,M(n,r,i+1)),l)),x(r,null,i,l),new a(l)}function M(t,e,n){let r=[];if(x(null,t,n,r),t.depth>n){w(k(b(t,e,n+1),M(t,e,n+1)),r)}return x(e,null,n,r),new a(r)}h.empty=new h(a.empty,0,0);class C{constructor(t,e,n){this.pos=t,this.path=e,this.parentOffset=n,this.depth=e.length/3-1}resolveDepth(t){return null==t?this.depth:t<0?this.depth+t:t}get parent(){return this.node(this.depth)}get doc(){return this.node(0)}node(t){return this.path[3*this.resolveDepth(t)]}index(t){return this.path[3*this.resolveDepth(t)+1]}indexAfter(t){return t=this.resolveDepth(t),this.index(t)+(t!=this.depth||this.textOffset?1:0)}start(t){return 0==(t=this.resolveDepth(t))?0:this.path[3*t-1]+1}end(t){return t=this.resolveDepth(t),this.start(t)+this.node(t).content.size}before(t){if(!(t=this.resolveDepth(t)))throw new RangeError("There is no position before the top-level node");return t==this.depth+1?this.pos:this.path[3*t-1]}after(t){if(!(t=this.resolveDepth(t)))throw new RangeError("There is no position after the top-level node");return t==this.depth+1?this.pos:this.path[3*t-1]+this.path[3*t].nodeSize}get textOffset(){return this.pos-this.path[this.path.length-1]}get nodeAfter(){let t=this.parent,e=this.index(this.depth);if(e==t.childCount)return null;let n=this.pos-this.path[this.path.length-1],r=t.child(e);return n?t.child(e).cut(n):r}get nodeBefore(){let t=this.index(this.depth),e=this.pos-this.path[this.path.length-1];return e?this.parent.child(t).cut(0,e):0==t?null:this.parent.child(t-1)}posAtIndex(t,e){e=this.resolveDepth(e);let n=this.path[3*e],r=0==e?0:this.path[3*e-1]+1;for(let i=0;i<t;i++)r+=n.child(i).nodeSize;return r}marks(){let t=this.parent,e=this.index();if(0==t.content.size)return d.none;if(this.textOffset)return t.child(e).marks;let n=t.maybeChild(e-1),r=t.maybeChild(e);if(!n){let t=n;n=r,r=t}let i=n.marks;for(var o=0;o<i.length;o++)!1!==i[o].type.spec.inclusive||r&&i[o].isInSet(r.marks)||(i=i[o--].removeFromSet(i));return i}marksAcross(t){let e=this.parent.maybeChild(this.index());if(!e||!e.isInline)return null;let n=e.marks,r=t.parent.maybeChild(t.index());for(var i=0;i<n.length;i++)!1!==n[i].type.spec.inclusive||r&&n[i].isInSet(r.marks)||(n=n[i--].removeFromSet(n));return n}sharedDepth(t){for(let e=this.depth;e>0;e--)if(this.start(e)<=t&&this.end(e)>=t)return e;return 0}blockRange(t=this,e){if(t.pos<this.pos)return t.blockRange(this);for(let n=this.depth-(this.parent.inlineContent||this.pos==t.pos?1:0);n>=0;n--)if(t.pos<=this.end(n)&&(!e||e(this.node(n))))return new E(this,t,n);return null}sameParent(t){return this.pos-this.parentOffset==t.pos-t.parentOffset}max(t){return t.pos>this.pos?t:this}min(t){return t.pos<this.pos?t:this}toString(){let t="";for(let e=1;e<=this.depth;e++)t+=(t?"/":"")+this.node(e).type.name+"_"+this.index(e-1);return t+":"+this.parentOffset}static resolve(t,e){if(!(e>=0&&e<=t.content.size))throw new RangeError("Position "+e+" out of range");let n=[],r=0,i=e;for(let o=t;;){let{index:t,offset:e}=o.content.findIndex(i),s=i-e;if(n.push(o,t,r+e),!s)break;if(o=o.child(t),o.isText)break;i=s-1,r+=e+1}return new C(e,n,i)}static resolveCached(t,e){let n=O.get(t);if(n)for(let i=0;i<n.elts.length;i++){let t=n.elts[i];if(t.pos==e)return t}else O.set(t,n=new A);let r=n.elts[n.i]=C.resolve(t,e);return n.i=(n.i+1)%T,r}}class A{constructor(){this.elts=[],this.i=0}}const T=12,O=new WeakMap;class E{constructor(t,e,n){this.$from=t,this.$to=e,this.depth=n}get start(){return this.$from.before(this.depth+1)}get end(){return this.$to.after(this.depth+1)}get parent(){return this.$from.node(this.depth)}get startIndex(){return this.$from.index(this.depth)}get endIndex(){return this.$to.indexAfter(this.depth)}}const I=Object.create(null);class N{constructor(t,e,n,r=d.none){this.type=t,this.attrs=e,this.marks=r,this.content=n||a.empty}get nodeSize(){return this.isLeaf?1:2+this.content.size}get childCount(){return this.content.childCount}child(t){return this.content.child(t)}maybeChild(t){return this.content.maybeChild(t)}forEach(t){this.content.forEach(t)}nodesBetween(t,e,n,r=0){this.content.nodesBetween(t,e,n,r,this)}descendants(t){this.nodesBetween(0,this.content.size,t)}get textContent(){return this.isLeaf&&this.type.spec.leafText?this.type.spec.leafText(this):this.textBetween(0,this.content.size,"")}textBetween(t,e,n,r){return this.content.textBetween(t,e,n,r)}get firstChild(){return this.content.firstChild}get lastChild(){return this.content.lastChild}eq(t){return this==t||this.sameMarkup(t)&&this.content.eq(t.content)}sameMarkup(t){return this.hasMarkup(t.type,t.attrs,t.marks)}hasMarkup(t,e,n){return this.type==t&&u(this.attrs,e||t.defaultAttrs||I)&&d.sameSet(this.marks,n||d.none)}copy(t=null){return t==this.content?this:new N(this.type,this.attrs,t,this.marks)}mark(t){return t==this.marks?this:new N(this.type,this.attrs,this.content,t)}cut(t,e=this.content.size){return 0==t&&e==this.content.size?this:this.copy(this.content.cut(t,e))}slice(t,e=this.content.size,n=!1){if(t==e)return h.empty;let r=this.resolve(t),i=this.resolve(e),o=n?0:r.sharedDepth(e),s=r.start(o),a=r.node(o).content.cut(r.pos-s,i.pos-s);return new h(a,r.depth-o,i.depth-o)}replace(t,e,n){return g(this.resolve(t),this.resolve(e),n)}nodeAt(t){for(let e=this;;){let{index:n,offset:r}=e.content.findIndex(t);if(e=e.maybeChild(n),!e)return null;if(r==t||e.isText)return e;t-=r+1}}childAfter(t){let{index:e,offset:n}=this.content.findIndex(t);return{node:this.content.maybeChild(e),index:e,offset:n}}childBefore(t){if(0==t)return{node:null,index:0,offset:0};let{index:e,offset:n}=this.content.findIndex(t);if(n<t)return{node:this.content.child(e),index:e,offset:n};let r=this.content.child(e-1);return{node:r,index:e-1,offset:n-r.nodeSize}}resolve(t){return C.resolveCached(this,t)}resolveNoCache(t){return C.resolve(this,t)}rangeHasMark(t,e,n){let r=!1;return e>t&&this.nodesBetween(t,e,(t=>(n.isInSet(t.marks)&&(r=!0),!r))),r}get isBlock(){return this.type.isBlock}get isTextblock(){return this.type.isTextblock}get inlineContent(){return this.type.inlineContent}get isInline(){return this.type.isInline}get isText(){return this.type.isText}get isLeaf(){return this.type.isLeaf}get isAtom(){return this.type.isAtom}toString(){if(this.type.spec.toDebugString)return this.type.spec.toDebugString(this);let t=this.type.name;return this.content.size&&(t+="("+this.content.toStringInner()+")"),D(this.marks,t)}contentMatchAt(t){let e=this.type.contentMatch.matchFragment(this.content,0,t);if(!e)throw new Error("Called contentMatchAt on a node with invalid content");return e}canReplace(t,e,n=a.empty,r=0,i=n.childCount){let o=this.contentMatchAt(t).matchFragment(n,r,i),s=o&&o.matchFragment(this.content,e);if(!s||!s.validEnd)return!1;for(let a=r;a<i;a++)if(!this.type.allowsMarks(n.child(a).marks))return!1;return!0}canReplaceWith(t,e,n,r){if(r&&!this.type.allowsMarks(r))return!1;let i=this.contentMatchAt(t).matchType(n),o=i&&i.matchFragment(this.content,e);return!!o&&o.validEnd}canAppend(t){return t.content.size?this.canReplace(this.childCount,this.childCount,t.content):this.type.compatibleContent(t.type)}check(){this.type.checkContent(this.content),this.type.checkAttrs(this.attrs);let t=d.none;for(let e=0;e<this.marks.length;e++){let n=this.marks[e];n.type.checkAttrs(n.attrs),t=n.addToSet(t)}if(!d.sameSet(t,this.marks))throw new RangeError(`Invalid collection of marks for node ${this.type.name}: ${this.marks.map((t=>t.type.name))}`);this.content.forEach((t=>t.check()))}toJSON(){let t={type:this.type.name};for(let e in this.attrs){t.attrs=this.attrs;break}return this.content.size&&(t.content=this.content.toJSON()),this.marks.length&&(t.marks=this.marks.map((t=>t.toJSON()))),t}static fromJSON(t,e){if(!e)throw new RangeError("Invalid input for Node.fromJSON");let n;if(e.marks){if(!Array.isArray(e.marks))throw new RangeError("Invalid mark data for Node.fromJSON");n=e.marks.map(t.markFromJSON)}if("text"==e.type){if("string"!=typeof e.text)throw new RangeError("Invalid text node in JSON");return t.text(e.text,n)}let r=a.fromJSON(t,e.content),i=t.nodeType(e.type).create(e.attrs,r,n);return i.type.checkAttrs(i.attrs),i}}N.prototype.text=void 0;class R extends N{constructor(t,e,n,r){if(super(t,e,null,r),!n)throw new RangeError("Empty text nodes are not allowed");this.text=n}toString(){return this.type.spec.toDebugString?this.type.spec.toDebugString(this):D(this.marks,JSON.stringify(this.text))}get textContent(){return this.text}textBetween(t,e){return this.text.slice(t,e)}get nodeSize(){return this.text.length}mark(t){return t==this.marks?this:new R(this.type,this.attrs,this.text,t)}withText(t){return t==this.text?this:new R(this.type,this.attrs,t,this.marks)}cut(t=0,e=this.text.length){return 0==t&&e==this.text.length?this:this.withText(this.text.slice(t,e))}eq(t){return this.sameMarkup(t)&&this.text==t.text}toJSON(){let t=super.toJSON();return t.text=this.text,t}}function D(t,e){for(let n=t.length-1;n>=0;n--)e=t[n].type.name+"("+e+")";return e}class L{constructor(t){this.validEnd=t,this.next=[],this.wrapCache=[]}static parse(t,e){let n=new F(t,e);if(null==n.next)return L.empty;let r=H(n);n.next&&n.err("Unexpected trailing text");let i=function(t){let e=Object.create(null);return n(j(t,0));function n(r){let i=[];r.forEach((e=>{t[e].forEach((({term:e,to:n})=>{if(!e)return;let r;for(let t=0;t<i.length;t++)i[t][0]==e&&(r=i[t][1]);j(t,n).forEach((t=>{r||i.push([e,r=[]]),-1==r.indexOf(t)&&r.push(t)}))}))}));let o=e[r.join(",")]=new L(r.indexOf(t.length-1)>-1);for(let t=0;t<i.length;t++){let r=i[t][1].sort($);o.next.push({type:i[t][0],next:e[r.join(",")]||n(r)})}return o}}(function(t){let e=[[]];return i(o(t,0),n()),e;function n(){return e.push([])-1}function r(t,n,r){let i={term:r,to:n};return e[t].push(i),i}function i(t,e){t.forEach((t=>t.to=e))}function o(t,e){if("choice"==t.type)return t.exprs.reduce(((t,n)=>t.concat(o(n,e))),[]);if("seq"!=t.type){if("star"==t.type){let s=n();return r(e,s),i(o(t.expr,s),s),[r(s)]}if("plus"==t.type){let s=n();return i(o(t.expr,e),s),i(o(t.expr,s),s),[r(s)]}if("opt"==t.type)return[r(e)].concat(o(t.expr,e));if("range"==t.type){let s=e;for(let e=0;e<t.min;e++){let e=n();i(o(t.expr,s),e),s=e}if(-1==t.max)i(o(t.expr,s),s);else for(let e=t.min;e<t.max;e++){let e=n();r(s,e),i(o(t.expr,s),e),s=e}return[r(s)]}if("name"==t.type)return[r(e,void 0,t.value)];throw new Error("Unknown expr type")}for(let r=0;;r++){let s=o(t.exprs[r],e);if(r==t.exprs.length-1)return s;i(s,e=n())}}}(r));return function(t,e){for(let n=0,r=[t];n<r.length;n++){let t=r[n],i=!t.validEnd,o=[];for(let e=0;e<t.next.length;e++){let{type:n,next:s}=t.next[e];o.push(n.name),!i||n.isText||n.hasRequiredAttrs()||(i=!1),-1==r.indexOf(s)&&r.push(s)}i&&e.err("Only non-generatable nodes ("+o.join(", ")+") in a required position (see https://prosemirror.net/docs/guide/#generatable)")}}(i,n),i}matchType(t){for(let e=0;e<this.next.length;e++)if(this.next[e].type==t)return this.next[e].next;return null}matchFragment(t,e=0,n=t.childCount){let r=this;for(let i=e;r&&i<n;i++)r=r.matchType(t.child(i).type);return r}get inlineContent(){return 0!=this.next.length&&this.next[0].type.isInline}get defaultType(){for(let t=0;t<this.next.length;t++){let{type:e}=this.next[t];if(!e.isText&&!e.hasRequiredAttrs())return e}return null}compatible(t){for(let e=0;e<this.next.length;e++)for(let n=0;n<t.next.length;n++)if(this.next[e].type==t.next[n].type)return!0;return!1}fillBefore(t,e=!1,n=0){let r=[this];return function i(o,s){let l=o.matchFragment(t,n);if(l&&(!e||l.validEnd))return a.from(s.map((t=>t.createAndFill())));for(let t=0;t<o.next.length;t++){let{type:e,next:n}=o.next[t];if(!e.isText&&!e.hasRequiredAttrs()&&-1==r.indexOf(n)){r.push(n);let t=i(n,s.concat(e));if(t)return t}}return null}(this,[])}findWrapping(t){for(let n=0;n<this.wrapCache.length;n+=2)if(this.wrapCache[n]==t)return this.wrapCache[n+1];let e=this.computeWrapping(t);return this.wrapCache.push(t,e),e}computeWrapping(t){let e=Object.create(null),n=[{match:this,type:null,via:null}];for(;n.length;){let r=n.shift(),i=r.match;if(i.matchType(t)){let t=[];for(let e=r;e.type;e=e.via)t.push(e.type);return t.reverse()}for(let t=0;t<i.next.length;t++){let{type:o,next:s}=i.next[t];o.isLeaf||o.hasRequiredAttrs()||o.name in e||r.type&&!s.validEnd||(n.push({match:o.contentMatch,type:o,via:r}),e[o.name]=!0)}}return null}get edgeCount(){return this.next.length}edge(t){if(t>=this.next.length)throw new RangeError(`There's no ${t}th edge in this content match`);return this.next[t]}toString(){let t=[];return function e(n){t.push(n);for(let r=0;r<n.next.length;r++)-1==t.indexOf(n.next[r].next)&&e(n.next[r].next)}(this),t.map(((e,n)=>{let r=n+(e.validEnd?"*":" ")+" ";for(let i=0;i<e.next.length;i++)r+=(i?", ":"")+e.next[i].type.name+"->"+t.indexOf(e.next[i].next);return r})).join("\n")}}L.empty=new L(!0);class F{constructor(t,e){this.string=t,this.nodeTypes=e,this.inline=null,this.pos=0,this.tokens=t.split(/\s*(?=\b|\W|$)/),""==this.tokens[this.tokens.length-1]&&this.tokens.pop(),""==this.tokens[0]&&this.tokens.shift()}get next(){return this.tokens[this.pos]}eat(t){return this.next==t&&(this.pos++||!0)}err(t){throw new SyntaxError(t+" (in content expression '"+this.string+"')")}}function H(t){let e=[];do{e.push(_(t))}while(t.eat("|"));return 1==e.length?e[0]:{type:"choice",exprs:e}}function _(t){let e=[];do{e.push(B(t))}while(t.next&&")"!=t.next&&"|"!=t.next);return 1==e.length?e[0]:{type:"seq",exprs:e}}function B(t){let e=function(t){if(t.eat("(")){let e=H(t);return t.eat(")")||t.err("Missing closing paren"),e}if(!/\W/.test(t.next)){let e=function(t,e){let n=t.nodeTypes,r=n[e];if(r)return[r];let i=[];for(let o in n){let t=n[o];t.groups.indexOf(e)>-1&&i.push(t)}0==i.length&&t.err("No node type or group '"+e+"' found");return i}(t,t.next).map((e=>(null==t.inline?t.inline=e.isInline:t.inline!=e.isInline&&t.err("Mixing inline and block content"),{type:"name",value:e})));return t.pos++,1==e.length?e[0]:{type:"choice",exprs:e}}t.err("Unexpected token '"+t.next+"'")}(t);for(;;)if(t.eat("+"))e={type:"plus",expr:e};else if(t.eat("*"))e={type:"star",expr:e};else if(t.eat("?"))e={type:"opt",expr:e};else{if(!t.eat("{"))break;e=z(t,e)}return e}function V(t){/\D/.test(t.next)&&t.err("Expected number, got '"+t.next+"'");let e=Number(t.next);return t.pos++,e}function z(t,e){let n=V(t),r=n;return t.eat(",")&&(r="}"!=t.next?V(t):-1),t.eat("}")||t.err("Unclosed braced range"),{type:"range",min:n,max:r,expr:e}}function $(t,e){return e-t}function j(t,e){let n=[];return function e(r){let i=t[r];if(1==i.length&&!i[0].term)return e(i[0].to);n.push(r);for(let t=0;t<i.length;t++){let{term:r,to:o}=i[t];r||-1!=n.indexOf(o)||e(o)}}(e),n.sort($)}function P(t){let e=Object.create(null);for(let n in t){let r=t[n];if(!r.hasDefault)return null;e[n]=r.default}return e}function J(t,e){let n=Object.create(null);for(let r in t){let i=e&&e[r];if(void 0===i){let e=t[r];if(!e.hasDefault)throw new RangeError("No value supplied for attribute "+r);i=e.default}n[r]=i}return n}function q(t,e,n,r){for(let i in e)if(!(i in t))throw new RangeError(`Unsupported attribute ${i} for ${n} of type ${i}`);for(let i in t){let n=t[i];n.validate&&n.validate(e[i])}}function W(t,e){let n=Object.create(null);if(e)for(let r in e)n[r]=new U(t,r,e[r]);return n}class Y{constructor(t,e,n){this.name=t,this.schema=e,this.spec=n,this.markSet=null,this.groups=n.group?n.group.split(" "):[],this.attrs=W(t,n.attrs),this.defaultAttrs=P(this.attrs),this.contentMatch=null,this.inlineContent=null,this.isBlock=!(n.inline||"text"==t),this.isText="text"==t}get isInline(){return!this.isBlock}get isTextblock(){return this.isBlock&&this.inlineContent}get isLeaf(){return this.contentMatch==L.empty}get isAtom(){return this.isLeaf||!!this.spec.atom}get whitespace(){return this.spec.whitespace||(this.spec.code?"pre":"normal")}hasRequiredAttrs(){for(let t in this.attrs)if(this.attrs[t].isRequired)return!0;return!1}compatibleContent(t){return this==t||this.contentMatch.compatible(t.contentMatch)}computeAttrs(t){return!t&&this.defaultAttrs?this.defaultAttrs:J(this.attrs,t)}create(t=null,e,n){if(this.isText)throw new Error("NodeType.create can't construct text nodes");return new N(this,this.computeAttrs(t),a.from(e),d.setFrom(n))}createChecked(t=null,e,n){return e=a.from(e),this.checkContent(e),new N(this,this.computeAttrs(t),e,d.setFrom(n))}createAndFill(t=null,e,n){if(t=this.computeAttrs(t),(e=a.from(e)).size){let t=this.contentMatch.fillBefore(e);if(!t)return null;e=t.append(e)}let r=this.contentMatch.matchFragment(e),i=r&&r.fillBefore(a.empty,!0);return i?new N(this,t,e.append(i),d.setFrom(n)):null}validContent(t){let e=this.contentMatch.matchFragment(t);if(!e||!e.validEnd)return!1;for(let n=0;n<t.childCount;n++)if(!this.allowsMarks(t.child(n).marks))return!1;return!0}checkContent(t){if(!this.validContent(t))throw new RangeError(`Invalid content for node ${this.name}: ${t.toString().slice(0,50)}`)}checkAttrs(t){q(this.attrs,t,"node",this.name)}allowsMarkType(t){return null==this.markSet||this.markSet.indexOf(t)>-1}allowsMarks(t){if(null==this.markSet)return!0;for(let e=0;e<t.length;e++)if(!this.allowsMarkType(t[e].type))return!1;return!0}allowedMarks(t){if(null==this.markSet)return t;let e;for(let n=0;n<t.length;n++)this.allowsMarkType(t[n].type)?e&&e.push(t[n]):e||(e=t.slice(0,n));return e?e.length?e:d.none:t}static compile(t,e){let n=Object.create(null);t.forEach(((t,r)=>n[t]=new Y(t,e,r)));let r=e.spec.topNode||"doc";if(!n[r])throw new RangeError("Schema is missing its top node type ('"+r+"')");if(!n.text)throw new RangeError("Every schema needs a 'text' type");for(let i in n.text.attrs)throw new RangeError("The text node type should not have attributes");return n}}class U{constructor(t,e,n){this.hasDefault=Object.prototype.hasOwnProperty.call(n,"default"),this.default=n.default,this.validate="string"==typeof n.validate?function(t,e,n){let r=n.split("|");return n=>{let i=null===n?"null":typeof n;if(r.indexOf(i)<0)throw new RangeError(`Expected value of type ${r} for attribute ${e} on type ${t}, got ${i}`)}}(t,e,n.validate):n.validate}get isRequired(){return!this.hasDefault}}class K{constructor(t,e,n,r){this.name=t,this.rank=e,this.schema=n,this.spec=r,this.attrs=W(t,r.attrs),this.excluded=null;let i=P(this.attrs);this.instance=i?new d(this,i):null}create(t=null){return!t&&this.instance?this.instance:new d(this,J(this.attrs,t))}static compile(t,e){let n=Object.create(null),r=0;return t.forEach(((t,i)=>n[t]=new K(t,r++,e,i))),n}removeFromSet(t){for(var e=0;e<t.length;e++)t[e].type==this&&(t=t.slice(0,e).concat(t.slice(e+1)),e--);return t}isInSet(t){for(let e=0;e<t.length;e++)if(t[e].type==this)return t[e]}checkAttrs(t){q(this.attrs,t,"mark",this.name)}excludes(t){return this.excluded.indexOf(t)>-1}}class G{constructor(t){this.linebreakReplacement=null,this.cached=Object.create(null);let e=this.spec={};for(let r in t)e[r]=t[r];e.nodes=i.from(t.nodes),e.marks=i.from(t.marks||{}),this.nodes=Y.compile(this.spec.nodes,this),this.marks=K.compile(this.spec.marks,this);let n=Object.create(null);for(let r in this.nodes){if(r in this.marks)throw new RangeError(r+" can not be both a node and a mark");let t=this.nodes[r],e=t.spec.content||"",i=t.spec.marks;if(t.contentMatch=n[e]||(n[e]=L.parse(e,this.nodes)),t.inlineContent=t.contentMatch.inlineContent,t.spec.linebreakReplacement){if(this.linebreakReplacement)throw new RangeError("Multiple linebreak nodes defined");if(!t.isInline||!t.isLeaf)throw new RangeError("Linebreak replacement nodes must be inline leaf nodes");this.linebreakReplacement=t}t.markSet="_"==i?null:i?X(this,i.split(" ")):""!=i&&t.inlineContent?null:[]}for(let r in this.marks){let t=this.marks[r],e=t.spec.excludes;t.excluded=null==e?[t]:""==e?[]:X(this,e.split(" "))}this.nodeFromJSON=this.nodeFromJSON.bind(this),this.markFromJSON=this.markFromJSON.bind(this),this.topNodeType=this.nodes[this.spec.topNode||"doc"],this.cached.wrappings=Object.create(null)}node(t,e=null,n,r){if("string"==typeof t)t=this.nodeType(t);else{if(!(t instanceof Y))throw new RangeError("Invalid node type: "+t);if(t.schema!=this)throw new RangeError("Node type from different schema used ("+t.name+")")}return t.createChecked(e,n,r)}text(t,e){let n=this.nodes.text;return new R(n,n.defaultAttrs,t,d.setFrom(e))}mark(t,e){return"string"==typeof t&&(t=this.marks[t]),t.create(e)}nodeFromJSON(t){return N.fromJSON(this,t)}markFromJSON(t){return d.fromJSON(this,t)}nodeType(t){let e=this.nodes[t];if(!e)throw new RangeError("Unknown node type: "+t);return e}}function X(t,e){let n=[];for(let r=0;r<e.length;r++){let i=e[r],o=t.marks[i],s=o;if(o)n.push(o);else for(let e in t.marks){let r=t.marks[e];("_"==i||r.spec.group&&r.spec.group.split(" ").indexOf(i)>-1)&&n.push(s=r)}if(!s)throw new SyntaxError("Unknown mark type: '"+e[r]+"'")}return n}class Z{constructor(t,e){this.schema=t,this.rules=e,this.tags=[],this.styles=[];let n=this.matchedStyles=[];e.forEach((t=>{if(function(t){return null!=t.tag}(t))this.tags.push(t);else if(function(t){return null!=t.style}(t)){let e=/[^=]*/.exec(t.style)[0];n.indexOf(e)<0&&n.push(e),this.styles.push(t)}})),this.normalizeLists=!this.tags.some((e=>{if(!/^(ul|ol)\b/.test(e.tag)||!e.node)return!1;let n=t.nodes[e.node];return n.contentMatch.matchType(n)}))}parse(t,e={}){let n=new it(this,e,!1);return n.addAll(t,d.none,e.from,e.to),n.finish()}parseSlice(t,e={}){let n=new it(this,e,!0);return n.addAll(t,d.none,e.from,e.to),h.maxOpen(n.finish())}matchTag(t,e,n){for(let r=n?this.tags.indexOf(n)+1:0;r<this.tags.length;r++){let n=this.tags[r];if(ot(t,n.tag)&&(void 0===n.namespace||t.namespaceURI==n.namespace)&&(!n.context||e.matchesContext(n.context))){if(n.getAttrs){let e=n.getAttrs(t);if(!1===e)continue;n.attrs=e||void 0}return n}}}matchStyle(t,e,n,r){for(let i=r?this.styles.indexOf(r)+1:0;i<this.styles.length;i++){let r=this.styles[i],o=r.style;if(!(0!=o.indexOf(t)||r.context&&!n.matchesContext(r.context)||o.length>t.length&&(61!=o.charCodeAt(t.length)||o.slice(t.length+1)!=e))){if(r.getAttrs){let t=r.getAttrs(e);if(!1===t)continue;r.attrs=t||void 0}return r}}}static schemaRules(t){let e=[];function n(t){let n=null==t.priority?50:t.priority,r=0;for(;r<e.length;r++){let t=e[r];if((null==t.priority?50:t.priority)<n)break}e.splice(r,0,t)}for(let r in t.marks){let e=t.marks[r].spec.parseDOM;e&&e.forEach((t=>{n(t=st(t)),t.mark||t.ignore||t.clearMark||(t.mark=r)}))}for(let r in t.nodes){let e=t.nodes[r].spec.parseDOM;e&&e.forEach((t=>{n(t=st(t)),t.node||t.ignore||t.mark||(t.node=r)}))}return e}static fromSchema(t){return t.cached.domParser||(t.cached.domParser=new Z(t,Z.schemaRules(t)))}}const Q={address:!0,article:!0,aside:!0,blockquote:!0,canvas:!0,dd:!0,div:!0,dl:!0,fieldset:!0,figcaption:!0,figure:!0,footer:!0,form:!0,h1:!0,h2:!0,h3:!0,h4:!0,h5:!0,h6:!0,header:!0,hgroup:!0,hr:!0,li:!0,noscript:!0,ol:!0,output:!0,p:!0,pre:!0,section:!0,table:!0,tfoot:!0,ul:!0},tt={head:!0,noscript:!0,object:!0,script:!0,style:!0,title:!0},et={ol:!0,ul:!0};function nt(t,e,n){return null!=e?(e?1:0)|("full"===e?2:0):t&&"pre"==t.whitespace?3:-5&n}class rt{constructor(t,e,n,r,i,o){this.type=t,this.attrs=e,this.marks=n,this.solid=r,this.options=o,this.content=[],this.activeMarks=d.none,this.match=i||(4&o?null:t.contentMatch)}findWrapping(t){if(!this.match){if(!this.type)return[];let e=this.type.contentMatch.fillBefore(a.from(t));if(!e){let e,n=this.type.contentMatch;return(e=n.findWrapping(t.type))?(this.match=n,e):null}this.match=this.type.contentMatch.matchFragment(e)}return this.match.findWrapping(t.type)}finish(t){if(!(1&this.options)){let t,e=this.content[this.content.length-1];if(e&&e.isText&&(t=/[ \t\r\n\u000c]+$/.exec(e.text))){let n=e;e.text.length==t[0].length?this.content.pop():this.content[this.content.length-1]=n.withText(n.text.slice(0,n.text.length-t[0].length))}}let e=a.from(this.content);return!t&&this.match&&(e=e.append(this.match.fillBefore(a.empty,!0))),this.type?this.type.create(this.attrs,e,this.marks):e}inlineContext(t){return this.type?this.type.inlineContent:this.content.length?this.content[0].isInline:t.parentNode&&!Q.hasOwnProperty(t.parentNode.nodeName.toLowerCase())}}class it{constructor(t,e,n){this.parser=t,this.options=e,this.isOpen=n,this.open=0;let r,i=e.topNode,o=nt(null,e.preserveWhitespace,0)|(n?4:0);r=i?new rt(i.type,i.attrs,d.none,!0,e.topMatch||i.type.contentMatch,o):new rt(n?null:t.schema.topNodeType,null,d.none,!0,null,o),this.nodes=[r],this.find=e.findPositions,this.needsBlock=!1}get top(){return this.nodes[this.open]}addDOM(t,e){3==t.nodeType?this.addTextNode(t,e):1==t.nodeType&&this.addElement(t,e)}addTextNode(t,e){let n=t.nodeValue,r=this.top;if(2&r.options||r.inlineContext(t)||/[^ \t\r\n\u000c]/.test(n)){if(1&r.options)n=2&r.options?n.replace(/\r\n?/g,"\n"):n.replace(/\r?\n|\r/g," ");else if(n=n.replace(/[ \t\r\n\u000c]+/g," "),/^[ \t\r\n\u000c]/.test(n)&&this.open==this.nodes.length-1){let e=r.content[r.content.length-1],i=t.previousSibling;(!e||i&&"BR"==i.nodeName||e.isText&&/[ \t\r\n\u000c]$/.test(e.text))&&(n=n.slice(1))}n&&this.insertNode(this.parser.schema.text(n),e),this.findInText(t)}else this.findInside(t)}addElement(t,e,n){let r,i=t.nodeName.toLowerCase();et.hasOwnProperty(i)&&this.parser.normalizeLists&&function(t){for(let e=t.firstChild,n=null;e;e=e.nextSibling){let t=1==e.nodeType?e.nodeName.toLowerCase():null;t&&et.hasOwnProperty(t)&&n?(n.appendChild(e),e=n):"li"==t?n=e:t&&(n=null)}}(t);let o=this.options.ruleFromNode&&this.options.ruleFromNode(t)||(r=this.parser.matchTag(t,this,n));if(o?o.ignore:tt.hasOwnProperty(i))this.findInside(t),this.ignoreFallback(t,e);else if(!o||o.skip||o.closeParent){o&&o.closeParent?this.open=Math.max(0,this.open-1):o&&o.skip.nodeType&&(t=o.skip);let n,r=this.top,s=this.needsBlock;if(Q.hasOwnProperty(i))r.content.length&&r.content[0].isInline&&this.open&&(this.open--,r=this.top),n=!0,r.type||(this.needsBlock=!0);else if(!t.firstChild)return void this.leafFallback(t,e);let a=o&&o.skip?e:this.readStyles(t,e);a&&this.addAll(t,a),n&&this.sync(r),this.needsBlock=s}else{let n=this.readStyles(t,e);n&&this.addElementByRule(t,o,n,!1===o.consuming?r:void 0)}}leafFallback(t,e){"BR"==t.nodeName&&this.top.type&&this.top.type.inlineContent&&this.addTextNode(t.ownerDocument.createTextNode("\n"),e)}ignoreFallback(t,e){"BR"!=t.nodeName||this.top.type&&this.top.type.inlineContent||this.findPlace(this.parser.schema.text("-"),e)}readStyles(t,e){let n=t.style;if(n&&n.length)for(let r=0;r<this.parser.matchedStyles.length;r++){let t=this.parser.matchedStyles[r],i=n.getPropertyValue(t);if(i)for(let n;;){let r=this.parser.matchStyle(t,i,this,n);if(!r)break;if(r.ignore)return null;if(e=r.clearMark?e.filter((t=>!r.clearMark(t))):e.concat(this.parser.schema.marks[r.mark].create(r.attrs)),!1!==r.consuming)break;n=r}}return e}addElementByRule(t,e,n,r){let i,o;if(e.node)if(o=this.parser.schema.nodes[e.node],o.isLeaf)this.insertNode(o.create(e.attrs),n)||this.leafFallback(t,n);else{let t=this.enter(o,e.attrs||null,n,e.preserveWhitespace);t&&(i=!0,n=t)}else{let t=this.parser.schema.marks[e.mark];n=n.concat(t.create(e.attrs))}let s=this.top;if(o&&o.isLeaf)this.findInside(t);else if(r)this.addElement(t,n,r);else if(e.getContent)this.findInside(t),e.getContent(t,this.parser.schema).forEach((t=>this.insertNode(t,n)));else{let r=t;"string"==typeof e.contentElement?r=t.querySelector(e.contentElement):"function"==typeof e.contentElement?r=e.contentElement(t):e.contentElement&&(r=e.contentElement),this.findAround(t,r,!0),this.addAll(r,n)}i&&this.sync(s)&&this.open--}addAll(t,e,n,r){let i=n||0;for(let o=n?t.childNodes[n]:t.firstChild,s=null==r?null:t.childNodes[r];o!=s;o=o.nextSibling,++i)this.findAtPoint(t,i),this.addDOM(o,e);this.findAtPoint(t,i)}findPlace(t,e){let n,r;for(let i=this.open;i>=0;i--){let e=this.nodes[i],o=e.findWrapping(t);if(o&&(!n||n.length>o.length)&&(n=o,r=e,!o.length))break;if(e.solid)break}if(!n)return null;this.sync(r);for(let i=0;i<n.length;i++)e=this.enterInner(n[i],null,e,!1);return e}insertNode(t,e){if(t.isInline&&this.needsBlock&&!this.top.type){let t=this.textblockFromContext();t&&(e=this.enterInner(t,null,e))}let n=this.findPlace(t,e);if(n){this.closeExtra();let e=this.top;e.match&&(e.match=e.match.matchType(t.type));let r=d.none;for(let i of n.concat(t.marks))(e.type?e.type.allowsMarkType(i.type):at(i.type,t.type))&&(r=i.addToSet(r));return e.content.push(t.mark(r)),!0}return!1}enter(t,e,n,r){let i=this.findPlace(t.create(e),n);return i&&(i=this.enterInner(t,e,n,!0,r)),i}enterInner(t,e,n,r=!1,i){this.closeExtra();let o=this.top;o.match=o.match&&o.match.matchType(t);let s=nt(t,i,o.options);4&o.options&&0==o.content.length&&(s|=4);let a=d.none;return n=n.filter((e=>!(o.type?o.type.allowsMarkType(e.type):at(e.type,t))||(a=e.addToSet(a),!1))),this.nodes.push(new rt(t,e,a,r,null,s)),this.open++,n}closeExtra(t=!1){let e=this.nodes.length-1;if(e>this.open){for(;e>this.open;e--)this.nodes[e-1].content.push(this.nodes[e].finish(t));this.nodes.length=this.open+1}}finish(){return this.open=0,this.closeExtra(this.isOpen),this.nodes[0].finish(this.isOpen||this.options.topOpen)}sync(t){for(let e=this.open;e>=0;e--)if(this.nodes[e]==t)return this.open=e,!0;return!1}get currentPos(){this.closeExtra();let t=0;for(let e=this.open;e>=0;e--){let n=this.nodes[e].content;for(let e=n.length-1;e>=0;e--)t+=n[e].nodeSize;e&&t++}return t}findAtPoint(t,e){if(this.find)for(let n=0;n<this.find.length;n++)this.find[n].node==t&&this.find[n].offset==e&&(this.find[n].pos=this.currentPos)}findInside(t){if(this.find)for(let e=0;e<this.find.length;e++)null==this.find[e].pos&&1==t.nodeType&&t.contains(this.find[e].node)&&(this.find[e].pos=this.currentPos)}findAround(t,e,n){if(t!=e&&this.find)for(let r=0;r<this.find.length;r++)if(null==this.find[r].pos&&1==t.nodeType&&t.contains(this.find[r].node)){e.compareDocumentPosition(this.find[r].node)&(n?2:4)&&(this.find[r].pos=this.currentPos)}}findInText(t){if(this.find)for(let e=0;e<this.find.length;e++)this.find[e].node==t&&(this.find[e].pos=this.currentPos-(t.nodeValue.length-this.find[e].offset))}matchesContext(t){if(t.indexOf("|")>-1)return t.split(/\s*\|\s*/).some(this.matchesContext,this);let e=t.split("/"),n=this.options.context,r=!this.isOpen&&(!n||n.parent.type==this.nodes[0].type),i=-(n?n.depth+1:0)+(r?0:1),o=(t,s)=>{for(;t>=0;t--){let a=e[t];if(""==a){if(t==e.length-1||0==t)continue;for(;s>=i;s--)if(o(t-1,s))return!0;return!1}{let t=s>0||0==s&&r?this.nodes[s].type:n&&s>=i?n.node(s-i).type:null;if(!t||t.name!=a&&-1==t.groups.indexOf(a))return!1;s--}}return!0};return o(e.length-1,this.open)}textblockFromContext(){let t=this.options.context;if(t)for(let e=t.depth;e>=0;e--){let n=t.node(e).contentMatchAt(t.indexAfter(e)).defaultType;if(n&&n.isTextblock&&n.defaultAttrs)return n}for(let e in this.parser.schema.nodes){let t=this.parser.schema.nodes[e];if(t.isTextblock&&t.defaultAttrs)return t}}}function ot(t,e){return(t.matches||t.msMatchesSelector||t.webkitMatchesSelector||t.mozMatchesSelector).call(t,e)}function st(t){let e={};for(let n in t)e[n]=t[n];return e}function at(t,e){let n=e.schema.nodes;for(let r in n){let i=n[r];if(!i.allowsMarkType(t))continue;let o=[],s=t=>{o.push(t);for(let n=0;n<t.edgeCount;n++){let{type:r,next:i}=t.edge(n);if(r==e)return!0;if(o.indexOf(i)<0&&s(i))return!0}};if(s(i.contentMatch))return!0}}class lt{constructor(t,e){this.nodes=t,this.marks=e}serializeFragment(t,e={},n){n||(n=ut(e).createDocumentFragment());let r=n,i=[];return t.forEach((t=>{if(i.length||t.marks.length){let n=0,o=0;for(;n<i.length&&o<t.marks.length;){let e=t.marks[o];if(this.marks[e.type.name]){if(!e.eq(i[n][0])||!1===e.type.spec.spanning)break;n++,o++}else o++}for(;n<i.length;)r=i.pop()[1];for(;o<t.marks.length;){let n=t.marks[o++],s=this.serializeMark(n,t.isInline,e);s&&(i.push([n,r]),r.appendChild(s.dom),r=s.contentDOM||s.dom)}}r.appendChild(this.serializeNodeInner(t,e))})),n}serializeNodeInner(t,e){let{dom:n,contentDOM:r}=ht(ut(e),this.nodes[t.type.name](t),null,t.attrs);if(r){if(t.isLeaf)throw new RangeError("Content hole not allowed in a leaf node spec");this.serializeFragment(t.content,e,r)}return n}serializeNode(t,e={}){let n=this.serializeNodeInner(t,e);for(let r=t.marks.length-1;r>=0;r--){let i=this.serializeMark(t.marks[r],t.isInline,e);i&&((i.contentDOM||i.dom).appendChild(n),n=i.dom)}return n}serializeMark(t,e,n={}){let r=this.marks[t.type.name];return r&&ht(ut(n),r(t,e),null,t.attrs)}static renderSpec(t,e,n=null,r){return ht(t,e,n,r)}static fromSchema(t){return t.cached.domSerializer||(t.cached.domSerializer=new lt(this.nodesFromSchema(t),this.marksFromSchema(t)))}static nodesFromSchema(t){let e=ct(t.nodes);return e.text||(e.text=t=>t.text),e}static marksFromSchema(t){return ct(t.marks)}}function ct(t){let e={};for(let n in t){let r=t[n].spec.toDOM;r&&(e[n]=r)}return e}function ut(t){return t.document||window.document}const dt=new WeakMap;function pt(t){let e=dt.get(t);return void 0===e&&dt.set(t,e=function(t){let e=null;function n(t){if(t&&"object"==typeof t)if(Array.isArray(t))if("string"==typeof t[0])e||(e=[]),e.push(t);else for(let e=0;e<t.length;e++)n(t[e]);else for(let e in t)n(t[e])}return n(t),e}(t)),e}function ht(t,e,n,r){if("string"==typeof e)return{dom:t.createTextNode(e)};if(null!=e.nodeType)return{dom:e};if(e.dom&&null!=e.dom.nodeType)return e;let i,o=e[0];if("string"!=typeof o)throw new RangeError("Invalid array passed to renderSpec");if(r&&(i=pt(r))&&i.indexOf(e)>-1)throw new RangeError("Using an array from an attribute object as a DOM spec. This may be an attempted cross site scripting attack.");let s,a=o.indexOf(" ");a>0&&(n=o.slice(0,a),o=o.slice(a+1));let l=n?t.createElementNS(n,o):t.createElement(o),c=e[1],u=1;if(c&&"object"==typeof c&&null==c.nodeType&&!Array.isArray(c)){u=2;for(let t in c)if(null!=c[t]){let e=t.indexOf(" ");e>0?l.setAttributeNS(t.slice(0,e),t.slice(e+1),c[t]):l.setAttribute(t,c[t])}}for(let d=u;d<e.length;d++){let i=e[d];if(0===i){if(d<e.length-1||d>u)throw new RangeError("Content hole must be the only child of its parent node");return{dom:l,contentDOM:l}}{let{dom:e,contentDOM:o}=ht(t,i,n,r);if(l.appendChild(e),o){if(s)throw new RangeError("Multiple content holes");s=o}}}return{dom:l,contentDOM:s}}},3833:function(t,e,n){n.d(e,{IB:function(){return s},KI:function(){return o},bw:function(){return a}});var r=n(6560),i=n(2806);function o(t,e=null){return function(n,o){let{$from:s,$to:a}=n.selection,l=s.blockRange(a),c=!1,u=l;if(!l)return!1;if(l.depth>=2&&s.node(l.depth-1).type.compatibleContent(t)&&0==l.startIndex){if(0==s.index(l.depth-1))return!1;let t=n.doc.resolve(l.start-2);u=new i.Ts(t,t,l.depth),l.endIndex<l.parent.childCount&&(l=new i.Ts(s,n.doc.resolve(a.end(l.depth)),l.depth)),c=!0}let d=(0,r.nd)(u,t,e,l);return!!d&&(o&&o(function(t,e,n,o,s){let a=i.HY.empty;for(let r=n.length-1;r>=0;r--)a=i.HY.from(n[r].type.create(n[r].attrs,a));t.step(new r.FC(e.start-(o?2:0),e.end,e.start,e.end,new i.p2(a,0,0),n.length,!0));let l=0;for(let r=0;r<n.length;r++)n[r].type==s&&(l=r+1);let c=n.length-l,u=e.start+n.length-(o?2:0),d=e.parent;for(let i=e.startIndex,p=e.endIndex,h=!0;i<p;i++,h=!1)!h&&(0,r.Ax)(t.doc,u,c)&&(t.split(u,c),u+=2*c),u+=d.child(i).nodeSize;return t}(n.tr,l,d,c,t).scrollIntoView()),!0)}}function s(t){return function(e,n){let{$from:o,$to:s}=e.selection,a=o.blockRange(s,(e=>e.childCount>0&&e.firstChild.type==t));return!!a&&(!n||(o.node(a.depth-1).type==t?function(t,e,n,o){let s=t.tr,a=o.end,l=o.$to.end(o.depth);a<l&&(s.step(new r.FC(a-1,l,a,l,new i.p2(i.HY.from(n.create(null,o.parent.copy())),1,0),1,!0)),o=new i.Ts(s.doc.resolve(o.$from.pos),s.doc.resolve(l),o.depth));const c=(0,r.k9)(o);if(null==c)return!1;s.lift(o,c);let u=s.mapping.map(a,-1)-1;(0,r.Mn)(s.doc,u)&&s.join(u);return e(s.scrollIntoView()),!0}(e,n,t,a):function(t,e,n){let o=t.tr,s=n.parent;for(let r=n.end,i=n.endIndex-1,m=n.startIndex;i>m;i--)r-=s.child(i).nodeSize,o.delete(r-1,r+1);let a=o.doc.resolve(n.start),l=a.nodeAfter;if(o.mapping.map(n.end)!=n.start+a.nodeAfter.nodeSize)return!1;let c=0==n.startIndex,u=n.endIndex==s.childCount,d=a.node(-1),p=a.index(-1);if(!d.canReplace(p+(c?0:1),p+1,l.content.append(u?i.HY.empty:i.HY.from(s))))return!1;let h=a.pos,f=h+l.nodeSize;return o.step(new r.FC(h-(c?1:0),f+(u?1:0),h+1,f-1,new i.p2((c?i.HY.empty:i.HY.from(s.copy(i.HY.empty))).append(u?i.HY.empty:i.HY.from(s.copy(i.HY.empty))),c?0:1,u?0:1),c?0:1)),e(o.scrollIntoView()),!0}(e,n,a)))}}function a(t){return function(e,n){let{$from:o,$to:s}=e.selection,a=o.blockRange(s,(e=>e.childCount>0&&e.firstChild.type==t));if(!a)return!1;let l=a.startIndex;if(0==l)return!1;let c=a.parent,u=c.child(l-1);if(u.type!=t)return!1;if(n){let o=u.lastChild&&u.lastChild.type==c.type,s=i.HY.from(o?t.create():null),l=new i.p2(i.HY.from(t.create(null,i.HY.from(c.type.create(null,s)))),o?3:1,0),d=a.start,p=a.end;n(e.tr.step(new r.FC(d-(o?3:1),p,d,p,l,1,!0)).scrollIntoView())}return!0}}},2376:function(t,e,n){n.d(e,{Bs:function(){return u},C1:function(){return f},H$:function(){return O},Sy:function(){return C},Y1:function(){return s},qv:function(){return p},yy:function(){return S}});var r=n(2806),i=n(6560);const o=Object.create(null);class s{constructor(t,e,n){this.$anchor=t,this.$head=e,this.ranges=n||[new a(t.min(e),t.max(e))]}get anchor(){return this.$anchor.pos}get head(){return this.$head.pos}get from(){return this.$from.pos}get to(){return this.$to.pos}get $from(){return this.ranges[0].$from}get $to(){return this.ranges[0].$to}get empty(){let t=this.ranges;for(let e=0;e<t.length;e++)if(t[e].$from.pos!=t[e].$to.pos)return!1;return!0}content(){return this.$from.doc.slice(this.from,this.to,!0)}replace(t,e=r.p2.empty){let n=e.content.lastChild,i=null;for(let r=0;r<e.openEnd;r++)i=n,n=n.lastChild;let o=t.steps.length,s=this.ranges;for(let a=0;a<s.length;a++){let{$from:l,$to:c}=s[a],u=t.mapping.slice(o);t.replaceRange(u.map(l.pos),u.map(c.pos),a?r.p2.empty:e),0==a&&y(t,o,(n?n.isInline:i&&i.isTextblock)?-1:1)}}replaceWith(t,e){let n=t.steps.length,r=this.ranges;for(let i=0;i<r.length;i++){let{$from:o,$to:s}=r[i],a=t.mapping.slice(n),l=a.map(o.pos),c=a.map(s.pos);i?t.deleteRange(l,c):(t.replaceRangeWith(l,c,e),y(t,n,e.isInline?-1:1))}}static findFrom(t,e,n=!1){let r=t.parent.inlineContent?new u(t):g(t.node(0),t.parent,t.pos,t.index(),e,n);if(r)return r;for(let i=t.depth-1;i>=0;i--){let r=e<0?g(t.node(0),t.node(i),t.before(i+1),t.index(i),e,n):g(t.node(0),t.node(i),t.after(i+1),t.index(i)+1,e,n);if(r)return r}return null}static near(t,e=1){return this.findFrom(t,e)||this.findFrom(t,-e)||new f(t.node(0))}static atStart(t){return g(t,t,0,0,1)||new f(t)}static atEnd(t){return g(t,t,t.content.size,t.childCount,-1)||new f(t)}static fromJSON(t,e){if(!e||!e.type)throw new RangeError("Invalid input for Selection.fromJSON");let n=o[e.type];if(!n)throw new RangeError(`No selection type ${e.type} defined`);return n.fromJSON(t,e)}static jsonID(t,e){if(t in o)throw new RangeError("Duplicate use of selection JSON ID "+t);return o[t]=e,e.prototype.jsonID=t,e}getBookmark(){return u.between(this.$anchor,this.$head).getBookmark()}}s.prototype.visible=!0;class a{constructor(t,e){this.$from=t,this.$to=e}}let l=!1;function c(t){l||t.parent.inlineContent||(l=!0,console.warn("TextSelection endpoint not pointing into a node with inline content ("+t.parent.type.name+")"))}class u extends s{constructor(t,e=t){c(t),c(e),super(t,e)}get $cursor(){return this.$anchor.pos==this.$head.pos?this.$head:null}map(t,e){let n=t.resolve(e.map(this.head));if(!n.parent.inlineContent)return s.near(n);let r=t.resolve(e.map(this.anchor));return new u(r.parent.inlineContent?r:n,n)}replace(t,e=r.p2.empty){if(super.replace(t,e),e==r.p2.empty){let e=this.$from.marksAcross(this.$to);e&&t.ensureMarks(e)}}eq(t){return t instanceof u&&t.anchor==this.anchor&&t.head==this.head}getBookmark(){return new d(this.anchor,this.head)}toJSON(){return{type:"text",anchor:this.anchor,head:this.head}}static fromJSON(t,e){if("number"!=typeof e.anchor||"number"!=typeof e.head)throw new RangeError("Invalid input for TextSelection.fromJSON");return new u(t.resolve(e.anchor),t.resolve(e.head))}static create(t,e,n=e){let r=t.resolve(e);return new this(r,n==e?r:t.resolve(n))}static between(t,e,n){let r=t.pos-e.pos;if(n&&!r||(n=r>=0?1:-1),!e.parent.inlineContent){let t=s.findFrom(e,n,!0)||s.findFrom(e,-n,!0);if(!t)return s.near(e,n);e=t.$head}return t.parent.inlineContent||(0==r||(t=(s.findFrom(t,-n,!0)||s.findFrom(t,n,!0)).$anchor).pos<e.pos!=r<0)&&(t=e),new u(t,e)}}s.jsonID("text",u);class d{constructor(t,e){this.anchor=t,this.head=e}map(t){return new d(t.map(this.anchor),t.map(this.head))}resolve(t){return u.between(t.resolve(this.anchor),t.resolve(this.head))}}class p extends s{constructor(t){let e=t.nodeAfter,n=t.node(0).resolve(t.pos+e.nodeSize);super(t,n),this.node=e}map(t,e){let{deleted:n,pos:r}=e.mapResult(this.anchor),i=t.resolve(r);return n?s.near(i):new p(i)}content(){return new r.p2(r.HY.from(this.node),0,0)}eq(t){return t instanceof p&&t.anchor==this.anchor}toJSON(){return{type:"node",anchor:this.anchor}}getBookmark(){return new h(this.anchor)}static fromJSON(t,e){if("number"!=typeof e.anchor)throw new RangeError("Invalid input for NodeSelection.fromJSON");return new p(t.resolve(e.anchor))}static create(t,e){return new p(t.resolve(e))}static isSelectable(t){return!t.isText&&!1!==t.type.spec.selectable}}p.prototype.visible=!1,s.jsonID("node",p);class h{constructor(t){this.anchor=t}map(t){let{deleted:e,pos:n}=t.mapResult(this.anchor);return e?new d(n,n):new h(n)}resolve(t){let e=t.resolve(this.anchor),n=e.nodeAfter;return n&&p.isSelectable(n)?new p(e):s.near(e)}}class f extends s{constructor(t){super(t.resolve(0),t.resolve(t.content.size))}replace(t,e=r.p2.empty){if(e==r.p2.empty){t.delete(0,t.doc.content.size);let e=s.atStart(t.doc);e.eq(t.selection)||t.setSelection(e)}else super.replace(t,e)}toJSON(){return{type:"all"}}static fromJSON(t){return new f(t)}map(t){return new f(t)}eq(t){return t instanceof f}getBookmark(){return m}}s.jsonID("all",f);const m={map(){return this},resolve:t=>new f(t)};function g(t,e,n,r,i,o=!1){if(e.inlineContent)return u.create(t,n);for(let s=r-(i>0?0:1);i>0?s<e.childCount:s>=0;s+=i){let r=e.child(s);if(r.isAtom){if(!o&&p.isSelectable(r))return p.create(t,n-(i<0?r.nodeSize:0))}else{let e=g(t,r,n+i,i<0?r.childCount:0,i,o);if(e)return e}n+=r.nodeSize*i}return null}function y(t,e,n){let r=t.steps.length-1;if(r<e)return;let o,a=t.steps[r];(a instanceof i.Pu||a instanceof i.FC)&&(t.mapping.maps[r].forEach(((t,e,n,r)=>{null==o&&(o=r)})),t.setSelection(s.near(t.doc.resolve(o),n)))}class v extends i.wx{constructor(t){super(t.doc),this.curSelectionFor=0,this.updated=0,this.meta=Object.create(null),this.time=Date.now(),this.curSelection=t.selection,this.storedMarks=t.storedMarks}get selection(){return this.curSelectionFor<this.steps.length&&(this.curSelection=this.curSelection.map(this.doc,this.mapping.slice(this.curSelectionFor)),this.curSelectionFor=this.steps.length),this.curSelection}setSelection(t){if(t.$from.doc!=this.doc)throw new RangeError("Selection passed to setSelection must point at the current document");return this.curSelection=t,this.curSelectionFor=this.steps.length,this.updated=-3&(1|this.updated),this.storedMarks=null,this}get selectionSet(){return(1&this.updated)>0}setStoredMarks(t){return this.storedMarks=t,this.updated|=2,this}ensureMarks(t){return r.vc.sameSet(this.storedMarks||this.selection.$from.marks(),t)||this.setStoredMarks(t),this}addStoredMark(t){return this.ensureMarks(t.addToSet(this.storedMarks||this.selection.$head.marks()))}removeStoredMark(t){return this.ensureMarks(t.removeFromSet(this.storedMarks||this.selection.$head.marks()))}get storedMarksSet(){return(2&this.updated)>0}addStep(t,e){super.addStep(t,e),this.updated=-3&this.updated,this.storedMarks=null}setTime(t){return this.time=t,this}replaceSelection(t){return this.selection.replace(this,t),this}replaceSelectionWith(t,e=!0){let n=this.selection;return e&&(t=t.mark(this.storedMarks||(n.empty?n.$from.marks():n.$from.marksAcross(n.$to)||r.vc.none))),n.replaceWith(this,t),this}deleteSelection(){return this.selection.replace(this),this}insertText(t,e,n){let r=this.doc.type.schema;if(null==e)return t?this.replaceSelectionWith(r.text(t),!0):this.deleteSelection();{if(null==n&&(n=e),n=null==n?e:n,!t)return this.deleteRange(e,n);let i=this.storedMarks;if(!i){let t=this.doc.resolve(e);i=n==e?t.marks():t.marksAcross(this.doc.resolve(n))}return this.replaceRangeWith(e,n,r.text(t,i)),this.selection.empty||this.setSelection(s.near(this.selection.$to)),this}}setMeta(t,e){return this.meta["string"==typeof t?t:t.key]=e,this}getMeta(t){return this.meta["string"==typeof t?t:t.key]}get isGeneric(){for(let t in this.meta)return!1;return!0}scrollIntoView(){return this.updated|=4,this}get scrolledIntoView(){return(4&this.updated)>0}}function b(t,e){return e&&t?t.bind(e):t}class w{constructor(t,e,n){this.name=t,this.init=b(e.init,n),this.apply=b(e.apply,n)}}const x=[new w("doc",{init:t=>t.doc||t.schema.topNodeType.createAndFill(),apply:t=>t.doc}),new w("selection",{init:(t,e)=>t.selection||s.atStart(e.doc),apply:t=>t.selection}),new w("storedMarks",{init:t=>t.storedMarks||null,apply:(t,e,n,r)=>r.selection.$cursor?t.storedMarks:null}),new w("scrollToSelection",{init:()=>0,apply:(t,e)=>t.scrolledIntoView?e+1:e})];class k{constructor(t,e){this.schema=t,this.plugins=[],this.pluginsByKey=Object.create(null),this.fields=x.slice(),e&&e.forEach((t=>{if(this.pluginsByKey[t.key])throw new RangeError("Adding different instances of a keyed plugin ("+t.key+")");this.plugins.push(t),this.pluginsByKey[t.key]=t,t.spec.state&&this.fields.push(new w(t.key,t.spec.state,t))}))}}class S{constructor(t){this.config=t}get schema(){return this.config.schema}get plugins(){return this.config.plugins}apply(t){return this.applyTransaction(t).state}filterTransaction(t,e=-1){for(let n=0;n<this.config.plugins.length;n++)if(n!=e){let e=this.config.plugins[n];if(e.spec.filterTransaction&&!e.spec.filterTransaction.call(e,t,this))return!1}return!0}applyTransaction(t){if(!this.filterTransaction(t))return{state:this,transactions:[]};let e=[t],n=this.applyInner(t),r=null;for(;;){let i=!1;for(let o=0;o<this.config.plugins.length;o++){let s=this.config.plugins[o];if(s.spec.appendTransaction){let a=r?r[o].n:0,l=r?r[o].state:this,c=a<e.length&&s.spec.appendTransaction.call(s,a?e.slice(a):e,l,n);if(c&&n.filterTransaction(c,o)){if(c.setMeta("appendedTransaction",t),!r){r=[];for(let t=0;t<this.config.plugins.length;t++)r.push(t<o?{state:n,n:e.length}:{state:this,n:0})}e.push(c),n=n.applyInner(c),i=!0}r&&(r[o]={state:n,n:e.length})}}if(!i)return{state:n,transactions:e}}}applyInner(t){if(!t.before.eq(this.doc))throw new RangeError("Applying a mismatched transaction");let e=new S(this.config),n=this.config.fields;for(let r=0;r<n.length;r++){let i=n[r];e[i.name]=i.apply(t,this[i.name],this,e)}return e}get tr(){return new v(this)}static create(t){let e=new k(t.doc?t.doc.type.schema:t.schema,t.plugins),n=new S(e);for(let r=0;r<e.fields.length;r++)n[e.fields[r].name]=e.fields[r].init(t,n);return n}reconfigure(t){let e=new k(this.schema,t.plugins),n=e.fields,r=new S(e);for(let i=0;i<n.length;i++){let e=n[i].name;r[e]=this.hasOwnProperty(e)?this[e]:n[i].init(t,r)}return r}toJSON(t){let e={doc:this.doc.toJSON(),selection:this.selection.toJSON()};if(this.storedMarks&&(e.storedMarks=this.storedMarks.map((t=>t.toJSON()))),t&&"object"==typeof t)for(let n in t){if("doc"==n||"selection"==n)throw new RangeError("The JSON fields `doc` and `selection` are reserved");let r=t[n],i=r.spec.state;i&&i.toJSON&&(e[n]=i.toJSON.call(r,this[r.key]))}return e}static fromJSON(t,e,n){if(!e)throw new RangeError("Invalid input for EditorState.fromJSON");if(!t.schema)throw new RangeError("Required config field 'schema' missing");let i=new k(t.schema,t.plugins),o=new S(i);return i.fields.forEach((i=>{if("doc"==i.name)o.doc=r.NB.fromJSON(t.schema,e.doc);else if("selection"==i.name)o.selection=s.fromJSON(o.doc,e.selection);else if("storedMarks"==i.name)e.storedMarks&&(o.storedMarks=e.storedMarks.map(t.schema.markFromJSON));else{if(n)for(let r in n){let s=n[r],a=s.spec.state;if(s.key==i.name&&a&&a.fromJSON&&Object.prototype.hasOwnProperty.call(e,r))return void(o[i.name]=a.fromJSON.call(s,t,e[r],o))}o[i.name]=i.init(t,o)}})),o}}function M(t,e,n){for(let r in t){let i=t[r];i instanceof Function?i=i.bind(e):"handleDOMEvents"==r&&(i=M(i,e,{})),n[r]=i}return n}class C{constructor(t){this.spec=t,this.props={},t.props&&M(t.props,this,this.props),this.key=t.key?t.key.key:T("plugin")}getState(t){return t[this.key]}}const A=Object.create(null);function T(t){return t in A?t+"$"+ ++A[t]:(A[t]=0,t+"$")}class O{constructor(t="key"){this.key=T(t)}get(t){return t.config.pluginsByKey[this.key]}getState(t){return t[this.key]}}},6560:function(t,e,n){n.d(e,{Ax:function(){return C},FC:function(){return v},GJ:function(){return O},Mn:function(){return A},Pu:function(){return y},dR:function(){return I},k9:function(){return k},nd:function(){return S},nj:function(){return E},vs:function(){return l},wx:function(){return P}});var r=n(2806);const i=Math.pow(2,16);function o(t){return 65535&t}class s{constructor(t,e,n){this.pos=t,this.delInfo=e,this.recover=n}get deleted(){return(8&this.delInfo)>0}get deletedBefore(){return(5&this.delInfo)>0}get deletedAfter(){return(6&this.delInfo)>0}get deletedAcross(){return(4&this.delInfo)>0}}class a{constructor(t,e=!1){if(this.ranges=t,this.inverted=e,!t.length&&a.empty)return a.empty}recover(t){let e=0,n=o(t);if(!this.inverted)for(let r=0;r<n;r++)e+=this.ranges[3*r+2]-this.ranges[3*r+1];return this.ranges[3*n]+e+function(t){return(t-(65535&t))/i}(t)}mapResult(t,e=1){return this._map(t,e,!1)}map(t,e=1){return this._map(t,e,!0)}_map(t,e,n){let r=0,o=this.inverted?2:1,a=this.inverted?1:2;for(let l=0;l<this.ranges.length;l+=3){let c=this.ranges[l]-(this.inverted?r:0);if(c>t)break;let u=this.ranges[l+o],d=this.ranges[l+a],p=c+u;if(t<=p){let o=c+r+((u?t==c?-1:t==p?1:e:e)<0?0:d);if(n)return o;let a=t==(e<0?c:p)?null:l/3+(t-c)*i,h=t==c?2:t==p?1:4;return(e<0?t!=c:t!=p)&&(h|=8),new s(o,h,a)}r+=d-u}return n?t+r:new s(t+r,0,null)}touches(t,e){let n=0,r=o(e),i=this.inverted?2:1,s=this.inverted?1:2;for(let o=0;o<this.ranges.length;o+=3){let e=this.ranges[o]-(this.inverted?n:0);if(e>t)break;let a=this.ranges[o+i];if(t<=e+a&&o==3*r)return!0;n+=this.ranges[o+s]-a}return!1}forEach(t){let e=this.inverted?2:1,n=this.inverted?1:2;for(let r=0,i=0;r<this.ranges.length;r+=3){let o=this.ranges[r],s=o-(this.inverted?i:0),a=o+(this.inverted?0:i),l=this.ranges[r+e],c=this.ranges[r+n];t(s,s+l,a,a+c),i+=c-l}}invert(){return new a(this.ranges,!this.inverted)}toString(){return(this.inverted?"-":"")+JSON.stringify(this.ranges)}static offset(t){return 0==t?a.empty:new a(t<0?[0,-t,0]:[0,0,t])}}a.empty=new a([]);class l{constructor(t=[],e,n=0,r=t.length){this.maps=t,this.mirror=e,this.from=n,this.to=r}slice(t=0,e=this.maps.length){return new l(this.maps,this.mirror,t,e)}copy(){return new l(this.maps.slice(),this.mirror&&this.mirror.slice(),this.from,this.to)}appendMap(t,e){this.to=this.maps.push(t),null!=e&&this.setMirror(this.maps.length-1,e)}appendMapping(t){for(let e=0,n=this.maps.length;e<t.maps.length;e++){let r=t.getMirror(e);this.appendMap(t.maps[e],null!=r&&r<e?n+r:void 0)}}getMirror(t){if(this.mirror)for(let e=0;e<this.mirror.length;e++)if(this.mirror[e]==t)return this.mirror[e+(e%2?-1:1)]}setMirror(t,e){this.mirror||(this.mirror=[]),this.mirror.push(t,e)}appendMappingInverted(t){for(let e=t.maps.length-1,n=this.maps.length+t.maps.length;e>=0;e--){let r=t.getMirror(e);this.appendMap(t.maps[e].invert(),null!=r&&r>e?n-r-1:void 0)}}invert(){let t=new l;return t.appendMappingInverted(this),t}map(t,e=1){if(this.mirror)return this._map(t,e,!0);for(let n=this.from;n<this.to;n++)t=this.maps[n].map(t,e);return t}mapResult(t,e=1){return this._map(t,e,!1)}_map(t,e,n){let r=0;for(let i=this.from;i<this.to;i++){let n=this.maps[i].mapResult(t,e);if(null!=n.recover){let e=this.getMirror(i);if(null!=e&&e>i&&e<this.to){i=e,t=this.maps[e].recover(n.recover);continue}}r|=n.delInfo,t=n.pos}return n?t:new s(t,r,null)}}const c=Object.create(null);class u{getMap(){return a.empty}merge(t){return null}static fromJSON(t,e){if(!e||!e.stepType)throw new RangeError("Invalid input for Step.fromJSON");let n=c[e.stepType];if(!n)throw new RangeError(`No step type ${e.stepType} defined`);return n.fromJSON(t,e)}static jsonID(t,e){if(t in c)throw new RangeError("Duplicate use of step JSON ID "+t);return c[t]=e,e.prototype.jsonID=t,e}}class d{constructor(t,e){this.doc=t,this.failed=e}static ok(t){return new d(t,null)}static fail(t){return new d(null,t)}static fromReplace(t,e,n,i){try{return d.ok(t.replace(e,n,i))}catch(o){if(o instanceof r.e4)return d.fail(o.message);throw o}}}function p(t,e,n){let i=[];for(let r=0;r<t.childCount;r++){let o=t.child(r);o.content.size&&(o=o.copy(p(o.content,e,o))),o.isInline&&(o=e(o,n,r)),i.push(o)}return r.HY.fromArray(i)}class h extends u{constructor(t,e,n){super(),this.from=t,this.to=e,this.mark=n}apply(t){let e=t.slice(this.from,this.to),n=t.resolve(this.from),i=n.node(n.sharedDepth(this.to)),o=new r.p2(p(e.content,((t,e)=>t.isAtom&&e.type.allowsMarkType(this.mark.type)?t.mark(this.mark.addToSet(t.marks)):t),i),e.openStart,e.openEnd);return d.fromReplace(t,this.from,this.to,o)}invert(){return new f(this.from,this.to,this.mark)}map(t){let e=t.mapResult(this.from,1),n=t.mapResult(this.to,-1);return e.deleted&&n.deleted||e.pos>=n.pos?null:new h(e.pos,n.pos,this.mark)}merge(t){return t instanceof h&&t.mark.eq(this.mark)&&this.from<=t.to&&this.to>=t.from?new h(Math.min(this.from,t.from),Math.max(this.to,t.to),this.mark):null}toJSON(){return{stepType:"addMark",mark:this.mark.toJSON(),from:this.from,to:this.to}}static fromJSON(t,e){if("number"!=typeof e.from||"number"!=typeof e.to)throw new RangeError("Invalid input for AddMarkStep.fromJSON");return new h(e.from,e.to,t.markFromJSON(e.mark))}}u.jsonID("addMark",h);class f extends u{constructor(t,e,n){super(),this.from=t,this.to=e,this.mark=n}apply(t){let e=t.slice(this.from,this.to),n=new r.p2(p(e.content,(t=>t.mark(this.mark.removeFromSet(t.marks))),t),e.openStart,e.openEnd);return d.fromReplace(t,this.from,this.to,n)}invert(){return new h(this.from,this.to,this.mark)}map(t){let e=t.mapResult(this.from,1),n=t.mapResult(this.to,-1);return e.deleted&&n.deleted||e.pos>=n.pos?null:new f(e.pos,n.pos,this.mark)}merge(t){return t instanceof f&&t.mark.eq(this.mark)&&this.from<=t.to&&this.to>=t.from?new f(Math.min(this.from,t.from),Math.max(this.to,t.to),this.mark):null}toJSON(){return{stepType:"removeMark",mark:this.mark.toJSON(),from:this.from,to:this.to}}static fromJSON(t,e){if("number"!=typeof e.from||"number"!=typeof e.to)throw new RangeError("Invalid input for RemoveMarkStep.fromJSON");return new f(e.from,e.to,t.markFromJSON(e.mark))}}u.jsonID("removeMark",f);class m extends u{constructor(t,e){super(),this.pos=t,this.mark=e}apply(t){let e=t.nodeAt(this.pos);if(!e)return d.fail("No node at mark step's position");let n=e.type.create(e.attrs,null,this.mark.addToSet(e.marks));return d.fromReplace(t,this.pos,this.pos+1,new r.p2(r.HY.from(n),0,e.isLeaf?0:1))}invert(t){let e=t.nodeAt(this.pos);if(e){let t=this.mark.addToSet(e.marks);if(t.length==e.marks.length){for(let n=0;n<e.marks.length;n++)if(!e.marks[n].isInSet(t))return new m(this.pos,e.marks[n]);return new m(this.pos,this.mark)}}return new g(this.pos,this.mark)}map(t){let e=t.mapResult(this.pos,1);return e.deletedAfter?null:new m(e.pos,this.mark)}toJSON(){return{stepType:"addNodeMark",pos:this.pos,mark:this.mark.toJSON()}}static fromJSON(t,e){if("number"!=typeof e.pos)throw new RangeError("Invalid input for AddNodeMarkStep.fromJSON");return new m(e.pos,t.markFromJSON(e.mark))}}u.jsonID("addNodeMark",m);class g extends u{constructor(t,e){super(),this.pos=t,this.mark=e}apply(t){let e=t.nodeAt(this.pos);if(!e)return d.fail("No node at mark step's position");let n=e.type.create(e.attrs,null,this.mark.removeFromSet(e.marks));return d.fromReplace(t,this.pos,this.pos+1,new r.p2(r.HY.from(n),0,e.isLeaf?0:1))}invert(t){let e=t.nodeAt(this.pos);return e&&this.mark.isInSet(e.marks)?new m(this.pos,this.mark):this}map(t){let e=t.mapResult(this.pos,1);return e.deletedAfter?null:new g(e.pos,this.mark)}toJSON(){return{stepType:"removeNodeMark",pos:this.pos,mark:this.mark.toJSON()}}static fromJSON(t,e){if("number"!=typeof e.pos)throw new RangeError("Invalid input for RemoveNodeMarkStep.fromJSON");return new g(e.pos,t.markFromJSON(e.mark))}}u.jsonID("removeNodeMark",g);class y extends u{constructor(t,e,n,r=!1){super(),this.from=t,this.to=e,this.slice=n,this.structure=r}apply(t){return this.structure&&b(t,this.from,this.to)?d.fail("Structure replace would overwrite content"):d.fromReplace(t,this.from,this.to,this.slice)}getMap(){return new a([this.from,this.to-this.from,this.slice.size])}invert(t){return new y(this.from,this.from+this.slice.size,t.slice(this.from,this.to))}map(t){let e=t.mapResult(this.from,1),n=t.mapResult(this.to,-1);return e.deletedAcross&&n.deletedAcross?null:new y(e.pos,Math.max(e.pos,n.pos),this.slice)}merge(t){if(!(t instanceof y)||t.structure||this.structure)return null;if(this.from+this.slice.size!=t.from||this.slice.openEnd||t.slice.openStart){if(t.to!=this.from||this.slice.openStart||t.slice.openEnd)return null;{let e=this.slice.size+t.slice.size==0?r.p2.empty:new r.p2(t.slice.content.append(this.slice.content),t.slice.openStart,this.slice.openEnd);return new y(t.from,this.to,e,this.structure)}}{let e=this.slice.size+t.slice.size==0?r.p2.empty:new r.p2(this.slice.content.append(t.slice.content),this.slice.openStart,t.slice.openEnd);return new y(this.from,this.to+(t.to-t.from),e,this.structure)}}toJSON(){let t={stepType:"replace",from:this.from,to:this.to};return this.slice.size&&(t.slice=this.slice.toJSON()),this.structure&&(t.structure=!0),t}static fromJSON(t,e){if("number"!=typeof e.from||"number"!=typeof e.to)throw new RangeError("Invalid input for ReplaceStep.fromJSON");return new y(e.from,e.to,r.p2.fromJSON(t,e.slice),!!e.structure)}}u.jsonID("replace",y);class v extends u{constructor(t,e,n,r,i,o,s=!1){super(),this.from=t,this.to=e,this.gapFrom=n,this.gapTo=r,this.slice=i,this.insert=o,this.structure=s}apply(t){if(this.structure&&(b(t,this.from,this.gapFrom)||b(t,this.gapTo,this.to)))return d.fail("Structure gap-replace would overwrite content");let e=t.slice(this.gapFrom,this.gapTo);if(e.openStart||e.openEnd)return d.fail("Gap is not a flat range");let n=this.slice.insertAt(this.insert,e.content);return n?d.fromReplace(t,this.from,this.to,n):d.fail("Content does not fit in gap")}getMap(){return new a([this.from,this.gapFrom-this.from,this.insert,this.gapTo,this.to-this.gapTo,this.slice.size-this.insert])}invert(t){let e=this.gapTo-this.gapFrom;return new v(this.from,this.from+this.slice.size+e,this.from+this.insert,this.from+this.insert+e,t.slice(this.from,this.to).removeBetween(this.gapFrom-this.from,this.gapTo-this.from),this.gapFrom-this.from,this.structure)}map(t){let e=t.mapResult(this.from,1),n=t.mapResult(this.to,-1),r=this.from==this.gapFrom?e.pos:t.map(this.gapFrom,-1),i=this.to==this.gapTo?n.pos:t.map(this.gapTo,1);return e.deletedAcross&&n.deletedAcross||r<e.pos||i>n.pos?null:new v(e.pos,n.pos,r,i,this.slice,this.insert,this.structure)}toJSON(){let t={stepType:"replaceAround",from:this.from,to:this.to,gapFrom:this.gapFrom,gapTo:this.gapTo,insert:this.insert};return this.slice.size&&(t.slice=this.slice.toJSON()),this.structure&&(t.structure=!0),t}static fromJSON(t,e){if("number"!=typeof e.from||"number"!=typeof e.to||"number"!=typeof e.gapFrom||"number"!=typeof e.gapTo||"number"!=typeof e.insert)throw new RangeError("Invalid input for ReplaceAroundStep.fromJSON");return new v(e.from,e.to,e.gapFrom,e.gapTo,r.p2.fromJSON(t,e.slice),e.insert,!!e.structure)}}function b(t,e,n){let r=t.resolve(e),i=n-e,o=r.depth;for(;i>0&&o>0&&r.indexAfter(o)==r.node(o).childCount;)o--,i--;if(i>0){let t=r.node(o).maybeChild(r.indexAfter(o));for(;i>0;){if(!t||t.isLeaf)return!0;t=t.firstChild,i--}}return!1}function w(t,e,n,i=n.contentMatch,o=!0){let s=t.doc.nodeAt(e),a=[],l=e+1;for(let c=0;c<s.childCount;c++){let e=s.child(c),u=l+e.nodeSize,d=i.matchType(e.type);if(d){i=d;for(let r=0;r<e.marks.length;r++)n.allowsMarkType(e.marks[r].type)||t.step(new f(l,u,e.marks[r]));if(o&&e.isText&&"pre"!=n.whitespace){let t,i,o=/\r?\n|\r/g;for(;t=o.exec(e.text);)i||(i=new r.p2(r.HY.from(n.schema.text(" ",n.allowedMarks(e.marks))),0,0)),a.push(new y(l+t.index,l+t.index+t[0].length,i))}}else a.push(new y(l,u,r.p2.empty));l=u}if(!i.validEnd){let e=i.fillBefore(r.HY.empty,!0);t.replace(l,l,new r.p2(e,0,0))}for(let r=a.length-1;r>=0;r--)t.step(a[r])}function x(t,e,n){return(0==e||t.canReplace(e,t.childCount))&&(n==t.childCount||t.canReplace(0,n))}function k(t){let e=t.parent.content.cutByIndex(t.startIndex,t.endIndex);for(let n=t.depth;;--n){let r=t.$from.node(n),i=t.$from.index(n),o=t.$to.indexAfter(n);if(n<t.depth&&r.canReplace(i,o,e))return n;if(0==n||r.type.spec.isolating||!x(r,i,o))break}return null}function S(t,e,n=null,r=t){let i=function(t,e){let{parent:n,startIndex:r,endIndex:i}=t,o=n.contentMatchAt(r).findWrapping(e);if(!o)return null;let s=o.length?o[0]:e;return n.canReplaceWith(r,i,s)?o:null}(t,e),o=i&&function(t,e){let{parent:n,startIndex:r,endIndex:i}=t,o=n.child(r),s=e.contentMatch.findWrapping(o.type);if(!s)return null;let a=(s.length?s[s.length-1]:e).contentMatch;for(let l=r;a&&l<i;l++)a=a.matchType(n.child(l).type);return a&&a.validEnd?s:null}(r,e);return o?i.map(M).concat({type:e,attrs:n}).concat(o.map(M)):null}function M(t){return{type:t,attrs:null}}function C(t,e,n=1,r){let i=t.resolve(e),o=i.depth-n,s=r&&r[r.length-1]||i.parent;if(o<0||i.parent.type.spec.isolating||!i.parent.canReplace(i.index(),i.parent.childCount)||!s.type.validContent(i.parent.content.cutByIndex(i.index(),i.parent.childCount)))return!1;for(let c=i.depth-1,u=n-2;c>o;c--,u--){let t=i.node(c),e=i.index(c);if(t.type.spec.isolating)return!1;let n=t.content.cutByIndex(e,t.childCount),o=r&&r[u+1];o&&(n=n.replaceChild(0,o.type.create(o.attrs)));let s=r&&r[u]||t;if(!t.canReplace(e+1,t.childCount)||!s.type.validContent(n))return!1}let a=i.indexAfter(o),l=r&&r[0];return i.node(o).canReplaceWith(a,a,l?l.type:i.node(o+1).type)}function A(t,e){let n=t.resolve(e),r=n.index();return T(n.nodeBefore,n.nodeAfter)&&n.parent.canReplace(r,r+1)}function T(t,e){return!(!t||!e||t.isLeaf||!t.canAppend(e))}function O(t,e,n=-1){let r=t.resolve(e);for(let i=r.depth;;i--){let t,o,s=r.index(i);if(i==r.depth?(t=r.nodeBefore,o=r.nodeAfter):n>0?(t=r.node(i+1),s++,o=r.node(i).maybeChild(s)):(t=r.node(i).maybeChild(s-1),o=r.node(i+1)),t&&!t.isTextblock&&T(t,o)&&r.node(i).canReplace(s,s+1))return e;if(0==i)break;e=n<0?r.before(i):r.after(i)}}function E(t,e,n){let r=t.resolve(e);if(!n.content.size)return e;let i=n.content;for(let o=0;o<n.openStart;o++)i=i.firstChild.content;for(let o=1;o<=(0==n.openStart&&n.size?2:1);o++)for(let t=r.depth;t>=0;t--){let e=t==r.depth?0:r.pos<=(r.start(t+1)+r.end(t+1))/2?-1:1,n=r.index(t)+(e>0?1:0),s=r.node(t),a=!1;if(1==o)a=s.canReplace(n,n,i);else{let t=s.contentMatchAt(n).findWrapping(i.firstChild.type);a=t&&s.canReplaceWith(n,n,t[0])}if(a)return 0==e?r.pos:e<0?r.before(t+1):r.after(t+1)}return null}function I(t,e,n=e,i=r.p2.empty){if(e==n&&!i.size)return null;let o=t.resolve(e),s=t.resolve(n);return N(o,s,i)?new y(e,n,i):new R(o,s,i).fit()}function N(t,e,n){return!n.openStart&&!n.openEnd&&t.start()==e.start()&&t.parent.canReplace(t.index(),e.index(),n.content)}u.jsonID("replaceAround",v);class R{constructor(t,e,n){this.$from=t,this.$to=e,this.unplaced=n,this.frontier=[],this.placed=r.HY.empty;for(let r=0;r<=t.depth;r++){let e=t.node(r);this.frontier.push({type:e.type,match:e.contentMatchAt(t.indexAfter(r))})}for(let i=t.depth;i>0;i--)this.placed=r.HY.from(t.node(i).copy(this.placed))}get depth(){return this.frontier.length-1}fit(){for(;this.unplaced.size;){let t=this.findFittable();t?this.placeNodes(t):this.openMore()||this.dropNode()}let t=this.mustMoveInline(),e=this.placed.size-this.depth-this.$from.depth,n=this.$from,i=this.close(t<0?this.$to:n.doc.resolve(t));if(!i)return null;let o=this.placed,s=n.depth,a=i.depth;for(;s&&a&&1==o.childCount;)o=o.firstChild.content,s--,a--;let l=new r.p2(o,s,a);return t>-1?new v(n.pos,t,this.$to.pos,this.$to.end(),l,e):l.size||n.pos!=this.$to.pos?new y(n.pos,i.pos,l):null}findFittable(){let t=this.unplaced.openStart;for(let e=this.unplaced.content,n=0,r=this.unplaced.openEnd;n<t;n++){let i=e.firstChild;if(e.childCount>1&&(r=0),i.type.spec.isolating&&r<=n){t=n;break}e=i.content}for(let e=1;e<=2;e++)for(let n=1==e?t:this.unplaced.openStart;n>=0;n--){let t,i=null;n?(i=F(this.unplaced.content,n-1).firstChild,t=i.content):t=this.unplaced.content;let o=t.firstChild;for(let s=this.depth;s>=0;s--){let t,{type:a,match:l}=this.frontier[s],c=null;if(1==e&&(o?l.matchType(o.type)||(c=l.fillBefore(r.HY.from(o),!1)):i&&a.compatibleContent(i.type)))return{sliceDepth:n,frontierDepth:s,parent:i,inject:c};if(2==e&&o&&(t=l.findWrapping(o.type)))return{sliceDepth:n,frontierDepth:s,parent:i,wrap:t};if(i&&l.matchType(i.type))break}}}openMore(){let{content:t,openStart:e,openEnd:n}=this.unplaced,i=F(t,e);return!(!i.childCount||i.firstChild.isLeaf)&&(this.unplaced=new r.p2(t,e+1,Math.max(n,i.size+e>=t.size-n?e+1:0)),!0)}dropNode(){let{content:t,openStart:e,openEnd:n}=this.unplaced,i=F(t,e);if(i.childCount<=1&&e>0){let o=t.size-e<=e+i.size;this.unplaced=new r.p2(D(t,e-1,1),e-1,o?e-1:n)}else this.unplaced=new r.p2(D(t,e,1),e,n)}placeNodes({sliceDepth:t,frontierDepth:e,parent:n,inject:i,wrap:o}){for(;this.depth>e;)this.closeFrontierNode();if(o)for(let r=0;r<o.length;r++)this.openFrontierNode(o[r]);let s=this.unplaced,a=n?n.content:s.content,l=s.openStart-t,c=0,u=[],{match:d,type:p}=this.frontier[e];if(i){for(let t=0;t<i.childCount;t++)u.push(i.child(t));d=d.matchFragment(i)}let h=a.size+t-(s.content.size-s.openEnd);for(;c<a.childCount;){let t=a.child(c),e=d.matchType(t.type);if(!e)break;c++,(c>1||0==l||t.content.size)&&(d=e,u.push(H(t.mark(p.allowedMarks(t.marks)),1==c?l:0,c==a.childCount?h:-1)))}let f=c==a.childCount;f||(h=-1),this.placed=L(this.placed,e,r.HY.from(u)),this.frontier[e].match=d,f&&h<0&&n&&n.type==this.frontier[this.depth].type&&this.frontier.length>1&&this.closeFrontierNode();for(let r=0,m=a;r<h;r++){let t=m.lastChild;this.frontier.push({type:t.type,match:t.contentMatchAt(t.childCount)}),m=t.content}this.unplaced=f?0==t?r.p2.empty:new r.p2(D(s.content,t-1,1),t-1,h<0?s.openEnd:t-1):new r.p2(D(s.content,t,c),s.openStart,s.openEnd)}mustMoveInline(){if(!this.$to.parent.isTextblock)return-1;let t,e=this.frontier[this.depth];if(!e.type.isTextblock||!_(this.$to,this.$to.depth,e.type,e.match,!1)||this.$to.depth==this.depth&&(t=this.findCloseLevel(this.$to))&&t.depth==this.depth)return-1;let{depth:n}=this.$to,r=this.$to.after(n);for(;n>1&&r==this.$to.end(--n);)++r;return r}findCloseLevel(t){t:for(let e=Math.min(this.depth,t.depth);e>=0;e--){let{match:n,type:r}=this.frontier[e],i=e<t.depth&&t.end(e+1)==t.pos+(t.depth-(e+1)),o=_(t,e,r,n,i);if(o){for(let n=e-1;n>=0;n--){let{match:e,type:r}=this.frontier[n],i=_(t,n,r,e,!0);if(!i||i.childCount)continue t}return{depth:e,fit:o,move:i?t.doc.resolve(t.after(e+1)):t}}}}close(t){let e=this.findCloseLevel(t);if(!e)return null;for(;this.depth>e.depth;)this.closeFrontierNode();e.fit.childCount&&(this.placed=L(this.placed,e.depth,e.fit)),t=e.move;for(let n=e.depth+1;n<=t.depth;n++){let e=t.node(n),r=e.type.contentMatch.fillBefore(e.content,!0,t.index(n));this.openFrontierNode(e.type,e.attrs,r)}return t}openFrontierNode(t,e=null,n){let i=this.frontier[this.depth];i.match=i.match.matchType(t),this.placed=L(this.placed,this.depth,r.HY.from(t.create(e,n))),this.frontier.push({type:t,match:t.contentMatch})}closeFrontierNode(){let t=this.frontier.pop().match.fillBefore(r.HY.empty,!0);t.childCount&&(this.placed=L(this.placed,this.frontier.length,t))}}function D(t,e,n){return 0==e?t.cutByIndex(n,t.childCount):t.replaceChild(0,t.firstChild.copy(D(t.firstChild.content,e-1,n)))}function L(t,e,n){return 0==e?t.append(n):t.replaceChild(t.childCount-1,t.lastChild.copy(L(t.lastChild.content,e-1,n)))}function F(t,e){for(let n=0;n<e;n++)t=t.firstChild.content;return t}function H(t,e,n){if(e<=0)return t;let i=t.content;return e>1&&(i=i.replaceChild(0,H(i.firstChild,e-1,1==i.childCount?n-1:0))),e>0&&(i=t.type.contentMatch.fillBefore(i).append(i),n<=0&&(i=i.append(t.type.contentMatch.matchFragment(i).fillBefore(r.HY.empty,!0)))),t.copy(i)}function _(t,e,n,r,i){let o=t.node(e),s=i?t.indexAfter(e):t.index(e);if(s==o.childCount&&!n.compatibleContent(o.type))return null;let a=r.fillBefore(o.content,!0,s);return a&&!function(t,e,n){for(let r=n;r<e.childCount;r++)if(!t.allowsMarks(e.child(r).marks))return!0;return!1}(n,o.content,s)?a:null}function B(t,e,n,i,o){if(e<n){let r=t.firstChild;t=t.replaceChild(0,r.copy(B(r.content,e+1,n,i,r)))}if(e>i){let e=o.contentMatchAt(0),n=e.fillBefore(t).append(t);t=n.append(e.matchFragment(n).fillBefore(r.HY.empty,!0))}return t}function V(t,e){let n=[];for(let r=Math.min(t.depth,e.depth);r>=0;r--){let i=t.start(r);if(i<t.pos-(t.depth-r)||e.end(r)>e.pos+(e.depth-r)||t.node(r).type.spec.isolating||e.node(r).type.spec.isolating)break;(i==e.start(r)||r==t.depth&&r==e.depth&&t.parent.inlineContent&&e.parent.inlineContent&&r&&e.start(r-1)==i-1)&&n.push(r)}return n}class z extends u{constructor(t,e,n){super(),this.pos=t,this.attr=e,this.value=n}apply(t){let e=t.nodeAt(this.pos);if(!e)return d.fail("No node at attribute step's position");let n=Object.create(null);for(let r in e.attrs)n[r]=e.attrs[r];n[this.attr]=this.value;let i=e.type.create(n,null,e.marks);return d.fromReplace(t,this.pos,this.pos+1,new r.p2(r.HY.from(i),0,e.isLeaf?0:1))}getMap(){return a.empty}invert(t){return new z(this.pos,this.attr,t.nodeAt(this.pos).attrs[this.attr])}map(t){let e=t.mapResult(this.pos,1);return e.deletedAfter?null:new z(e.pos,this.attr,this.value)}toJSON(){return{stepType:"attr",pos:this.pos,attr:this.attr,value:this.value}}static fromJSON(t,e){if("number"!=typeof e.pos||"string"!=typeof e.attr)throw new RangeError("Invalid input for AttrStep.fromJSON");return new z(e.pos,e.attr,e.value)}}u.jsonID("attr",z);class $ extends u{constructor(t,e){super(),this.attr=t,this.value=e}apply(t){let e=Object.create(null);for(let r in t.attrs)e[r]=t.attrs[r];e[this.attr]=this.value;let n=t.type.create(e,t.content,t.marks);return d.ok(n)}getMap(){return a.empty}invert(t){return new $(this.attr,t.attrs[this.attr])}map(t){return this}toJSON(){return{stepType:"docAttr",attr:this.attr,value:this.value}}static fromJSON(t,e){if("string"!=typeof e.attr)throw new RangeError("Invalid input for DocAttrStep.fromJSON");return new $(e.attr,e.value)}}u.jsonID("docAttr",$);let j=class extends Error{};j=function t(e){let n=Error.call(this,e);return n.__proto__=t.prototype,n},(j.prototype=Object.create(Error.prototype)).constructor=j,j.prototype.name="TransformError";class P{constructor(t){this.doc=t,this.steps=[],this.docs=[],this.mapping=new l}get before(){return this.docs.length?this.docs[0]:this.doc}step(t){let e=this.maybeStep(t);if(e.failed)throw new j(e.failed);return this}maybeStep(t){let e=t.apply(this.doc);return e.failed||this.addStep(t,e.doc),e}get docChanged(){return this.steps.length>0}addStep(t,e){this.docs.push(this.doc),this.steps.push(t),this.mapping.appendMap(t.getMap()),this.doc=e}replace(t,e=t,n=r.p2.empty){let i=I(this.doc,t,e,n);return i&&this.step(i),this}replaceWith(t,e,n){return this.replace(t,e,new r.p2(r.HY.from(n),0,0))}delete(t,e){return this.replace(t,e,r.p2.empty)}insert(t,e){return this.replaceWith(t,t,e)}replaceRange(t,e,n){return function(t,e,n,i){if(!i.size)return t.deleteRange(e,n);let o=t.doc.resolve(e),s=t.doc.resolve(n);if(N(o,s,i))return t.step(new y(e,n,i));let a=V(o,t.doc.resolve(n));0==a[a.length-1]&&a.pop();let l=-(o.depth+1);a.unshift(l);for(let r=o.depth,f=o.pos-1;r>0;r--,f--){let t=o.node(r).type.spec;if(t.defining||t.definingAsContext||t.isolating)break;a.indexOf(r)>-1?l=r:o.before(r)==f&&a.splice(1,0,-r)}let c=a.indexOf(l),u=[],d=i.openStart;for(let r=i.content,f=0;;f++){let t=r.firstChild;if(u.push(t),f==i.openStart)break;r=t.content}for(let r=d-1;r>=0;r--){let t=u[r],e=(p=t.type).spec.defining||p.spec.definingForContent;if(e&&!t.sameMarkup(o.node(Math.abs(l)-1)))d=r;else if(e||!t.type.isTextblock)break}var p;for(let f=i.openStart;f>=0;f--){let e=(f+d+1)%(i.openStart+1),l=u[e];if(l)for(let u=0;u<a.length;u++){let d=a[(u+c)%a.length],p=!0;d<0&&(p=!1,d=-d);let h=o.node(d-1),f=o.index(d-1);if(h.canReplaceWith(f,f,l.type,l.marks))return t.replace(o.before(d),p?s.after(d):n,new r.p2(B(i.content,0,i.openStart,e),e,i.openEnd))}}let h=t.steps.length;for(let r=a.length-1;r>=0&&(t.replace(e,n,i),!(t.steps.length>h));r--){let t=a[r];t<0||(e=o.before(t),n=s.after(t))}}(this,t,e,n),this}replaceRangeWith(t,e,n){return function(t,e,n,i){if(!i.isInline&&e==n&&t.doc.resolve(e).parent.content.size){let r=function(t,e,n){let r=t.resolve(e);if(r.parent.canReplaceWith(r.index(),r.index(),n))return e;if(0==r.parentOffset)for(let i=r.depth-1;i>=0;i--){let t=r.index(i);if(r.node(i).canReplaceWith(t,t,n))return r.before(i+1);if(t>0)return null}if(r.parentOffset==r.parent.content.size)for(let i=r.depth-1;i>=0;i--){let t=r.indexAfter(i);if(r.node(i).canReplaceWith(t,t,n))return r.after(i+1);if(t<r.node(i).childCount)return null}return null}(t.doc,e,i.type);null!=r&&(e=n=r)}t.replaceRange(e,n,new r.p2(r.HY.from(i),0,0))}(this,t,e,n),this}deleteRange(t,e){return function(t,e,n){let r=t.doc.resolve(e),i=t.doc.resolve(n),o=V(r,i);for(let s=0;s<o.length;s++){let e=o[s],n=s==o.length-1;if(n&&0==e||r.node(e).type.contentMatch.validEnd)return t.delete(r.start(e),i.end(e));if(e>0&&(n||r.node(e-1).canReplace(r.index(e-1),i.indexAfter(e-1))))return t.delete(r.before(e),i.after(e))}for(let s=1;s<=r.depth&&s<=i.depth;s++)if(e-r.start(s)==r.depth-s&&n>r.end(s)&&i.end(s)-n!=i.depth-s)return t.delete(r.before(s),n);t.delete(e,n)}(this,t,e),this}lift(t,e){return function(t,e,n){let{$from:i,$to:o,depth:s}=e,a=i.before(s+1),l=o.after(s+1),c=a,u=l,d=r.HY.empty,p=0;for(let m=s,g=!1;m>n;m--)g||i.index(m)>0?(g=!0,d=r.HY.from(i.node(m).copy(d)),p++):c--;let h=r.HY.empty,f=0;for(let m=s,g=!1;m>n;m--)g||o.after(m+1)<o.end(m)?(g=!0,h=r.HY.from(o.node(m).copy(h)),f++):u++;t.step(new v(c,u,a,l,new r.p2(d.append(h),p,f),d.size-p,!0))}(this,t,e),this}join(t,e=1){return function(t,e,n){let i=new y(e-n,e+n,r.p2.empty,!0);t.step(i)}(this,t,e),this}wrap(t,e){return function(t,e,n){let i=r.HY.empty;for(let a=n.length-1;a>=0;a--){if(i.size){let t=n[a].type.contentMatch.matchFragment(i);if(!t||!t.validEnd)throw new RangeError("Wrapper type given to Transform.wrap does not form valid content of its parent wrapper")}i=r.HY.from(n[a].type.create(n[a].attrs,i))}let o=e.start,s=e.end;t.step(new v(o,s,o,s,new r.p2(i,0,0),n.length,!0))}(this,t,e),this}setBlockType(t,e=t,n,i=null){return function(t,e,n,i,o){if(!i.isTextblock)throw new RangeError("Type given to setBlockType should be a textblock");let s=t.steps.length;t.doc.nodesBetween(e,n,((e,n)=>{let a="function"==typeof o?o(e):o;if(e.isTextblock&&!e.hasMarkup(i,a)&&function(t,e,n){let r=t.resolve(e),i=r.index();return r.parent.canReplaceWith(i,i+1,n)}(t.doc,t.mapping.slice(s).map(n),i)){let o=null;if(i.schema.linebreakReplacement){let t="pre"==i.whitespace,e=!!i.contentMatch.matchType(i.schema.linebreakReplacement);t&&!e?o=!1:!t&&e&&(o=!0)}!1===o&&function(t,e,n,r){e.forEach(((i,o)=>{if(i.type==i.type.schema.linebreakReplacement){let i=t.mapping.slice(r).map(n+1+o);t.replaceWith(i,i+1,e.type.schema.text("\n"))}}))}(t,e,n,s),w(t,t.mapping.slice(s).map(n,1),i,void 0,null===o);let l=t.mapping.slice(s),c=l.map(n,1),u=l.map(n+e.nodeSize,1);return t.step(new v(c,u,c+1,u-1,new r.p2(r.HY.from(i.create(a,null,e.marks)),0,0),1,!0)),!0===o&&function(t,e,n,r){e.forEach(((i,o)=>{if(i.isText){let s,a=/\r?\n|\r/g;for(;s=a.exec(i.text);){let i=t.mapping.slice(r).map(n+1+o+s.index);t.replaceWith(i,i+1,e.type.schema.linebreakReplacement.create())}}}))}(t,e,n,s),!1}}))}(this,t,e,n,i),this}setNodeMarkup(t,e,n=null,i){return function(t,e,n,i,o){let s=t.doc.nodeAt(e);if(!s)throw new RangeError("No node at given position");n||(n=s.type);let a=n.create(i,null,o||s.marks);if(s.isLeaf)return t.replaceWith(e,e+s.nodeSize,a);if(!n.validContent(s.content))throw new RangeError("Invalid content for node type "+n.name);t.step(new v(e,e+s.nodeSize,e+1,e+s.nodeSize-1,new r.p2(r.HY.from(a),0,0),1,!0))}(this,t,e,n,i),this}setNodeAttribute(t,e,n){return this.step(new z(t,e,n)),this}setDocAttribute(t,e){return this.step(new $(t,e)),this}addNodeMark(t,e){return this.step(new m(t,e)),this}removeNodeMark(t,e){if(!(e instanceof r.vc)){let n=this.doc.nodeAt(t);if(!n)throw new RangeError("No node at position "+t);if(!(e=e.isInSet(n.marks)))return this}return this.step(new g(t,e)),this}split(t,e=1,n){return function(t,e,n=1,i){let o=t.doc.resolve(e),s=r.HY.empty,a=r.HY.empty;for(let l=o.depth,c=o.depth-n,u=n-1;l>c;l--,u--){s=r.HY.from(o.node(l).copy(s));let t=i&&i[u];a=r.HY.from(t?t.type.create(t.attrs,a):o.node(l).copy(a))}t.step(new y(e,e,new r.p2(s.append(a),n,n),!0))}(this,t,e,n),this}addMark(t,e,n){return function(t,e,n,r){let i,o,s=[],a=[];t.doc.nodesBetween(e,n,((t,l,c)=>{if(!t.isInline)return;let u=t.marks;if(!r.isInSet(u)&&c.type.allowsMarkType(r.type)){let c=Math.max(l,e),d=Math.min(l+t.nodeSize,n),p=r.addToSet(u);for(let t=0;t<u.length;t++)u[t].isInSet(p)||(i&&i.to==c&&i.mark.eq(u[t])?i.to=d:s.push(i=new f(c,d,u[t])));o&&o.to==c?o.to=d:a.push(o=new h(c,d,r))}})),s.forEach((e=>t.step(e))),a.forEach((e=>t.step(e)))}(this,t,e,n),this}removeMark(t,e,n){return function(t,e,n,i){let o=[],s=0;t.doc.nodesBetween(e,n,((t,a)=>{if(!t.isInline)return;s++;let l=null;if(i instanceof r.ZU){let e,n=t.marks;for(;e=i.isInSet(n);)(l||(l=[])).push(e),n=e.removeFromSet(n)}else i?i.isInSet(t.marks)&&(l=[i]):l=t.marks;if(l&&l.length){let r=Math.min(a+t.nodeSize,n);for(let t=0;t<l.length;t++){let n,i=l[t];for(let t=0;t<o.length;t++){let e=o[t];e.step==s-1&&i.eq(o[t].style)&&(n=e)}n?(n.to=r,n.step=s):o.push({style:i,from:Math.max(a,e),to:r,step:s})}}})),o.forEach((e=>t.step(new f(e.from,e.to,e.style))))}(this,t,e,n),this}clearIncompatible(t,e,n){return w(this,t,e,n),this}}},7536:function(t,e,n){n.d(e,{Qr:function(){return W},cI:function(){return Et}});var r=n(7294),i=t=>"checkbox"===t.type,o=t=>t instanceof Date,s=t=>null==t;const a=t=>"object"===typeof t;var l=t=>!s(t)&&!Array.isArray(t)&&a(t)&&!o(t),c=t=>l(t)&&t.target?i(t.target)?t.target.checked:t.target.value:t,u=(t,e)=>t.has((t=>t.substring(0,t.search(/\.\d+(\.|$)/))||t)(e)),d="undefined"!==typeof window&&"undefined"!==typeof window.HTMLElement&&"undefined"!==typeof document;function p(t){let e;const n=Array.isArray(t);if(t instanceof Date)e=new Date(t);else if(t instanceof Set)e=new Set(t);else{if(d&&(t instanceof Blob||t instanceof FileList)||!n&&!l(t))return t;if(e=n?[]:{},n||(t=>{const e=t.constructor&&t.constructor.prototype;return l(e)&&e.hasOwnProperty("isPrototypeOf")})(t))for(const n in t)t.hasOwnProperty(n)&&(e[n]=p(t[n]));else e=t}return e}var h=t=>Array.isArray(t)?t.filter(Boolean):[],f=t=>void 0===t,m=(t,e,n)=>{if(!e||!l(t))return n;const r=h(e.split(/[,[\].]+?/)).reduce(((t,e)=>s(t)?t:t[e]),t);return f(r)||r===t?f(t[e])?n:t[e]:r},g=t=>"boolean"===typeof t,y=t=>/^\w*$/.test(t),v=t=>h(t.replace(/["|']|\]/g,"").split(/\.|\[/)),b=(t,e,n)=>{let r=-1;const i=y(e)?[e]:v(e),o=i.length,s=o-1;for(;++r<o;){const e=i[r];let o=n;if(r!==s){const n=t[e];o=l(n)||Array.isArray(n)?n:isNaN(+i[r+1])?{}:[]}if("__proto__"===e)return;t[e]=o,t=t[e]}return t};const w="blur",x="focusout",k="change",S="onBlur",M="onChange",C="onSubmit",A="onTouched",T="all",O="max",E="min",I="maxLength",N="minLength",R="pattern",D="required",L="validate",F=r.createContext(null),H=()=>r.useContext(F);var _=(t,e,n,r=!0)=>{const i={defaultValues:e._defaultValues};for(const o in t)Object.defineProperty(i,o,{get:()=>{const i=o;return e._proxyFormState[i]!==T&&(e._proxyFormState[i]=!r||T),n&&(n[i]=!0),t[i]}});return i},B=t=>l(t)&&!Object.keys(t).length,V=(t,e,n,r)=>{n(t);const{name:i,...o}=t;return B(o)||Object.keys(o).length>=Object.keys(e).length||Object.keys(o).find((t=>e[t]===(!r||T)))},z=t=>Array.isArray(t)?t:[t],$=(t,e,n)=>!t||!e||t===e||z(t).some((t=>t&&(n?t===e:t.startsWith(e)||e.startsWith(t))));function j(t){const e=r.useRef(t);e.current=t,r.useEffect((()=>{const n=!t.disabled&&e.current.subject&&e.current.subject.subscribe({next:e.current.next});return()=>{n&&n.unsubscribe()}}),[t.disabled])}var P=t=>"string"===typeof t,J=(t,e,n,r,i)=>P(t)?(r&&e.watch.add(t),m(n,t,i)):Array.isArray(t)?t.map((t=>(r&&e.watch.add(t),m(n,t)))):(r&&(e.watchAll=!0),n);function q(t){const e=H(),{name:n,disabled:i,control:o=e.control,shouldUnregister:s}=t,a=u(o._names.array,n),l=function(t){const e=H(),{control:n=e.control,name:i,defaultValue:o,disabled:s,exact:a}=t||{},l=r.useRef(i);l.current=i,j({disabled:s,subject:n._subjects.values,next:t=>{$(l.current,t.name,a)&&u(p(J(l.current,n._names,t.values||n._formValues,!1,o)))}});const[c,u]=r.useState(n._getWatch(i,o));return r.useEffect((()=>n._removeUnmounted())),c}({control:o,name:n,defaultValue:m(o._formValues,n,m(o._defaultValues,n,t.defaultValue)),exact:!0}),d=function(t){const e=H(),{control:n=e.control,disabled:i,name:o,exact:s}=t||{},[a,l]=r.useState(n._formState),c=r.useRef(!0),u=r.useRef({isDirty:!1,isLoading:!1,dirtyFields:!1,touchedFields:!1,validatingFields:!1,isValidating:!1,isValid:!1,errors:!1}),d=r.useRef(o);return d.current=o,j({disabled:i,next:t=>c.current&&$(d.current,t.name,s)&&V(t,u.current,n._updateFormState)&&l({...n._formState,...t}),subject:n._subjects.state}),r.useEffect((()=>(c.current=!0,u.current.isValid&&n._updateValid(!0),()=>{c.current=!1})),[n]),_(a,n,u.current,!1)}({control:o,name:n,exact:!0}),h=r.useRef(o.register(n,{...t.rules,value:l,...g(t.disabled)?{disabled:t.disabled}:{}}));return r.useEffect((()=>{const t=o._options.shouldUnregister||s,e=(t,e)=>{const n=m(o._fields,t);n&&n._f&&(n._f.mount=e)};if(e(n,!0),t){const t=p(m(o._options.defaultValues,n));b(o._defaultValues,n,t),f(m(o._formValues,n))&&b(o._formValues,n,t)}return()=>{(a?t&&!o._state.action:t)?o.unregister(n):e(n,!1)}}),[n,o,a,s]),r.useEffect((()=>{m(o._fields,n)&&o._updateDisabledField({disabled:i,fields:o._fields,name:n,value:m(o._fields,n)._f.value})}),[i,n,o]),{field:{name:n,value:l,...g(i)||d.disabled?{disabled:d.disabled||i}:{},onChange:r.useCallback((t=>h.current.onChange({target:{value:c(t),name:n},type:k})),[n]),onBlur:r.useCallback((()=>h.current.onBlur({target:{value:m(o._formValues,n),name:n},type:w})),[n,o]),ref:r.useCallback((t=>{const e=m(o._fields,n);e&&t&&(e._f.ref={focus:()=>t.focus(),select:()=>t.select(),setCustomValidity:e=>t.setCustomValidity(e),reportValidity:()=>t.reportValidity()})}),[o._fields,n])},formState:d,fieldState:Object.defineProperties({},{invalid:{enumerable:!0,get:()=>!!m(d.errors,n)},isDirty:{enumerable:!0,get:()=>!!m(d.dirtyFields,n)},isTouched:{enumerable:!0,get:()=>!!m(d.touchedFields,n)},isValidating:{enumerable:!0,get:()=>!!m(d.validatingFields,n)},error:{enumerable:!0,get:()=>m(d.errors,n)}})}}const W=t=>t.render(q(t));var Y=(t,e,n,r,i)=>e?{...n[t],types:{...n[t]&&n[t].types?n[t].types:{},[r]:i||!0}}:{},U=t=>({isOnSubmit:!t||t===C,isOnBlur:t===S,isOnChange:t===M,isOnAll:t===T,isOnTouch:t===A}),K=(t,e,n)=>!n&&(e.watchAll||e.watch.has(t)||[...e.watch].some((e=>t.startsWith(e)&&/^\.\w+/.test(t.slice(e.length)))));const G=(t,e,n,r)=>{for(const i of n||Object.keys(t)){const n=m(t,i);if(n){const{_f:t,...o}=n;if(t){if(t.refs&&t.refs[0]&&e(t.refs[0],i)&&!r)return!0;if(t.ref&&e(t.ref,t.name)&&!r)return!0;if(G(o,e))break}else if(l(o)&&G(o,e))break}}};var X=(t,e,n)=>{const r=z(m(t,n));return b(r,"root",e[n]),b(t,n,r),t},Z=t=>"file"===t.type,Q=t=>"function"===typeof t,tt=t=>{if(!d)return!1;const e=t?t.ownerDocument:0;return t instanceof(e&&e.defaultView?e.defaultView.HTMLElement:HTMLElement)},et=t=>P(t),nt=t=>"radio"===t.type,rt=t=>t instanceof RegExp;const it={value:!1,isValid:!1},ot={value:!0,isValid:!0};var st=t=>{if(Array.isArray(t)){if(t.length>1){const e=t.filter((t=>t&&t.checked&&!t.disabled)).map((t=>t.value));return{value:e,isValid:!!e.length}}return t[0].checked&&!t[0].disabled?t[0].attributes&&!f(t[0].attributes.value)?f(t[0].value)||""===t[0].value?ot:{value:t[0].value,isValid:!0}:ot:it}return it};const at={isValid:!1,value:null};var lt=t=>Array.isArray(t)?t.reduce(((t,e)=>e&&e.checked&&!e.disabled?{isValid:!0,value:e.value}:t),at):at;function ct(t,e,n="validate"){if(et(t)||Array.isArray(t)&&t.every(et)||g(t)&&!t)return{type:n,message:et(t)?t:"",ref:e}}var ut=t=>l(t)&&!rt(t)?t:{value:t,message:""},dt=async(t,e,n,r,o)=>{const{ref:a,refs:c,required:u,maxLength:d,minLength:p,min:h,max:y,pattern:v,validate:b,name:w,valueAsNumber:x,mount:k,disabled:S}=t._f,M=m(e,w);if(!k||S)return{};const C=c?c[0]:a,A=t=>{r&&C.reportValidity&&(C.setCustomValidity(g(t)?"":t||""),C.reportValidity())},T={},F=nt(a),H=i(a),_=F||H,V=(x||Z(a))&&f(a.value)&&f(M)||tt(a)&&""===a.value||""===M||Array.isArray(M)&&!M.length,z=Y.bind(null,w,n,T),$=(t,e,n,r=I,i=N)=>{const o=t?e:n;T[w]={type:t?r:i,message:o,ref:a,...z(t?r:i,o)}};if(o?!Array.isArray(M)||!M.length:u&&(!_&&(V||s(M))||g(M)&&!M||H&&!st(c).isValid||F&&!lt(c).isValid)){const{value:t,message:e}=et(u)?{value:!!u,message:u}:ut(u);if(t&&(T[w]={type:D,message:e,ref:C,...z(D,e)},!n))return A(e),T}if(!V&&(!s(h)||!s(y))){let t,e;const r=ut(y),i=ut(h);if(s(M)||isNaN(M)){const n=a.valueAsDate||new Date(M),o=t=>new Date((new Date).toDateString()+" "+t),s="time"==a.type,l="week"==a.type;P(r.value)&&M&&(t=s?o(M)>o(r.value):l?M>r.value:n>new Date(r.value)),P(i.value)&&M&&(e=s?o(M)<o(i.value):l?M<i.value:n<new Date(i.value))}else{const n=a.valueAsNumber||(M?+M:M);s(r.value)||(t=n>r.value),s(i.value)||(e=n<i.value)}if((t||e)&&($(!!t,r.message,i.message,O,E),!n))return A(T[w].message),T}if((d||p)&&!V&&(P(M)||o&&Array.isArray(M))){const t=ut(d),e=ut(p),r=!s(t.value)&&M.length>+t.value,i=!s(e.value)&&M.length<+e.value;if((r||i)&&($(r,t.message,e.message),!n))return A(T[w].message),T}if(v&&!V&&P(M)){const{value:t,message:e}=ut(v);if(rt(t)&&!M.match(t)&&(T[w]={type:R,message:e,ref:a,...z(R,e)},!n))return A(e),T}if(b)if(Q(b)){const t=ct(await b(M,e),C);if(t&&(T[w]={...t,...z(L,t.message)},!n))return A(t.message),T}else if(l(b)){let t={};for(const r in b){if(!B(t)&&!n)break;const i=ct(await b[r](M,e),C,r);i&&(t={...i,...z(r,i.message)},A(i.message),n&&(T[w]=t))}if(!B(t)&&(T[w]={ref:C,...t},!n))return T}return A(!0),T};function pt(t,e){const n=Array.isArray(e)?e:y(e)?[e]:v(e),r=1===n.length?t:function(t,e){const n=e.slice(0,-1).length;let r=0;for(;r<n;)t=f(t)?r++:t[e[r++]];return t}(t,n),i=n.length-1,o=n[i];return r&&delete r[o],0!==i&&(l(r)&&B(r)||Array.isArray(r)&&function(t){for(const e in t)if(t.hasOwnProperty(e)&&!f(t[e]))return!1;return!0}(r))&&pt(t,n.slice(0,-1)),t}var ht=()=>{let t=[];return{get observers(){return t},next:e=>{for(const n of t)n.next&&n.next(e)},subscribe:e=>(t.push(e),{unsubscribe:()=>{t=t.filter((t=>t!==e))}}),unsubscribe:()=>{t=[]}}},ft=t=>s(t)||!a(t);function mt(t,e){if(ft(t)||ft(e))return t===e;if(o(t)&&o(e))return t.getTime()===e.getTime();const n=Object.keys(t),r=Object.keys(e);if(n.length!==r.length)return!1;for(const i of n){const n=t[i];if(!r.includes(i))return!1;if("ref"!==i){const t=e[i];if(o(n)&&o(t)||l(n)&&l(t)||Array.isArray(n)&&Array.isArray(t)?!mt(n,t):n!==t)return!1}}return!0}var gt=t=>"select-multiple"===t.type,yt=t=>tt(t)&&t.isConnected,vt=t=>{for(const e in t)if(Q(t[e]))return!0;return!1};function bt(t,e={}){const n=Array.isArray(t);if(l(t)||n)for(const r in t)Array.isArray(t[r])||l(t[r])&&!vt(t[r])?(e[r]=Array.isArray(t[r])?[]:{},bt(t[r],e[r])):s(t[r])||(e[r]=!0);return e}function wt(t,e,n){const r=Array.isArray(t);if(l(t)||r)for(const i in t)Array.isArray(t[i])||l(t[i])&&!vt(t[i])?f(e)||ft(n[i])?n[i]=Array.isArray(t[i])?bt(t[i],[]):{...bt(t[i])}:wt(t[i],s(e)?{}:e[i],n[i]):n[i]=!mt(t[i],e[i]);return n}var xt=(t,e)=>wt(t,e,bt(e)),kt=(t,{valueAsNumber:e,valueAsDate:n,setValueAs:r})=>f(t)?t:e?""===t?NaN:t?+t:t:n&&P(t)?new Date(t):r?r(t):t;function St(t){const e=t.ref;if(!(t.refs?t.refs.every((t=>t.disabled)):e.disabled))return Z(e)?e.files:nt(e)?lt(t.refs).value:gt(e)?[...e.selectedOptions].map((({value:t})=>t)):i(e)?st(t.refs).value:kt(f(e.value)?t.ref.value:e.value,t)}var Mt=t=>f(t)?t:rt(t)?t.source:l(t)?rt(t.value)?t.value.source:t.value:t;const Ct="AsyncFunction";function At(t,e,n){const r=m(t,n);if(r||y(n))return{error:r,name:n};const i=n.split(".");for(;i.length;){const r=i.join("."),o=m(e,r),s=m(t,r);if(o&&!Array.isArray(o)&&n!==r)return{name:n};if(s&&s.type)return{name:r,error:s};i.pop()}return{name:n}}const Tt={mode:C,reValidateMode:M,shouldFocusError:!0};function Ot(t={}){let e,n={...Tt,...t},r={submitCount:0,isDirty:!1,isLoading:Q(n.defaultValues),isValidating:!1,isSubmitted:!1,isSubmitting:!1,isSubmitSuccessful:!1,isValid:!1,touchedFields:{},dirtyFields:{},validatingFields:{},errors:n.errors||{},disabled:n.disabled||!1},a={},y=(l(n.defaultValues)||l(n.values))&&p(n.defaultValues||n.values)||{},v=n.shouldUnregister?{}:p(y),k={action:!1,mount:!1,watch:!1},S={mount:new Set,unMount:new Set,array:new Set,watch:new Set},M=0;const C={isDirty:!1,dirtyFields:!1,validatingFields:!1,touchedFields:!1,isValidating:!1,isValid:!1,errors:!1},A={values:ht(),array:ht(),state:ht()},O=U(n.mode),E=U(n.reValidateMode),I=n.criteriaMode===T,N=async t=>{if(C.isValid||t){const t=n.resolver?B((await H()).errors):await _(a,!0);t!==r.isValid&&A.state.next({isValid:t})}},R=(t,e)=>{(C.isValidating||C.validatingFields)&&((t||Array.from(S.mount)).forEach((t=>{t&&(e?b(r.validatingFields,t,e):pt(r.validatingFields,t))})),A.state.next({validatingFields:r.validatingFields,isValidating:!B(r.validatingFields)}))},D=(t,e,n,r)=>{const i=m(a,t);if(i){const o=m(v,t,f(n)?m(y,t):n);f(o)||r&&r.defaultChecked||e?b(v,t,e?o:St(i._f)):j(t,o),k.mount&&N()}},L=(t,e,n,i,o)=>{let s=!1,l=!1;const c={name:t},u=!!(m(a,t)&&m(a,t)._f&&m(a,t)._f.disabled);if(!n||i){C.isDirty&&(l=r.isDirty,r.isDirty=c.isDirty=V(),s=l!==c.isDirty);const n=u||mt(m(y,t),e);l=!(u||!m(r.dirtyFields,t)),n||u?pt(r.dirtyFields,t):b(r.dirtyFields,t,!0),c.dirtyFields=r.dirtyFields,s=s||C.dirtyFields&&l!==!n}if(n){const e=m(r.touchedFields,t);e||(b(r.touchedFields,t,n),c.touchedFields=r.touchedFields,s=s||C.touchedFields&&e!==n)}return s&&o&&A.state.next(c),s?c:{}},F=(n,i,o,s)=>{const a=m(r.errors,n),l=C.isValid&&g(i)&&r.isValid!==i;var c;if(t.delayError&&o?(c=()=>((t,e)=>{b(r.errors,t,e),A.state.next({errors:r.errors})})(n,o),e=t=>{clearTimeout(M),M=setTimeout(c,t)},e(t.delayError)):(clearTimeout(M),e=null,o?b(r.errors,n,o):pt(r.errors,n)),(o?!mt(a,o):a)||!B(s)||l){const t={...s,...l&&g(i)?{isValid:i}:{},errors:r.errors,name:n};r={...r,...t},A.state.next(t)}},H=async t=>{R(t,!0);const e=await n.resolver(v,n.context,((t,e,n,r)=>{const i={};for(const o of t){const t=m(e,o);t&&b(i,o,t._f)}return{criteriaMode:n,names:[...t],fields:i,shouldUseNativeValidation:r}})(t||S.mount,a,n.criteriaMode,n.shouldUseNativeValidation));return R(t),e},_=async(t,e,i={valid:!0})=>{for(const s in t){const a=t[s];if(a){const{_f:t,...c}=a;if(t){const c=S.array.has(t.name),u=a._f&&((!(o=a._f)||!o.validate)&&!!(Q(o.validate)&&o.validate.constructor.name===Ct||l(o.validate)&&Object.values(o.validate).find((t=>t.constructor.name===Ct))));u&&C.validatingFields&&R([s],!0);const d=await dt(a,v,I,n.shouldUseNativeValidation&&!e,c);if(u&&C.validatingFields&&R([s]),d[t.name]&&(i.valid=!1,e))break;!e&&(m(d,t.name)?c?X(r.errors,d,t.name):b(r.errors,t.name,d[t.name]):pt(r.errors,t.name))}!B(c)&&await _(c,e,i)}}var o;return i.valid},V=(t,e)=>(t&&e&&b(v,t,e),!mt(it(),y)),$=(t,e,n)=>J(t,S,{...k.mount?v:f(e)?y:P(t)?{[t]:e}:e},n,e),j=(t,e,n={})=>{const r=m(a,t);let o=e;if(r){const n=r._f;n&&(!n.disabled&&b(v,t,kt(e,n)),o=tt(n.ref)&&s(e)?"":e,gt(n.ref)?[...n.ref.options].forEach((t=>t.selected=o.includes(t.value))):n.refs?i(n.ref)?n.refs.length>1?n.refs.forEach((t=>(!t.defaultChecked||!t.disabled)&&(t.checked=Array.isArray(o)?!!o.find((e=>e===t.value)):o===t.value))):n.refs[0]&&(n.refs[0].checked=!!o):n.refs.forEach((t=>t.checked=t.value===o)):Z(n.ref)?n.ref.value="":(n.ref.value=o,n.ref.type||A.values.next({name:t,values:{...v}})))}(n.shouldDirty||n.shouldTouch)&&L(t,o,n.shouldTouch,n.shouldDirty,!0),n.shouldValidate&&rt(t)},q=(t,e,n)=>{for(const r in e){const i=e[r],s=`${t}.${r}`,l=m(a,s);!S.array.has(t)&&ft(i)&&(!l||l._f)||o(i)?j(s,i,n):q(s,i,n)}},W=(t,e,n={})=>{const i=m(a,t),o=S.array.has(t),l=p(e);b(v,t,l),o?(A.array.next({name:t,values:{...v}}),(C.isDirty||C.dirtyFields)&&n.shouldDirty&&A.state.next({name:t,dirtyFields:xt(y,v),isDirty:V(t,l)})):!i||i._f||s(l)?j(t,l,n):q(t,l,n),K(t,S)&&A.state.next({...r}),A.values.next({name:k.mount?t:void 0,values:{...v}})},Y=async i=>{k.mount=!0;const o=i.target;let s=o.name,l=!0;const u=m(a,s),d=t=>{l=Number.isNaN(t)||mt(t,m(v,s,t))};if(u){let h,f;const g=o.type?St(u._f):c(i),y=i.type===w||i.type===x,k=!((p=u._f).mount&&(p.required||p.min||p.max||p.maxLength||p.minLength||p.pattern||p.validate))&&!n.resolver&&!m(r.errors,s)&&!u._f.deps||((t,e,n,r,i)=>!i.isOnAll&&(!n&&i.isOnTouch?!(e||t):(n?r.isOnBlur:i.isOnBlur)?!t:!(n?r.isOnChange:i.isOnChange)||t))(y,m(r.touchedFields,s),r.isSubmitted,E,O),M=K(s,S,y);b(v,s,g),y?(u._f.onBlur&&u._f.onBlur(i),e&&e(0)):u._f.onChange&&u._f.onChange(i);const T=L(s,g,y,!1),D=!B(T)||M;if(!y&&A.values.next({name:s,type:i.type,values:{...v}}),k)return C.isValid&&("onBlur"===t.mode?y&&N():N()),D&&A.state.next({name:s,...M?{}:T});if(!y&&M&&A.state.next({...r}),n.resolver){const{errors:t}=await H([s]);if(d(g),l){const e=At(r.errors,a,s),n=At(t,a,e.name||s);h=n.error,s=n.name,f=B(t)}}else R([s],!0),h=(await dt(u,v,I,n.shouldUseNativeValidation))[s],R([s]),d(g),l&&(h?f=!1:C.isValid&&(f=await _(a,!0)));l&&(u._f.deps&&rt(u._f.deps),F(s,f,h,T))}var p},et=(t,e)=>{if(m(r.errors,e)&&t.focus)return t.focus(),1},rt=async(t,e={})=>{let i,o;const s=z(t);if(n.resolver){const e=await(async t=>{const{errors:e}=await H(t);if(t)for(const n of t){const t=m(e,n);t?b(r.errors,n,t):pt(r.errors,n)}else r.errors=e;return e})(f(t)?t:s);i=B(e),o=t?!s.some((t=>m(e,t))):i}else t?(o=(await Promise.all(s.map((async t=>{const e=m(a,t);return await _(e&&e._f?{[t]:e}:e)})))).every(Boolean),(o||r.isValid)&&N()):o=i=await _(a);return A.state.next({...!P(t)||C.isValid&&i!==r.isValid?{}:{name:t},...n.resolver||!t?{isValid:i}:{},errors:r.errors}),e.shouldFocus&&!o&&G(a,et,t?s:S.mount),o},it=t=>{const e={...k.mount?v:y};return f(t)?e:P(t)?m(e,t):t.map((t=>m(e,t)))},ot=(t,e)=>({invalid:!!m((e||r).errors,t),isDirty:!!m((e||r).dirtyFields,t),error:m((e||r).errors,t),isValidating:!!m(r.validatingFields,t),isTouched:!!m((e||r).touchedFields,t)}),st=(t,e,n)=>{const i=(m(a,t,{_f:{}})._f||{}).ref,o=m(r.errors,t)||{},{ref:s,message:l,type:c,...u}=o;b(r.errors,t,{...u,...e,ref:i}),A.state.next({name:t,errors:r.errors,isValid:!1}),n&&n.shouldFocus&&i&&i.focus&&i.focus()},at=(t,e={})=>{for(const i of t?z(t):S.mount)S.mount.delete(i),S.array.delete(i),e.keepValue||(pt(a,i),pt(v,i)),!e.keepError&&pt(r.errors,i),!e.keepDirty&&pt(r.dirtyFields,i),!e.keepTouched&&pt(r.touchedFields,i),!e.keepIsValidating&&pt(r.validatingFields,i),!n.shouldUnregister&&!e.keepDefaultValue&&pt(y,i);A.values.next({values:{...v}}),A.state.next({...r,...e.keepDirty?{isDirty:V()}:{}}),!e.keepIsValid&&N()},lt=({disabled:t,name:e,field:n,fields:r,value:i})=>{if(g(t)&&k.mount||t){const o=t?void 0:f(i)?St(n?n._f:m(r,e)._f):i;b(v,e,o),L(e,o,!1,!1,!0)}},ct=(e,r={})=>{let o=m(a,e);const s=g(r.disabled)||g(t.disabled);return b(a,e,{...o||{},_f:{...o&&o._f?o._f:{ref:{name:e}},name:e,mount:!0,...r}}),S.mount.add(e),o?lt({field:o,disabled:g(r.disabled)?r.disabled:t.disabled,name:e,value:r.value}):D(e,!0,r.value),{...s?{disabled:r.disabled||t.disabled}:{},...n.progressive?{required:!!r.required,min:Mt(r.min),max:Mt(r.max),minLength:Mt(r.minLength),maxLength:Mt(r.maxLength),pattern:Mt(r.pattern)}:{},name:e,onChange:Y,onBlur:Y,ref:t=>{if(t){ct(e,r),o=m(a,e);const n=f(t.value)&&t.querySelectorAll&&t.querySelectorAll("input,select,textarea")[0]||t,s=(t=>nt(t)||i(t))(n),l=o._f.refs||[];if(s?l.find((t=>t===n)):n===o._f.ref)return;b(a,e,{_f:{...o._f,...s?{refs:[...l.filter(yt),n,...Array.isArray(m(y,e))?[{}]:[]],ref:{type:n.type,name:e}}:{ref:n}}}),D(e,!1,void 0,n)}else o=m(a,e,{}),o._f&&(o._f.mount=!1),(n.shouldUnregister||r.shouldUnregister)&&(!u(S.array,e)||!k.action)&&S.unMount.add(e)}}},ut=()=>n.shouldFocusError&&G(a,et,S.mount),vt=(t,e)=>async i=>{let o;i&&(i.preventDefault&&i.preventDefault(),i.persist&&i.persist());let s=p(v);if(A.state.next({isSubmitting:!0}),n.resolver){const{errors:t,values:e}=await H();r.errors=t,s=e}else await _(a);if(pt(r.errors,"root"),B(r.errors)){A.state.next({errors:{}});try{await t(s,i)}catch(l){o=l}}else e&&await e({...r.errors},i),ut(),setTimeout(ut);if(A.state.next({isSubmitted:!0,isSubmitting:!1,isSubmitSuccessful:B(r.errors)&&!o,submitCount:r.submitCount+1,errors:r.errors}),o)throw o},bt=(e,n={})=>{const i=e?p(e):y,o=p(i),s=B(e),l=s?y:o;if(n.keepDefaultValues||(y=i),!n.keepValues){if(n.keepDirtyValues)for(const t of S.mount)m(r.dirtyFields,t)?b(l,t,m(v,t)):W(t,m(l,t));else{if(d&&f(e))for(const t of S.mount){const e=m(a,t);if(e&&e._f){const t=Array.isArray(e._f.refs)?e._f.refs[0]:e._f.ref;if(tt(t)){const e=t.closest("form");if(e){e.reset();break}}}}a={}}v=t.shouldUnregister?n.keepDefaultValues?p(y):{}:p(l),A.array.next({values:{...l}}),A.values.next({values:{...l}})}S={mount:n.keepDirtyValues?S.mount:new Set,unMount:new Set,array:new Set,watch:new Set,watchAll:!1,focus:""},k.mount=!C.isValid||!!n.keepIsValid||!!n.keepDirtyValues,k.watch=!!t.shouldUnregister,A.state.next({submitCount:n.keepSubmitCount?r.submitCount:0,isDirty:!s&&(n.keepDirty?r.isDirty:!(!n.keepDefaultValues||mt(e,y))),isSubmitted:!!n.keepIsSubmitted&&r.isSubmitted,dirtyFields:s?{}:n.keepDirtyValues?n.keepDefaultValues&&v?xt(y,v):r.dirtyFields:n.keepDefaultValues&&e?xt(y,e):n.keepDirty?r.dirtyFields:{},touchedFields:n.keepTouched?r.touchedFields:{},errors:n.keepErrors?r.errors:{},isSubmitSuccessful:!!n.keepIsSubmitSuccessful&&r.isSubmitSuccessful,isSubmitting:!1})},wt=(t,e)=>bt(Q(t)?t(v):t,e);return{control:{register:ct,unregister:at,getFieldState:ot,handleSubmit:vt,setError:st,_executeSchema:H,_getWatch:$,_getDirty:V,_updateValid:N,_removeUnmounted:()=>{for(const t of S.unMount){const e=m(a,t);e&&(e._f.refs?e._f.refs.every((t=>!yt(t))):!yt(e._f.ref))&&at(t)}S.unMount=new Set},_updateFieldArray:(t,e=[],n,i,o=!0,s=!0)=>{if(i&&n){if(k.action=!0,s&&Array.isArray(m(a,t))){const e=n(m(a,t),i.argA,i.argB);o&&b(a,t,e)}if(s&&Array.isArray(m(r.errors,t))){const e=n(m(r.errors,t),i.argA,i.argB);o&&b(r.errors,t,e),((t,e)=>{!h(m(t,e)).length&&pt(t,e)})(r.errors,t)}if(C.touchedFields&&s&&Array.isArray(m(r.touchedFields,t))){const e=n(m(r.touchedFields,t),i.argA,i.argB);o&&b(r.touchedFields,t,e)}C.dirtyFields&&(r.dirtyFields=xt(y,v)),A.state.next({name:t,isDirty:V(t,e),dirtyFields:r.dirtyFields,errors:r.errors,isValid:r.isValid})}else b(v,t,e)},_updateDisabledField:lt,_getFieldArray:e=>h(m(k.mount?v:y,e,t.shouldUnregister?m(y,e,[]):[])),_reset:bt,_resetDefaultValues:()=>Q(n.defaultValues)&&n.defaultValues().then((t=>{wt(t,n.resetOptions),A.state.next({isLoading:!1})})),_updateFormState:t=>{r={...r,...t}},_disableForm:t=>{g(t)&&(A.state.next({disabled:t}),G(a,((e,n)=>{const r=m(a,n);r&&(e.disabled=r._f.disabled||t,Array.isArray(r._f.refs)&&r._f.refs.forEach((e=>{e.disabled=r._f.disabled||t})))}),0,!1))},_subjects:A,_proxyFormState:C,_setErrors:t=>{r.errors=t,A.state.next({errors:r.errors,isValid:!1})},get _fields(){return a},get _formValues(){return v},get _state(){return k},set _state(t){k=t},get _defaultValues(){return y},get _names(){return S},set _names(t){S=t},get _formState(){return r},set _formState(t){r=t},get _options(){return n},set _options(t){n={...n,...t}}},trigger:rt,register:ct,handleSubmit:vt,watch:(t,e)=>Q(t)?A.values.subscribe({next:n=>t($(void 0,e),n)}):$(t,e,!0),setValue:W,getValues:it,reset:wt,resetField:(t,e={})=>{m(a,t)&&(f(e.defaultValue)?W(t,p(m(y,t))):(W(t,e.defaultValue),b(y,t,p(e.defaultValue))),e.keepTouched||pt(r.touchedFields,t),e.keepDirty||(pt(r.dirtyFields,t),r.isDirty=e.defaultValue?V(t,p(m(y,t))):V()),e.keepError||(pt(r.errors,t),C.isValid&&N()),A.state.next({...r}))},clearErrors:t=>{t&&z(t).forEach((t=>pt(r.errors,t))),A.state.next({errors:t?r.errors:{}})},unregister:at,setError:st,setFocus:(t,e={})=>{const n=m(a,t),r=n&&n._f;if(r){const t=r.refs?r.refs[0]:r.ref;t.focus&&(t.focus(),e.shouldSelect&&t.select())}},getFieldState:ot}}function Et(t={}){const e=r.useRef(),n=r.useRef(),[i,o]=r.useState({isDirty:!1,isValidating:!1,isLoading:Q(t.defaultValues),isSubmitted:!1,isSubmitting:!1,isSubmitSuccessful:!1,isValid:!1,submitCount:0,dirtyFields:{},touchedFields:{},validatingFields:{},errors:t.errors||{},disabled:t.disabled||!1,defaultValues:Q(t.defaultValues)?void 0:t.defaultValues});e.current||(e.current={...Ot(t),formState:i});const s=e.current.control;return s._options=t,j({subject:s._subjects.state,next:t=>{V(t,s._proxyFormState,s._updateFormState,!0)&&o({...s._formState})}}),r.useEffect((()=>s._disableForm(t.disabled)),[s,t.disabled]),r.useEffect((()=>{if(s._proxyFormState.isDirty){const t=s._getDirty();t!==i.isDirty&&s._subjects.state.next({isDirty:t})}}),[s,i.isDirty]),r.useEffect((()=>{t.values&&!mt(t.values,n.current)?(s._reset(t.values,s._options.resetOptions),n.current=t.values,o((t=>({...t})))):s._resetDefaultValues()}),[t.values,s]),r.useEffect((()=>{t.errors&&s._setErrors(t.errors)}),[t.errors,s]),r.useEffect((()=>{s._state.mount||(s._updateValid(),s._state.mount=!0),s._state.watch&&(s._state.watch=!1,s._subjects.state.next({...s._formState})),s._removeUnmounted()})),r.useEffect((()=>{t.shouldUnregister&&s._subjects.values.next({values:s._getWatch()})}),[t.shouldUnregister,s]),e.current.formState=_(i,s),e.current}}}]);